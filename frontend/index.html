<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="NocturneSwap - Professional Solana DEX with real-time trading, liquidity pools, and portfolio management" />
    <title>NocturneSwap - Professional Solana DEX</title>
    
    <!-- SEO Meta Tags -->
    <meta name="keywords" content="Solana, DEX, DeFi, Swap, Trading, Jupiter, Liquidity, Portfolio" />
    <meta name="author" content="NocturneSwap" />
    <meta property="og:title" content="NocturneSwap - Professional Solana DEX" />
    <meta property="og:description" content="Trade tokens, provide liquidity, and manage your portfolio on Solana" />
    <meta property="og:type" content="website" />
    <meta name="twitter:card" content="summary_large_image" />
    
    <!-- Embedded favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>🌙</text></svg>">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="NocturneSwap">
    
    <!-- External APIs -->
    <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.min.js"></script>
    <script src="src/analytics.js"></script>
    <script src="src/api.js"></script>
    <script src="src/jupiter-integration.js"></script>
    <script src="src/nocturne-integration.js"></script>
    
    <!-- Enhanced Visual Effects -->
    <script src="static/js/advanced-visuals.js"></script>
    
    <!-- Enhanced Stylesheets -->
    <link rel="stylesheet" href="static/css/main-enhanced.css">
    <link rel="stylesheet" href="static/css/mobile-enhancements.css">
    <link rel="stylesheet" href="src/GamingTierFX.css">
    
    <style>
      /* Global Styles - Dark Cult Theme */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      
      body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        background: 
          radial-gradient(circle at 20% 80%, rgba(75, 0, 130, 0.15) 0%, transparent 60%),
          radial-gradient(circle at 80% 20%, rgba(139, 0, 139, 0.12) 0%, transparent 60%),
          radial-gradient(circle at 40% 40%, rgba(25, 25, 112, 0.08) 0%, transparent 70%),
          linear-gradient(135deg, #000000 0%, #0a0a0a 25%, #1a0a1a 50%, #0a0a0a 75%, #000000 100%);
        min-height: 100vh;
        color: #e0e0e0;
        overflow-x: hidden;
        position: relative;
        background-attachment: fixed;
      }

      /* Enhanced Dark Mystical Background Effects */
      body::before {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        width: 120%;
        height: 120%;
        background: 
          radial-gradient(circle at 25% 25%, rgba(75, 0, 130, 0.12) 0%, transparent 40%),
          radial-gradient(circle at 75% 75%, rgba(139, 0, 139, 0.1) 0%, transparent 45%),
          radial-gradient(circle at 50% 50%, rgba(25, 25, 112, 0.08) 0%, transparent 50%),
          radial-gradient(circle at 10% 80%, rgba(138, 43, 226, 0.06) 0%, transparent 35%),
          radial-gradient(circle at 90% 20%, rgba(147, 112, 219, 0.05) 0%, transparent 40%);
        pointer-events: none;
        z-index: -2;
        animation: mysticalPulse 15s ease-in-out infinite, slowDrift 30s linear infinite;
        transform-origin: center;
      }

      body::after {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: 
          linear-gradient(45deg, transparent 47%, rgba(75, 0, 130, 0.03) 50%, transparent 53%),
          linear-gradient(-45deg, transparent 47%, rgba(139, 0, 139, 0.03) 50%, transparent 53%),
          linear-gradient(135deg, transparent 48%, rgba(138, 43, 226, 0.02) 50%, transparent 52%);
        pointer-events: none;
        z-index: -1;
        animation: mysticalGrid 25s linear infinite, gridPulse 8s ease-in-out infinite;
      }

      /* Optimized particle effect overlay - Mobile Friendly */
      .particle-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: -2; /* Further behind content for better visibility */
        background-image: 
          radial-gradient(1px 1px at 20px 30px, rgba(75, 0, 130, 0.08), transparent),
          radial-gradient(1px 1px at 40px 70px, rgba(139, 0, 139, 0.06), transparent),
          radial-gradient(1px 1px at 90px 40px, rgba(138, 43, 226, 0.05), transparent);
        background-repeat: repeat;
        background-size: 200px 120px; /* Larger pattern, less dense */
        animation: particles 40s linear infinite;
        opacity: 0.15; /* Further reduced for better component visibility */
        will-change: transform; /* Only transform for better performance */
        transform: translateZ(0); /* Hardware acceleration */
      }

      /* Enhanced Mobile Performance Optimizations */
      @media (max-width: 768px) {
        .particle-overlay {
          opacity: 0.05; /* Even lighter for better visibility */
          animation-duration: 80s; /* Much slower on mobile */
          background-size: 400px 300px; /* Larger, less dense pattern */
        }
        
        /* Reduce heavy animations on mobile */
        .swap-container::after,
        .swap-container::before {
          animation: none;
        }
        
        /* Touch-friendly navigation for mobile */
        .navigation {
          display: flex;
          justify-content: center;
          gap: 8px;
          margin-bottom: 25px;
          flex-wrap: wrap;
          padding: 15px 10px;
        }
        
        .nav-button {
          padding: 14px 24px; /* Larger touch targets */
          font-size: 0.95rem;
          border-radius: 12px;
          min-height: 48px; /* Touch-friendly minimum */
          transition: all 0.2s ease; /* Faster transitions on mobile */
        }
      }

      @media (max-width: 480px) {
        .particle-overlay {
          opacity: 0.03; /* Almost invisible on phones */
          animation: none; /* Disable on small screens */
        }
        
        /* Further mobile optimizations */
        body::before,
        body::after {
          animation-duration: 60s; /* Much slower background animations */
        }
        
        .loading-spinner::before,
        .loading-spinner::after {
          display: none; /* Remove extra spinner rings on mobile */
        }
      }

      @keyframes mysticalPulse {
        0%, 100% { opacity: 0.3; transform: scale(1); }
        25% { opacity: 0.6; transform: scale(1.02); }
        50% { opacity: 0.8; transform: scale(1.05); }
        75% { opacity: 0.5; transform: scale(1.03); }
      }

      @keyframes mysticalGrid {
        0% { transform: translate(0, 0) rotate(0deg); }
        100% { transform: translate(100px, 50px) rotate(360deg); }
      }

      @keyframes slowDrift {
        0% { transform: translateX(0) translateY(0) rotate(0deg); }
        25% { transform: translateX(-20px) translateY(10px) rotate(90deg); }
        50% { transform: translateX(10px) translateY(-15px) rotate(180deg); }
        75% { transform: translateX(15px) translateY(20px) rotate(270deg); }
        100% { transform: translateX(0) translateY(0) rotate(360deg); }
      }

      @keyframes gridPulse {
        0%, 100% { opacity: 0.6; }
        50% { opacity: 1; }
      }

      @keyframes particles {
        0% { transform: translateY(0px) rotate(0deg); }
        100% { transform: translateY(-100px) rotate(360deg); }
      }

      @keyframes particleGlow {
        0%, 100% { opacity: 0.3; }
        50% { opacity: 0.7; }
      }
      
      /* Enhanced Loading Screen - Dark Cult */
      .loading-screen {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: 
          radial-gradient(circle at center, rgba(75, 0, 130, 0.6) 0%, transparent 60%),
          radial-gradient(circle at 30% 70%, rgba(139, 0, 139, 0.4) 0%, transparent 50%),
          radial-gradient(circle at 70% 30%, rgba(138, 43, 226, 0.3) 0%, transparent 45%),
          linear-gradient(135deg, #000000 0%, #050505 25%, #0a0a0a 50%, #050505 75%, #000000 100%);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        color: #e0e0e0;
        z-index: 9999;
        backdrop-filter: blur(3px);
        animation: loadingBackground 4s ease-in-out infinite;
      }

      @keyframes loadingBackground {
        0%, 100% { background-size: 100% 100%; }
        50% { background-size: 110% 110%; }
      }
      
      .loading-spinner {
        width: 100px;
        height: 100px;
        border: 5px solid rgba(75, 0, 130, 0.15);
        border-top: 5px solid #9d4edd;
        border-right: 5px solid #7209b7;
        border-bottom: 5px solid #6a0dad;
        border-left: 5px solid rgba(138, 43, 226, 0.8);
        border-radius: 50%;
        animation: cultSpin 2s linear infinite, spinnerGlow 3s ease-in-out infinite;
        margin-bottom: 30px;
        box-shadow: 
          0 0 25px rgba(75, 0, 130, 0.6),
          0 0 50px rgba(139, 0, 139, 0.3),
          0 0 75px rgba(138, 43, 226, 0.2),
          inset 0 0 25px rgba(75, 0, 130, 0.15);
        position: relative;
      }

      .loading-spinner::before {
        content: '';
        position: absolute;
        top: -10px;
        left: -10px;
        right: -10px;
        bottom: -10px;
        border: 3px solid transparent;
        border-top: 3px solid rgba(139, 0, 139, 0.4);
        border-right: 3px solid rgba(147, 112, 219, 0.3);
        border-radius: 50%;
        animation: cultSpin 3s linear infinite reverse, orbitGlow 4s ease-in-out infinite;
      }

      .loading-spinner::after {
        content: '';
        position: absolute;
        top: -15px;
        left: -15px;
        right: -15px;
        bottom: -15px;
        border: 2px solid transparent;
        border-bottom: 2px solid rgba(138, 43, 226, 0.2);
        border-left: 2px solid rgba(147, 112, 219, 0.25);
        border-radius: 50%;
        animation: cultSpin 4s linear infinite, outerOrbitGlow 5s ease-in-out infinite;
      }

      @keyframes spinnerGlow {
        0%, 100% { 
          box-shadow: 
            0 0 25px rgba(75, 0, 130, 0.6),
            0 0 50px rgba(139, 0, 139, 0.3),
            inset 0 0 25px rgba(75, 0, 130, 0.15);
        }
        50% { 
          box-shadow: 
            0 0 35px rgba(75, 0, 130, 0.9),
            0 0 70px rgba(139, 0, 139, 0.5),
            0 0 100px rgba(138, 43, 226, 0.3),
            inset 0 0 35px rgba(75, 0, 130, 0.25);
        }
      }

      @keyframes orbitGlow {
        0%, 100% { opacity: 0.4; }
        50% { opacity: 0.8; }
      }

      @keyframes outerOrbitGlow {
        0%, 100% { opacity: 0.2; }
        50% { opacity: 0.6; }
      }
      
      @keyframes cultSpin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
      
      .loading-text {
        font-size: 2.2rem;
        margin-bottom: 15px;
        text-shadow: 
          0 0 15px rgba(75, 0, 130, 1),
          0 0 30px rgba(139, 0, 139, 0.6),
          0 0 45px rgba(138, 43, 226, 0.4),
          0 0 60px rgba(147, 112, 219, 0.2);
        animation: textGlow 4s ease-in-out infinite, textFloat 6s ease-in-out infinite;
        font-weight: 700;
        letter-spacing: 3px;
        position: relative;
      }

      .loading-text::before {
        content: '✦';
        position: absolute;
        left: -40px;
        top: 50%;
        transform: translateY(-50%);
        color: rgba(75, 0, 130, 0.8);
        font-size: 1.5rem;
        animation: starTwinkle 3s ease-in-out infinite;
      }

      .loading-text::after {
        content: '✦';
        position: absolute;
        right: -40px;
        top: 50%;
        transform: translateY(-50%);
        color: rgba(139, 0, 139, 0.8);
        font-size: 1.5rem;
        animation: starTwinkle 3s ease-in-out infinite reverse;
      }

      @keyframes textGlow {
        0%, 100% { 
          text-shadow: 
            0 0 15px rgba(75, 0, 130, 1),
            0 0 30px rgba(139, 0, 139, 0.6),
            0 0 45px rgba(138, 43, 226, 0.4);
        }
        50% { 
          text-shadow: 
            0 0 25px rgba(75, 0, 130, 1.2),
            0 0 50px rgba(139, 0, 139, 0.8),
            0 0 75px rgba(138, 43, 226, 0.6),
            0 0 100px rgba(147, 112, 219, 0.4);
        }
      }

      @keyframes textFloat {
        0%, 100% { transform: translateY(0px); }
        50% { transform: translateY(-10px); }
      }

      @keyframes starTwinkle {
        0%, 100% { opacity: 0.4; transform: translateY(-50%) scale(1) rotate(0deg); }
        50% { opacity: 1; transform: translateY(-50%) scale(1.2) rotate(180deg); }
      }
      
      .loading-subtitle {
        font-size: 1.2rem;
        opacity: 0.9;
        text-shadow: 0 0 8px rgba(75, 0, 130, 0.6);
        animation: subtitleGlow 5s ease-in-out infinite;
        font-weight: 300;
        letter-spacing: 2px;
      }

      @keyframes subtitleGlow {
        0%, 100% { opacity: 0.7; }
        50% { opacity: 1; }
      }
      
      /* Enhanced Loading Progress */
      .loading-progress {
        margin-top: 40px;
        width: 350px;
        text-align: center;
      }
      
      .progress-bar {
        width: 100%;
        height: 6px;
        background: 
          linear-gradient(90deg, 
            rgba(75, 0, 130, 0.2), 
            rgba(139, 0, 139, 0.15), 
            rgba(75, 0, 130, 0.2));
        border-radius: 3px;
        overflow: hidden;
        margin-bottom: 15px;
        box-shadow: 
          0 0 15px rgba(75, 0, 130, 0.4),
          inset 0 0 10px rgba(0, 0, 0, 0.5);
        position: relative;
      }

      .progress-bar::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
        animation: progressShimmer 2s linear infinite;
      }

      @keyframes progressShimmer {
        0% { left: -100%; }
        100% { left: 100%; }
      }
      
      .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, 
          rgba(75, 0, 130, 0.9), 
          rgba(139, 0, 139, 0.9), 
          rgba(138, 43, 226, 0.8),
          rgba(147, 112, 219, 0.9),
          rgba(255, 140, 0, 0.8));
        border-radius: 3px;
        width: 0%;
        transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        animation: progressGlow 3s ease-in-out infinite;
        position: relative;
        box-shadow: 0 0 20px rgba(75, 0, 130, 0.6);
      }

      .progress-fill::after {
        content: '';
        position: absolute;
        top: 0;
        right: 0;
        width: 20px;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4));
        border-radius: 0 3px 3px 0;
        animation: progressTail 1s ease-in-out infinite;
      }

      @keyframes progressTail {
        0%, 100% { opacity: 0.3; }
        50% { opacity: 0.8; }
      }
      
      @keyframes progressGlow {
        0%, 100% { 
          box-shadow: 0 0 20px rgba(75, 0, 130, 0.6);
        }
        50% { 
          box-shadow: 
            0 0 30px rgba(75, 0, 130, 0.9),
            0 0 40px rgba(139, 0, 139, 0.6);
        }
      }
      
      .progress-text {
        font-size: 0.9rem;
        color: #c0c0c0;
        text-shadow: 0 0 5px rgba(75, 0, 130, 0.3);
      }
      
      /* Main App Container */
      .app-container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 20px;
        display: none;
      }
      
      /* Header - Dark Cult Style */
      .header {
        text-align: center;
        margin-bottom: 40px;
        color: #e0e0e0;
        position: relative;
        padding: 20px 0;
      }
      
      .header::before {
        content: '⟐ ◆ ⟐ ◆ ⟐';
        position: absolute;
        top: -10px;
        left: 50%;
        transform: translateX(-50%);
        font-size: 1.8rem;
        color: #9d4edd;
        opacity: 0.7;
        animation: runeFloat 4s ease-in-out infinite;
        text-shadow: 0 0 15px rgba(75, 0, 130, 0.8);
      }

      .header::after {
        content: '◇ ⟐ ◇ ⟐ ◇';
        position: absolute;
        bottom: -10px;
        left: 50%;
        transform: translateX(-50%);
        font-size: 1.8rem;
        color: #7209b7;
        opacity: 0.7;
        animation: runeFloat 4s ease-in-out infinite reverse;
        text-shadow: 0 0 15px rgba(139, 0, 139, 0.8);
      }

      @keyframes runeFloat {
        0%, 100% { transform: translateX(-50%) translateY(0px); opacity: 0.7; }
        50% { transform: translateX(-50%) translateY(-8px); opacity: 1; }
      }
      
      .header h1 {
        font-size: 3.5rem;
        margin-bottom: 15px;
        background: linear-gradient(45deg, #e0e0e0 0%, #9d4edd 25%, #7209b7 50%, #6a0dad 75%, #e0e0e0 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        text-shadow: 0 0 30px rgba(75, 0, 130, 0.5);
        position: relative;
        font-weight: 700;
        letter-spacing: 2px;
        animation: titleGlow 6s ease-in-out infinite;
      }

      @keyframes titleGlow {
        0%, 100% { 
          filter: drop-shadow(0 0 10px rgba(75, 0, 130, 0.5)); 
          transform: scale(1);
        }
        50% { 
          filter: drop-shadow(0 0 20px rgba(139, 0, 139, 0.8)); 
          transform: scale(1.02);
        }
      }

      .header h1::before {
        content: '☾';
        position: absolute;
        left: -80px;
        top: 50%;
        transform: translateY(-50%);
        font-size: 2.5rem;
        color: #9d4edd;
        text-shadow: 0 0 20px rgba(75, 0, 130, 0.9);
        animation: moonPhase 8s ease-in-out infinite;
      }

      .header h1::after {
        content: '☽';
        position: absolute;
        right: -80px;
        top: 50%;
        transform: translateY(-50%);
        font-size: 2.5rem;
        color: #7209b7;
        text-shadow: 0 0 20px rgba(139, 0, 139, 0.9);
        animation: moonPhase 8s ease-in-out infinite reverse;
      }

      @keyframes moonPhase {
        0%, 100% { opacity: 0.6; transform: translateY(-50%) rotate(0deg); }
        50% { opacity: 1; transform: translateY(-50%) rotate(15deg); }
      }
      
      .header p {
        font-size: 1.3rem;
        opacity: 0.9;
        color: #c0c0c0;
        text-shadow: 0 0 10px rgba(75, 0, 130, 0.3);
        margin-top: 10px;
        font-weight: 300;
        letter-spacing: 1px;
      }
      
      /* Enhanced Navigation */
      .navigation {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-bottom: 50px;
        flex-wrap: wrap;
        position: relative;
        padding: 20px 0;
      }

      .navigation::before {
        content: '';
        position: absolute;
        top: 50%;
        left: 5%;
        right: 5%;
        height: 2px;
        background: linear-gradient(90deg, 
          transparent, 
          rgba(75, 0, 130, 0.2), 
          rgba(139, 0, 139, 0.4), 
          rgba(138, 43, 226, 0.3), 
          rgba(139, 0, 139, 0.4), 
          rgba(75, 0, 130, 0.2), 
          transparent);
        z-index: -1;
        animation: navLineGlow 6s ease-in-out infinite;
      }

      .navigation::after {
        content: '◇ ⟐ ◇ ⟐ ◇';
        position: absolute;
        top: -15px;
        left: 50%;
        transform: translateX(-50%);
        font-size: 1.2rem;
        color: rgba(75, 0, 130, 0.6);
        animation: navRunes 8s ease-in-out infinite;
        text-shadow: 0 0 10px rgba(75, 0, 130, 0.4);
      }

      @keyframes navLineGlow {
        0%, 100% { opacity: 0.6; }
        50% { opacity: 1; }
      }

      @keyframes navRunes {
        0%, 100% { opacity: 0.4; transform: translateX(-50%) translateY(0px); }
        50% { opacity: 0.8; transform: translateX(-50%) translateY(-5px); }
      }
      
      .nav-button {
        background: 
          linear-gradient(145deg, rgba(0, 0, 0, 0.9), rgba(20, 20, 20, 0.7)),
          linear-gradient(145deg, rgba(75, 0, 130, 0.15), rgba(139, 0, 139, 0.08));
        color: #e0e0e0;
        border: 2px solid rgba(75, 0, 130, 0.4);
        border-radius: 16px;
        padding: 16px 32px;
        font-weight: 700;
        cursor: pointer;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        text-decoration: none;
        display: inline-block;
        backdrop-filter: blur(20px);
        position: relative;
        overflow: hidden;
        text-shadow: 0 0 12px rgba(75, 0, 130, 0.4);
        box-shadow: 
          0 6px 20px rgba(0, 0, 0, 0.4),
          0 0 25px rgba(75, 0, 130, 0.15),
          inset 0 1px 0 rgba(255, 255, 255, 0.1),
          inset 0 -1px 0 rgba(0, 0, 0, 0.2);
        font-size: 1.05rem;
        letter-spacing: 1px;
      }

      .nav-button::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, 
          transparent, 
          rgba(75, 0, 130, 0.3), 
          rgba(139, 0, 139, 0.2), 
          transparent);
        transition: left 0.6s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .nav-button::after {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        background: radial-gradient(circle, rgba(75, 0, 130, 0.4), transparent 70%);
        border-radius: 50%;
        transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        transform: translate(-50%, -50%);
      }

      .nav-button:hover::before {
        left: 100%;
      }

      .nav-button:hover::after {
        width: 200px;
        height: 200px;
      }

      .nav-button:hover {
        background: 
          linear-gradient(145deg, rgba(75, 0, 130, 0.25), rgba(139, 0, 139, 0.15)),
          linear-gradient(145deg, rgba(0, 0, 0, 0.95), rgba(20, 20, 20, 0.8));
        border-color: rgba(75, 0, 130, 0.8);
        transform: translateY(-4px) scale(1.02);
        box-shadow: 
          0 12px 35px rgba(0, 0, 0, 0.5),
          0 0 40px rgba(75, 0, 130, 0.4),
          0 0 60px rgba(139, 0, 139, 0.2),
          inset 0 1px 0 rgba(255, 255, 255, 0.2),
          inset 0 -1px 0 rgba(0, 0, 0, 0.3);
        color: #ffffff;
        text-shadow: 
          0 0 20px rgba(75, 0, 130, 1),
          0 0 30px rgba(139, 0, 139, 0.6);
      }

      .nav-button.active {
        background: 
          linear-gradient(145deg, rgba(75, 0, 130, 0.4), rgba(139, 0, 139, 0.25)),
          linear-gradient(145deg, rgba(0, 0, 0, 0.95), rgba(20, 20, 20, 0.9));
        border-color: rgba(75, 0, 130, 1);
        color: #ffffff;
        text-shadow: 
          0 0 25px rgba(75, 0, 130, 1.2),
          0 0 35px rgba(139, 0, 139, 0.8);
        box-shadow: 
          0 0 30px rgba(75, 0, 130, 0.6),
          0 0 50px rgba(139, 0, 139, 0.4),
          inset 0 0 15px rgba(75, 0, 130, 0.3),
          inset 0 1px 0 rgba(255, 255, 255, 0.15);
        animation: activeButtonGlow 3s ease-in-out infinite;
      }

      @keyframes activeButtonGlow {
        0%, 100% { 
          box-shadow: 
            0 0 30px rgba(75, 0, 130, 0.6),
            0 0 50px rgba(139, 0, 139, 0.4),
            inset 0 0 15px rgba(75, 0, 130, 0.3);
        }
        50% { 
          box-shadow: 
            0 0 40px rgba(75, 0, 130, 0.8),
            0 0 70px rgba(139, 0, 139, 0.6),
            0 0 90px rgba(138, 43, 226, 0.3),
            inset 0 0 20px rgba(75, 0, 130, 0.4);
        }
      }
      
      /* Main Content Area - Responsive Grid */
      .main-content {
        display: grid;
        grid-template-columns: 1fr 300px;
        gap: 30px;
        margin-bottom: 30px;
      }
      
      /* Mobile-first responsive adjustments */
      @media (max-width: 1024px) {
        .main-content {
          grid-template-columns: 1fr 250px;
          gap: 20px;
        }
      }
      
      @media (max-width: 768px) {
        .main-content {
          grid-template-columns: 1fr;
          gap: 20px;
        }
        
        .sidebar {
          order: -1; /* Move sidebar above main content on mobile */
        }
      }
      
      /* Optimized Swap Container with Better Visibility */
      /* Enhanced Swap Container with Premium Polish */
      .swap-container {
        background: 
          linear-gradient(145deg, rgba(0, 0, 0, 0.98), rgba(15, 15, 15, 0.95)),
          radial-gradient(circle at 20% 80%, rgba(75, 0, 130, 0.18) 0%, transparent 50%),
          radial-gradient(circle at 80% 20%, rgba(139, 0, 139, 0.12) 0%, transparent 50%),
          radial-gradient(circle at 50% 50%, rgba(138, 43, 226, 0.08) 0%, transparent 60%);
        border: 3px solid;
        border-image: linear-gradient(45deg, 
          rgba(75, 0, 130, 0.8), 
          rgba(139, 0, 139, 0.6), 
          rgba(147, 112, 219, 0.7), 
          rgba(75, 0, 130, 0.8)) 1;
        border-radius: 28px;
        padding: 40px;
        box-shadow: 
          0 25px 50px rgba(0, 0, 0, 0.9),
          0 0 40px rgba(75, 0, 130, 0.4),
          0 0 80px rgba(139, 0, 139, 0.2),
          0 0 120px rgba(138, 43, 226, 0.1),
          inset 0 2px 0 rgba(255, 255, 255, 0.12),
          inset 0 -2px 0 rgba(0, 0, 0, 0.3),
          inset 0 0 30px rgba(75, 0, 130, 0.05);
        backdrop-filter: blur(25px);
        position: relative;
        overflow: hidden;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        z-index: 10;
        animation: containerGlow 8s ease-in-out infinite;
      }

      @keyframes containerGlow {
        0%, 100% { 
          box-shadow: 
            0 25px 50px rgba(0, 0, 0, 0.9),
            0 0 40px rgba(75, 0, 130, 0.4),
            0 0 80px rgba(139, 0, 139, 0.2),
            inset 0 2px 0 rgba(255, 255, 255, 0.12);
        }
        50% { 
          box-shadow: 
            0 30px 60px rgba(0, 0, 0, 0.95),
            0 0 50px rgba(75, 0, 130, 0.6),
            0 0 100px rgba(139, 0, 139, 0.3),
            0 0 150px rgba(138, 43, 226, 0.15),
            inset 0 2px 0 rgba(255, 255, 255, 0.15);
        }
      }

      /* Enhanced Hover Effect with Premium Feel */
      .swap-container:hover {
        transform: translateY(-3px) scale(1.01);
        border-image: linear-gradient(45deg, 
          rgba(75, 0, 130, 1), 
          rgba(139, 0, 139, 0.8), 
          rgba(147, 112, 219, 0.9), 
          rgba(75, 0, 130, 1)) 1;
        box-shadow: 
          0 35px 70px rgba(0, 0, 0, 0.95),
          0 0 60px rgba(75, 0, 130, 0.6),
          0 0 120px rgba(139, 0, 139, 0.4),
          0 0 180px rgba(138, 43, 226, 0.2),
          inset 0 2px 0 rgba(255, 255, 255, 0.18),
          inset 0 0 40px rgba(75, 0, 130, 0.08);
        animation-duration: 6s;
      }

      /* Mobile optimization for swap container */
      @media (max-width: 768px) {
        .swap-container {
          padding: 25px;
          border-radius: 20px;
          backdrop-filter: blur(15px);
          background: 
            linear-gradient(145deg, rgba(0, 0, 0, 0.98), rgba(15, 15, 15, 0.95));
          border: 2px solid rgba(75, 0, 130, 0.6);
          box-shadow: 
            0 15px 30px rgba(0, 0, 0, 0.8),
            0 0 25px rgba(75, 0, 130, 0.4);
        }
      }

      @media (max-width: 480px) {
        .swap-container {
          padding: 20px;
          border-radius: 15px;
          backdrop-filter: blur(10px);
          background: rgba(0, 0, 0, 0.98);
          border: 2px solid rgba(75, 0, 130, 0.7);
          box-shadow: 
            0 10px 20px rgba(0, 0, 0, 0.9),
            0 0 20px rgba(75, 0, 130, 0.5);
        }
      }

      .swap-container::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(90deg, 
          transparent, 
          rgba(75, 0, 130, 0.6), 
          rgba(139, 0, 139, 0.8), 
          rgba(138, 43, 226, 0.7), 
          rgba(139, 0, 139, 0.8), 
          rgba(75, 0, 130, 0.6), 
          transparent);
        animation: borderGlow 5s ease-in-out infinite;
      }

      .swap-container::after {
        content: '';
        position: absolute;
        top: -2px;
        left: -2px;
        right: -2px;
        bottom: -2px;
        background: linear-gradient(45deg, 
          rgba(75, 0, 130, 0.1), 
          rgba(139, 0, 139, 0.08), 
          rgba(138, 43, 226, 0.06), 
          rgba(147, 112, 219, 0.08));
        border-radius: 32px;
        z-index: -1;
        animation: outerGlow 8s ease-in-out infinite;
      }

      .swap-container:hover {
        transform: translateY(-5px) scale(1.01);
        box-shadow: 
          0 40px 80px rgba(0, 0, 0, 0.7),
          0 0 60px rgba(75, 0, 130, 0.3),
          0 0 120px rgba(139, 0, 139, 0.2),
          inset 0 1px 0 rgba(255, 255, 255, 0.12);
        border-color: rgba(75, 0, 130, 0.6);
      }

      @keyframes borderGlow {
        0%, 100% { opacity: 0.6; }
        25% { opacity: 0.8; }
        50% { opacity: 1; }
        75% { opacity: 0.9; }
      }

      @keyframes outerGlow {
        0%, 100% { opacity: 0.3; }
        50% { opacity: 0.6; }
      }
      
      .swap-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
      }
      
      .swap-title {
        font-size: 1.8rem;
        font-weight: 800;
        color: #e0e0e0;
        text-shadow: 
          0 0 20px rgba(75, 0, 130, 0.6),
          0 0 30px rgba(139, 0, 139, 0.4);
        position: relative;
        margin-bottom: 5px;
        letter-spacing: 1px;
      }

      .swap-title::before {
        content: '◆';
        position: absolute;
        left: -35px;
        top: 50%;
        transform: translateY(-50%);
        color: rgba(75, 0, 130, 0.8);
        font-size: 1.4rem;
        animation: pulseGem 4s ease-in-out infinite;
        text-shadow: 0 0 15px rgba(75, 0, 130, 0.8);
      }

      .swap-title::after {
        content: '◆';
        position: absolute;
        right: -35px;
        top: 50%;
        transform: translateY(-50%);
        color: rgba(139, 0, 139, 0.8);
        font-size: 1.4rem;
        animation: pulseGem 4s ease-in-out infinite reverse;
        text-shadow: 0 0 15px rgba(139, 0, 139, 0.8);
      }

      @keyframes pulseGem {
        0%, 100% { 
          opacity: 0.4; 
          transform: translateY(-50%) scale(1) rotate(0deg); 
        }
        50% { 
          opacity: 1; 
          transform: translateY(-50%) scale(1.2) rotate(180deg); 
        }
      }
      
      .settings-btn {
        background: 
          linear-gradient(145deg, rgba(0, 0, 0, 0.8), rgba(15, 15, 15, 0.6)),
          linear-gradient(145deg, rgba(75, 0, 130, 0.1), rgba(139, 0, 139, 0.05));
        border: 1px solid rgba(75, 0, 130, 0.3);
        border-radius: 12px;
        padding: 10px 16px;
        cursor: pointer;
        font-size: 1rem;
        color: #e0e0e0;
        transition: all 0.3s ease;
        backdrop-filter: blur(10px);
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      }
      
      .settings-btn:hover {
        background: 
          linear-gradient(145deg, rgba(75, 0, 130, 0.2), rgba(139, 0, 139, 0.1)),
          linear-gradient(145deg, rgba(0, 0, 0, 0.9), rgba(15, 15, 15, 0.7));
        border-color: rgba(75, 0, 130, 0.5);
        transform: translateY(-1px);
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
      }
      
      /* Enhanced Token Input */
      /* Enhanced Token Input Boxes with Premium Polish */
      .token-input {
        background: 
          linear-gradient(145deg, rgba(0, 0, 0, 0.95), rgba(15, 15, 15, 0.85)),
          radial-gradient(circle at 25% 25%, rgba(75, 0, 130, 0.12) 0%, transparent 60%),
          radial-gradient(circle at 75% 75%, rgba(139, 0, 139, 0.08) 0%, transparent 50%);
        border: 2px solid;
        border-image: linear-gradient(135deg, 
          rgba(75, 0, 130, 0.5), 
          rgba(139, 0, 139, 0.3), 
          rgba(147, 112, 219, 0.4), 
          rgba(75, 0, 130, 0.5)) 1;
        border-radius: 24px;
        padding: 32px;
        margin-bottom: 24px;
        position: relative;
        backdrop-filter: blur(25px);
        box-shadow: 
          0 16px 32px rgba(0, 0, 0, 0.5),
          0 0 40px rgba(75, 0, 130, 0.15),
          0 0 80px rgba(139, 0, 139, 0.08),
          inset 0 2px 0 rgba(255, 255, 255, 0.08),
          inset 0 -2px 0 rgba(0, 0, 0, 0.15);
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        overflow: hidden;
        animation: inputGlow 12s ease-in-out infinite;
      }

      @keyframes inputGlow {
        0%, 100% { 
          box-shadow: 
            0 16px 32px rgba(0, 0, 0, 0.5),
            0 0 40px rgba(75, 0, 130, 0.15),
            0 0 80px rgba(139, 0, 139, 0.08),
            inset 0 2px 0 rgba(255, 255, 255, 0.08);
        }
        50% { 
          box-shadow: 
            0 20px 40px rgba(0, 0, 0, 0.6),
            0 0 50px rgba(75, 0, 130, 0.25),
            0 0 100px rgba(139, 0, 139, 0.15),
            0 0 150px rgba(138, 43, 226, 0.1),
            inset 0 2px 0 rgba(255, 255, 255, 0.1);
        }
      }

      .token-input::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 2px;
        background: linear-gradient(90deg, 
          transparent, 
          rgba(75, 0, 130, 0.4), 
          rgba(139, 0, 139, 0.6), 
          rgba(75, 0, 130, 0.4), 
          transparent);
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      .token-input::after {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        background: radial-gradient(circle, rgba(75, 0, 130, 0.1), transparent 70%);
        border-radius: 50%;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        transform: translate(-50%, -50%);
        pointer-events: none;
      }

      .token-input:hover {
        border-color: rgba(75, 0, 130, 0.6);
        transform: translateY(-2px);
        box-shadow: 
          0 20px 40px rgba(0, 0, 0, 0.5),
          0 0 40px rgba(75, 0, 130, 0.2),
          0 0 60px rgba(139, 0, 139, 0.1),
          inset 0 1px 0 rgba(255, 255, 255, 0.08);
      }

      .token-input:hover::before {
        opacity: 1;
      }

      .token-input:hover::after {
        width: 400px;
        height: 400px;
      }

      .token-input:focus-within {
        border-color: rgba(75, 0, 130, 0.8);
        box-shadow: 
          0 20px 40px rgba(0, 0, 0, 0.5),
          0 0 50px rgba(75, 0, 130, 0.4),
          0 0 80px rgba(139, 0, 139, 0.2),
          inset 0 0 20px rgba(75, 0, 130, 0.1);
        animation: inputFocus 2s ease-in-out infinite;
      }

      @keyframes inputFocus {
        0%, 100% { 
          box-shadow: 
            0 20px 40px rgba(0, 0, 0, 0.5),
            0 0 50px rgba(75, 0, 130, 0.4),
            inset 0 0 20px rgba(75, 0, 130, 0.1);
        }
        50% { 
          box-shadow: 
            0 25px 50px rgba(0, 0, 0, 0.6),
            0 0 60px rgba(75, 0, 130, 0.6),
            0 0 90px rgba(139, 0, 139, 0.3),
            inset 0 0 25px rgba(75, 0, 130, 0.15);
        }
      }
      
      .token-input.error {
        border-color: #dc3545;
        box-shadow: 
          0 12px 25px rgba(0, 0, 0, 0.4),
          0 0 25px rgba(220, 53, 69, 0.4),
          0 0 40px rgba(220, 53, 69, 0.2);
        animation: errorPulse 2s ease-in-out infinite;
      }

      @keyframes errorPulse {
        0%, 100% { border-color: #dc3545; }
        50% { border-color: rgba(220, 53, 69, 0.8); }
      }
      
      .token-label {
        font-size: 1rem;
        color: #c0c0c0;
        margin-bottom: 15px;
        display: block;
        font-weight: 600;
        text-shadow: 0 0 8px rgba(75, 0, 130, 0.3);
        letter-spacing: 0.5px;
        position: relative;
      }

      .token-label::before {
        content: '▸';
        position: absolute;
        left: -20px;
        top: 50%;
        transform: translateY(-50%);
        color: rgba(75, 0, 130, 0.6);
        font-size: 0.8rem;
        animation: labelArrow 3s ease-in-out infinite;
      }

      @keyframes labelArrow {
        0%, 100% { opacity: 0.4; transform: translateY(-50%) translateX(0px); }
        50% { opacity: 1; transform: translateY(-50%) translateX(3px); }
      }
      
      .token-input-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 15px;
      }
      
      .token-input-row input {
        background: transparent;
        border: none;
        outline: none;
        font-size: 1.6rem;
        font-weight: 700;
        color: #e0e0e0;
        flex: 1;
        min-width: 0;
        text-shadow: 0 0 10px rgba(75, 0, 130, 0.2);
        transition: all 0.3s ease;
      }

      .token-input-row input::placeholder {
        color: rgba(192, 192, 192, 0.5);
        text-shadow: none;
      }

      .token-input-row input:focus {
        color: #ffffff;
        text-shadow: 0 0 15px rgba(75, 0, 130, 0.4);
      }
      
      .token-select {
        background: 
          linear-gradient(145deg, rgba(75, 0, 130, 0.8), rgba(139, 0, 139, 0.6)),
          linear-gradient(145deg, rgba(0, 123, 255, 0.9), rgba(0, 86, 179, 0.8));
        color: white;
        border: 2px solid rgba(75, 0, 130, 0.4);
        border-radius: 12px;
        padding: 12px 20px;
        font-weight: 700;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        white-space: nowrap;
        flex-shrink: 0;
        min-width: 90px;
        display: flex;
        align-items: center;
        gap: 10px;
        text-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        box-shadow: 
          0 6px 15px rgba(0, 0, 0, 0.3),
          0 0 20px rgba(75, 0, 130, 0.2),
          inset 0 1px 0 rgba(255, 255, 255, 0.2);
        position: relative;
        overflow: hidden;
      }

      .token-select::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
        transition: left 0.5s ease;
      }

      .token-select:hover::before {
        left: 100%;
      }
      
      .token-select:hover {
        background: 
          linear-gradient(145deg, rgba(75, 0, 130, 1), rgba(139, 0, 139, 0.8)),
          linear-gradient(145deg, rgba(0, 123, 255, 1), rgba(0, 86, 179, 0.9));
        border-color: rgba(75, 0, 130, 0.8);
        transform: translateY(-2px) scale(1.05);
        box-shadow: 
          0 10px 25px rgba(0, 0, 0, 0.4),
          0 0 30px rgba(75, 0, 130, 0.4),
          0 0 50px rgba(139, 0, 139, 0.2),
          inset 0 1px 0 rgba(255, 255, 255, 0.3);
        text-shadow: 0 0 15px rgba(0, 0, 0, 0.8);
      }
      
      .token-balance {
        font-size: 0.8rem;
        color: #666;
        margin-top: 5px;
      }
      
      /* Enhanced Swap Arrow */
      .swap-arrow {
        display: flex;
        justify-content: center;
        margin: 20px 0;
        position: relative;
      }

      .swap-arrow::before {
        content: '⟋ ◆ ⟍';
        position: absolute;
        top: -15px;
        left: 50%;
        transform: translateX(-50%);
        font-size: 0.8rem;
        color: rgba(75, 0, 130, 0.4);
        animation: arrowRunes 4s ease-in-out infinite;
      }

      .swap-arrow::after {
        content: '⟍ ◆ ⟋';
        position: absolute;
        bottom: -15px;
        left: 50%;
        transform: translateX(-50%);
        font-size: 0.8rem;
        color: rgba(139, 0, 139, 0.4);
        animation: arrowRunes 4s ease-in-out infinite reverse;
      }

      @keyframes arrowRunes {
        0%, 100% { opacity: 0.3; transform: translateX(-50%) scale(1); }
        50% { opacity: 0.8; transform: translateX(-50%) scale(1.1); }
      }
      
      .swap-icon {
        width: 60px;
        height: 60px;
        background: 
          linear-gradient(145deg, rgba(0, 0, 0, 0.9), rgba(15, 15, 15, 0.7)),
          linear-gradient(145deg, rgba(75, 0, 130, 0.3), rgba(139, 0, 139, 0.2));
        border: 2px solid rgba(75, 0, 130, 0.5);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        font-size: 1.5rem;
        color: #e0e0e0;
        box-shadow: 
          0 8px 20px rgba(0, 0, 0, 0.4),
          0 0 25px rgba(75, 0, 130, 0.3),
          inset 0 1px 0 rgba(255, 255, 255, 0.1);
        position: relative;
        overflow: hidden;
        backdrop-filter: blur(15px);
      }

      .swap-icon::before {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        background: radial-gradient(circle, rgba(75, 0, 130, 0.4), transparent 70%);
        border-radius: 50%;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        transform: translate(-50%, -50%);
      }
      
      .swap-icon:hover {
        transform: rotate(180deg) scale(1.1);
        border-color: rgba(75, 0, 130, 0.8);
        box-shadow: 
          0 15px 35px rgba(0, 0, 0, 0.5),
          0 0 40px rgba(75, 0, 130, 0.5),
          0 0 60px rgba(139, 0, 139, 0.3),
          inset 0 1px 0 rgba(255, 255, 255, 0.2);
        color: #ffffff;
        text-shadow: 0 0 20px rgba(75, 0, 130, 0.8);
      }

      .swap-icon:hover::before {
        width: 100px;
        height: 100px;
      }

      .swap-icon:active {
        transform: rotate(180deg) scale(0.95);
      }
      
      /* Enhanced Swap Details */
      .swap-details {
        background: 
          linear-gradient(145deg, rgba(0, 0, 0, 0.8), rgba(15, 15, 15, 0.6)),
          linear-gradient(145deg, rgba(75, 0, 130, 0.08), rgba(139, 0, 139, 0.04));
        border: 1px solid rgba(75, 0, 130, 0.2);
        border-radius: 16px;
        padding: 20px;
        margin: 25px 0;
        backdrop-filter: blur(15px);
        box-shadow: 
          0 8px 20px rgba(0, 0, 0, 0.3),
          inset 0 1px 0 rgba(255, 255, 255, 0.03);
        transition: all 0.3s ease;
        position: relative;
      }

      .swap-details::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 1px;
        background: linear-gradient(90deg, 
          transparent, 
          rgba(75, 0, 130, 0.4), 
          transparent);
      }

      .swap-details:hover {
        border-color: rgba(75, 0, 130, 0.4);
        box-shadow: 
          0 12px 25px rgba(0, 0, 0, 0.4),
          0 0 20px rgba(75, 0, 130, 0.1),
          inset 0 1px 0 rgba(255, 255, 255, 0.05);
      }
      
      .detail-row {
        display: flex;
        justify-content: space-between;
        margin-bottom: 12px;
        font-size: 1rem;
        transition: all 0.3s ease;
      }
      
      .detail-row:last-child {
        margin-bottom: 0;
        padding-top: 10px;
        border-top: 1px solid rgba(75, 0, 130, 0.1);
      }

      .detail-row:hover {
        transform: translateX(5px);
      }
      
      .detail-label {
        color: #c0c0c0;
        font-weight: 500;
        text-shadow: 0 0 5px rgba(75, 0, 130, 0.2);
        position: relative;
      }

      .detail-label::before {
        content: '▸';
        position: absolute;
        left: -15px;
        top: 50%;
        transform: translateY(-50%);
        color: rgba(75, 0, 130, 0.4);
        font-size: 0.8rem;
        opacity: 0;
        transition: all 0.3s ease;
      }

      .detail-row:hover .detail-label::before {
        opacity: 1;
      }
      
      .detail-value {
        font-weight: 700;
        color: #e0e0e0;
        text-shadow: 0 0 8px rgba(75, 0, 130, 0.3);
      }
      
      .detail-value.positive {
        color: #28a745;
      }
      
      .detail-value.negative {
        color: #dc3545;
      }
      
      /* Enhanced Swap Button */
      .swap-button {
        background: 
          linear-gradient(145deg, rgba(75, 0, 130, 0.9), rgba(139, 0, 139, 0.7)),
          linear-gradient(145deg, rgba(102, 126, 234, 0.8), rgba(118, 75, 162, 0.9));
        color: white;
        border: 2px solid rgba(75, 0, 130, 0.5);
        border-radius: 16px;
        padding: 18px 32px;
        font-size: 1.2rem;
        font-weight: 800;
        cursor: pointer;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        width: 100%;
        position: relative;
        overflow: hidden;
        backdrop-filter: blur(10px);
        box-shadow: 
          0 8px 25px rgba(0, 0, 0, 0.4),
          0 0 30px rgba(75, 0, 130, 0.3),
          inset 0 1px 0 rgba(255, 255, 255, 0.2);
        text-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
        letter-spacing: 1px;
      }

      .swap-button::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, 
          transparent, 
          rgba(255, 255, 255, 0.2), 
          transparent);
        transition: left 0.6s ease;
      }

      .swap-button::after {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        background: radial-gradient(circle, rgba(255, 255, 255, 0.3), transparent 70%);
        border-radius: 50%;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        transform: translate(-50%, -50%);
        pointer-events: none;
      }

      .swap-button:hover::before {
        left: 100%;
      }

      .swap-button:hover::after {
        width: 300px;
        height: 300px;
      }
      
      .swap-button:hover {
        background: 
          linear-gradient(145deg, rgba(75, 0, 130, 1), rgba(139, 0, 139, 0.9)),
          linear-gradient(145deg, rgba(102, 126, 234, 1), rgba(118, 75, 162, 1));
        border-color: rgba(75, 0, 130, 0.8);
        transform: translateY(-4px) scale(1.02);
        box-shadow: 
          0 15px 40px rgba(0, 0, 0, 0.5),
          0 0 50px rgba(75, 0, 130, 0.5),
          0 0 80px rgba(139, 0, 139, 0.3),
          inset 0 1px 0 rgba(255, 255, 255, 0.3);
        text-shadow: 0 0 20px rgba(0, 0, 0, 0.8);
      }
      
      .swap-button:disabled {
        opacity: 0.4;
        cursor: not-allowed;
        transform: none;
        filter: grayscale(0.8);
      }

      .swap-button:disabled:hover {
        transform: none;
        box-shadow: 
          0 8px 25px rgba(0, 0, 0, 0.4),
          0 0 30px rgba(75, 0, 130, 0.3);
      }
      
      .swap-button.loading {
        color: transparent;
        animation: buttonPulse 2s ease-in-out infinite;
      }

      @keyframes buttonPulse {
        0%, 100% { 
          box-shadow: 
            0 8px 25px rgba(0, 0, 0, 0.4),
            0 0 30px rgba(75, 0, 130, 0.3);
        }
        50% { 
          box-shadow: 
            0 12px 35px rgba(0, 0, 0, 0.5),
            0 0 40px rgba(75, 0, 130, 0.5),
            0 0 60px rgba(139, 0, 139, 0.3);
        }
      }
      
      .swap-button.loading::after {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        width: 24px;
        height: 24px;
        margin: -12px 0 0 -12px;
        border: 3px solid transparent;
        border-top: 3px solid white;
        border-right: 3px solid rgba(255, 255, 255, 0.6);
        border-radius: 50%;
        animation: spin 1s linear infinite;
        box-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
      }
      
      /* Enhanced Sidebar */
      .sidebar {
        display: flex;
        flex-direction: column;
        gap: 25px;
      }
      
      /* Enhanced Sidebar Cards with Premium Polish */
      .sidebar-card {
        background: 
          linear-gradient(145deg, rgba(0, 0, 0, 0.95), rgba(15, 15, 15, 0.9)),
          radial-gradient(circle at 30% 30%, rgba(75, 0, 130, 0.12) 0%, transparent 60%),
          radial-gradient(circle at 70% 70%, rgba(139, 0, 139, 0.08) 0%, transparent 50%);
        border: 2px solid;
        border-image: linear-gradient(135deg, 
          rgba(75, 0, 130, 0.6), 
          rgba(139, 0, 139, 0.4), 
          rgba(147, 112, 219, 0.5), 
          rgba(75, 0, 130, 0.6)) 1;
        border-radius: 28px;
        padding: 32px;
        box-shadow: 
          0 25px 50px rgba(0, 0, 0, 0.6),
          0 0 40px rgba(75, 0, 130, 0.2),
          0 0 80px rgba(139, 0, 139, 0.12),
          0 0 120px rgba(138, 43, 226, 0.08),
          inset 0 2px 0 rgba(255, 255, 255, 0.1),
          inset 0 -1px 0 rgba(0, 0, 0, 0.2);
        backdrop-filter: blur(30px);
        position: relative;
        overflow: hidden;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        animation: cardBreathing 10s ease-in-out infinite;
      }

      @keyframes cardBreathing {
        0%, 100% { 
          box-shadow: 
            0 25px 50px rgba(0, 0, 0, 0.6),
            0 0 40px rgba(75, 0, 130, 0.2),
            0 0 80px rgba(139, 0, 139, 0.12),
            inset 0 2px 0 rgba(255, 255, 255, 0.1);
        }
        50% { 
          box-shadow: 
            0 30px 60px rgba(0, 0, 0, 0.7),
            0 0 50px rgba(75, 0, 130, 0.3),
            0 0 100px rgba(139, 0, 139, 0.18),
            0 0 150px rgba(138, 43, 226, 0.12),
            inset 0 2px 0 rgba(255, 255, 255, 0.12);
        }
      }

      .sidebar-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 3px;
        background: linear-gradient(90deg, 
          transparent, 
          rgba(75, 0, 130, 0.6), 
          rgba(139, 0, 139, 0.8), 
          rgba(75, 0, 130, 0.6), 
          transparent);
        animation: cardBorderGlow 6s ease-in-out infinite;
      }

      .sidebar-card::after {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        background: radial-gradient(circle, rgba(75, 0, 130, 0.1), transparent 70%);
        border-radius: 50%;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        transform: translate(-50%, -50%);
        pointer-events: none;
      }

      @keyframes cardBorderGlow {
        0%, 100% { opacity: 0.4; }
        50% { opacity: 1; }
      }

      .sidebar-card:hover {
        transform: translateY(-5px) scale(1.02);
        border-color: rgba(75, 0, 130, 0.5);
        box-shadow: 
          0 30px 60px rgba(0, 0, 0, 0.6),
          0 0 50px rgba(75, 0, 130, 0.25),
          0 0 80px rgba(139, 0, 139, 0.15),
          inset 0 1px 0 rgba(255, 255, 255, 0.12);
      }

      .sidebar-card:hover::after {
        width: 300px;
        height: 300px;
      }

      .sidebar-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 2px;
        background: linear-gradient(90deg, transparent, rgba(75, 0, 130, 0.5), transparent);
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      .sidebar-card:hover::before {
        opacity: 1;
      }

      .sidebar-card:hover {
        transform: translateY(-2px);
        box-shadow: 
          0 20px 40px rgba(0, 0, 0, 0.5),
          0 0 30px rgba(75, 0, 130, 0.2),
          inset 0 1px 0 rgba(255, 255, 255, 0.1);
        border-color: rgba(75, 0, 130, 0.4);
      }
      
      .sidebar-card h3 {
        margin-bottom: 20px;
        color: #e0e0e0;
        font-size: 1.3rem;
        font-weight: 600;
        text-shadow: 0 0 10px rgba(75, 0, 130, 0.3);
        position: relative;
        padding-bottom: 10px;
      }

      .sidebar-card h3::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        width: 40px;
        height: 2px;
        background: linear-gradient(90deg, rgba(75, 0, 130, 0.8), transparent);
      }
      
      /* Wallet Card */
      .wallet-status {
        text-align: center;
        padding: 20px;
      }
      
      .wallet-connect-btn {
        background: 
          linear-gradient(145deg, rgba(75, 0, 130, 0.8), rgba(139, 0, 139, 0.6)),
          linear-gradient(145deg, rgba(0, 0, 0, 0.9), rgba(20, 20, 20, 0.8));
        color: #ffffff;
        border: 1px solid rgba(75, 0, 130, 0.4);
        border-radius: 12px;
        padding: 14px 28px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        margin: 8px;
        display: inline-flex;
        align-items: center;
        gap: 10px;
        text-shadow: 0 0 10px rgba(75, 0, 130, 0.5);
        box-shadow: 
          0 4px 15px rgba(0, 0, 0, 0.3),
          0 0 20px rgba(75, 0, 130, 0.2);
        position: relative;
        overflow: hidden;
      }

      .wallet-connect-btn::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
        transition: left 0.5s ease;
      }

      .wallet-connect-btn:hover::before {
        left: 100%;
      }
      
      .wallet-connect-btn:hover {
        transform: translateY(-3px);
        box-shadow: 
          0 8px 25px rgba(0, 0, 0, 0.4),
          0 0 30px rgba(75, 0, 130, 0.4);
        border-color: rgba(75, 0, 130, 0.6);
        text-shadow: 0 0 15px rgba(75, 0, 130, 0.8);
      }

      .wallet-connect-btn:active {
        transform: translateY(-1px);
      }
      
      .wallet-info {
        display: none;
        text-align: left;
      }
      
      .wallet-address {
        font-family: 'Courier New', monospace;
        font-size: 0.9rem;
        background: 
          linear-gradient(145deg, rgba(0, 0, 0, 0.8), rgba(15, 15, 15, 0.6)),
          linear-gradient(145deg, rgba(75, 0, 130, 0.1), rgba(139, 0, 139, 0.05));
        color: #c0c0c0;
        padding: 12px 16px;
        border-radius: 10px;
        margin: 15px 0;
        word-break: break-all;
        border: 1px solid rgba(75, 0, 130, 0.2);
        box-shadow: 
          inset 0 2px 4px rgba(0, 0, 0, 0.3),
          0 0 10px rgba(75, 0, 130, 0.1);
        text-shadow: 0 0 5px rgba(75, 0, 130, 0.3);
        position: relative;
      }

      .wallet-address::before {
        content: '◆';
        position: absolute;
        left: -5px;
        top: 50%;
        transform: translateY(-50%);
        color: rgba(75, 0, 130, 0.6);
        font-size: 0.8rem;
      }
      
      .balance-item {
        display: flex;
        justify-content: space-between;
        margin: 8px 0;
        padding: 8px;
        background: #f8f9fa;
        border-radius: 6px;
      }
      
      /* Enhanced Market Stats with Premium Polish */
      .stats-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 12px;
      }
      
      .stat-item {
        text-align: center;
        padding: 20px 16px;
        background: 
          linear-gradient(145deg, rgba(0, 0, 0, 0.88), rgba(15, 15, 15, 0.82)),
          radial-gradient(circle at 30% 30%, rgba(75, 0, 130, 0.12) 0%, transparent 50%),
          radial-gradient(circle at 70% 70%, rgba(139, 0, 139, 0.08) 0%, transparent 40%);
        border: 2px solid;
        border-image: linear-gradient(135deg, 
          rgba(75, 0, 130, 0.35), 
          rgba(139, 0, 139, 0.25), 
          rgba(147, 112, 219, 0.3), 
          rgba(75, 0, 130, 0.35)) 1;
        border-radius: 16px;
        position: relative;
        overflow: hidden;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: 
          0 8px 20px rgba(0, 0, 0, 0.3),
          0 0 15px rgba(75, 0, 130, 0.08),
          0 0 30px rgba(139, 0, 139, 0.04),
          inset 0 1px 0 rgba(255, 255, 255, 0.06);
        backdrop-filter: blur(20px);
        animation: statItemGlow 10s ease-in-out infinite;
      }

      @keyframes statItemGlow {
        0%, 100% { 
          box-shadow: 
            0 8px 20px rgba(0, 0, 0, 0.3),
            0 0 15px rgba(75, 0, 130, 0.08),
            0 0 30px rgba(139, 0, 139, 0.04),
            inset 0 1px 0 rgba(255, 255, 255, 0.06);
        }
        50% { 
          box-shadow: 
            0 12px 24px rgba(0, 0, 0, 0.4),
            0 0 20px rgba(75, 0, 130, 0.15),
            0 0 40px rgba(139, 0, 139, 0.08),
            inset 0 1px 0 rgba(255, 255, 255, 0.08);
        }
      }
      
      .stat-item:hover {
        transform: translateY(-2px) scale(1.02);
        border-image: linear-gradient(135deg, 
          rgba(75, 0, 130, 0.6), 
          rgba(139, 0, 139, 0.4), 
          rgba(147, 112, 219, 0.5), 
          rgba(75, 0, 130, 0.6)) 1;
        box-shadow: 
          0 15px 30px rgba(0, 0, 0, 0.4),
          0 0 25px rgba(75, 0, 130, 0.2),
          0 0 50px rgba(139, 0, 139, 0.12),
          inset 0 1px 0 rgba(255, 255, 255, 0.1);
      }
      
      .stat-value {
        font-size: 1.4rem;
        font-weight: 700;
        color: #e0e0e0;
        margin-bottom: 6px;
        text-shadow: 
          0 0 10px rgba(75, 0, 130, 0.4),
          0 2px 4px rgba(0, 0, 0, 0.3);
        background: linear-gradient(135deg, #e0e0e0, #c0c0c0);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }
      
      .stat-label {
        font-size: 0.85rem;
        color: #a0a0a0;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        font-weight: 500;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
      }
      
      /* Enhanced Recent Trades with Premium Polish */
      .trade-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 16px 18px;
        margin: 10px 0;
        background: 
          linear-gradient(145deg, rgba(0, 0, 0, 0.85), rgba(20, 20, 20, 0.8)),
          radial-gradient(circle at 25% 25%, rgba(75, 0, 130, 0.1) 0%, transparent 45%),
          radial-gradient(circle at 75% 75%, rgba(139, 0, 139, 0.06) 0%, transparent 35%);
        border: 1.5px solid;
        border-image: linear-gradient(135deg, 
          rgba(75, 0, 130, 0.3), 
          rgba(139, 0, 139, 0.2), 
          rgba(147, 112, 219, 0.25), 
          rgba(75, 0, 130, 0.3)) 1;
        border-radius: 14px;
        font-size: 0.95rem;
        position: relative;
        overflow: hidden;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: 
          0 6px 16px rgba(0, 0, 0, 0.25),
          0 0 12px rgba(75, 0, 130, 0.06),
          0 0 24px rgba(139, 0, 139, 0.03),
          inset 0 1px 0 rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(15px);
        animation: tradeItemPulse 12s ease-in-out infinite;
      }

      @keyframes tradeItemPulse {
        0%, 100% { 
          box-shadow: 
            0 6px 16px rgba(0, 0, 0, 0.25),
            0 0 12px rgba(75, 0, 130, 0.06),
            0 0 24px rgba(139, 0, 139, 0.03),
            inset 0 1px 0 rgba(255, 255, 255, 0.05);
        }
        50% { 
          box-shadow: 
            0 8px 20px rgba(0, 0, 0, 0.3),
            0 0 16px rgba(75, 0, 130, 0.12),
            0 0 32px rgba(139, 0, 139, 0.06),
            inset 0 1px 0 rgba(255, 255, 255, 0.07);
        }
      }
      
      .trade-item:hover {
        transform: translateY(-2px) scale(1.01);
        border-image: linear-gradient(135deg, 
          rgba(75, 0, 130, 0.5), 
          rgba(139, 0, 139, 0.35), 
          rgba(147, 112, 219, 0.4), 
          rgba(75, 0, 130, 0.5)) 1;
        box-shadow: 
          0 12px 24px rgba(0, 0, 0, 0.35),
          0 0 20px rgba(75, 0, 130, 0.15),
          0 0 40px rgba(139, 0, 139, 0.08),
          inset 0 1px 0 rgba(255, 255, 255, 0.08);
      }
      
      .trade-pair {
        font-weight: 700;
        color: #e0e0e0;
        text-shadow: 
          0 0 8px rgba(75, 0, 130, 0.3),
          0 1px 2px rgba(0, 0, 0, 0.4);
        background: linear-gradient(135deg, #e0e0e0, #c8c8c8);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }
      
      .trade-amount {
        color: #b8b8b8;
        font-weight: 500;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
      }
      
      .trade-time {
        color: #999;
        font-size: 0.82rem;
        font-weight: 500;
        text-shadow: 0 1px 1px rgba(0, 0, 0, 0.3);
      }
      
      /* Enhanced Pool Interface with Premium Polish */
      .pool-interface {
        display: none;
      }
      
      .pool-stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
        gap: 18px;
        margin-bottom: 25px;
      }
      
      .pool-stat {
        background: 
          linear-gradient(145deg, rgba(0, 0, 0, 0.9), rgba(15, 15, 15, 0.85)),
          radial-gradient(circle at 30% 30%, rgba(75, 0, 130, 0.12) 0%, transparent 50%),
          radial-gradient(circle at 70% 70%, rgba(139, 0, 139, 0.08) 0%, transparent 40%);
        border: 2px solid;
        border-image: linear-gradient(135deg, 
          rgba(75, 0, 130, 0.4), 
          rgba(139, 0, 139, 0.3), 
          rgba(147, 112, 219, 0.35), 
          rgba(75, 0, 130, 0.4)) 1;
        padding: 20px 18px;
        border-radius: 18px;
        text-align: center;
        position: relative;
        overflow: hidden;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: 
          0 10px 25px rgba(0, 0, 0, 0.35),
          0 0 18px rgba(75, 0, 130, 0.1),
          0 0 35px rgba(139, 0, 139, 0.05),
          inset 0 1px 0 rgba(255, 255, 255, 0.06);
        backdrop-filter: blur(22px);
        animation: poolStatGlow 14s ease-in-out infinite;
      }

      @keyframes poolStatGlow {
        0%, 100% { 
          box-shadow: 
            0 10px 25px rgba(0, 0, 0, 0.35),
            0 0 18px rgba(75, 0, 130, 0.1),
            0 0 35px rgba(139, 0, 139, 0.05),
            inset 0 1px 0 rgba(255, 255, 255, 0.06);
        }
        50% { 
          box-shadow: 
            0 15px 30px rgba(0, 0, 0, 0.45),
            0 0 25px rgba(75, 0, 130, 0.18),
            0 0 50px rgba(139, 0, 139, 0.1),
            inset 0 1px 0 rgba(255, 255, 255, 0.08);
        }
      }
      
      .pool-stat:hover {
        transform: translateY(-3px) scale(1.03);
        border-image: linear-gradient(135deg, 
          rgba(75, 0, 130, 0.7), 
          rgba(139, 0, 139, 0.5), 
          rgba(147, 112, 219, 0.6), 
          rgba(75, 0, 130, 0.7)) 1;
        box-shadow: 
          0 18px 35px rgba(0, 0, 0, 0.45),
          0 0 30px rgba(75, 0, 130, 0.25),
          0 0 60px rgba(139, 0, 139, 0.15),
          inset 0 1px 0 rgba(255, 255, 255, 0.1);
      }
      
      .pool-stat-value {
        font-size: 1.3rem;
        font-weight: 700;
        color: #e0e0e0;
        margin-bottom: 8px;
        text-shadow: 
          0 0 12px rgba(75, 0, 130, 0.4),
          0 2px 4px rgba(0, 0, 0, 0.4);
        background: linear-gradient(135deg, #e0e0e0, #c0c0c0);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }
      
      .pool-stat-label {
        font-size: 0.9rem;
        color: #a8a8a8;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        font-weight: 600;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.4);
      }
      
      /* Admin Interface */
      .admin-interface {
        display: none;
      }
      
      .admin-controls {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin-bottom: 20px;
      }
      
      /* Enhanced Admin Cards with Premium Polish */
      .admin-card {
        background: 
          linear-gradient(145deg, rgba(0, 0, 0, 0.92), rgba(15, 15, 15, 0.85)),
          radial-gradient(circle at 20% 20%, rgba(75, 0, 130, 0.1) 0%, transparent 60%),
          radial-gradient(circle at 80% 80%, rgba(139, 0, 139, 0.08) 0%, transparent 50%);
        border: 2px solid;
        border-image: linear-gradient(135deg, 
          rgba(75, 0, 130, 0.4), 
          rgba(139, 0, 139, 0.3), 
          rgba(147, 112, 219, 0.35), 
          rgba(75, 0, 130, 0.4)) 1;
        border-radius: 20px;
        padding: 25px;
        text-align: center;
        box-shadow: 
          0 15px 30px rgba(0, 0, 0, 0.4),
          0 0 25px rgba(75, 0, 130, 0.1),
          0 0 50px rgba(139, 0, 139, 0.06),
          inset 0 1px 0 rgba(255, 255, 255, 0.08);
        backdrop-filter: blur(20px);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        overflow: hidden;
      }
      
      .admin-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 2px;
        background: linear-gradient(90deg, 
          transparent, 
          rgba(75, 0, 130, 0.5), 
          rgba(139, 0, 139, 0.7), 
          rgba(75, 0, 130, 0.5), 
          transparent);
        animation: adminCardGlow 8s ease-in-out infinite;
      }

      @keyframes adminCardGlow {
        0%, 100% { opacity: 0.3; }
        50% { opacity: 1; }
      }
      
      .admin-card:hover {
        transform: translateY(-3px);
        border-image: linear-gradient(135deg, 
          rgba(75, 0, 130, 0.7), 
          rgba(139, 0, 139, 0.5), 
          rgba(147, 112, 219, 0.6), 
          rgba(75, 0, 130, 0.7)) 1;
        box-shadow: 
          0 20px 40px rgba(0, 0, 0, 0.5),
          0 0 35px rgba(75, 0, 130, 0.2),
          0 0 70px rgba(139, 0, 139, 0.12),
          inset 0 1px 0 rgba(255, 255, 255, 0.12);
      }
      
      .admin-card h4 {
        margin-bottom: 15px;
        color: #e0e0e0;
        text-shadow: 0 0 10px rgba(75, 0, 130, 0.4);
        font-weight: 600;
      }
      
      .admin-btn {
        background: #007bff;
        color: white;
        border: none;
        border-radius: 8px;
        padding: 10px 20px;
        cursor: pointer;
        font-weight: 600;
        transition: all 0.2s;
        width: 100%;
      }
      
      .admin-btn:hover {
        background: #0056b3;
        transform: translateY(-1px);
      }
      
      .admin-btn.danger {
        background: #dc3545;
      }
      
      .admin-btn.danger:hover {
        background: #c82333;
      }
      
      /* Enhanced Trading History Styles with Premium Polish */
      .trade-entry {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 14px 16px;
        margin: 10px 0;
        background: 
          linear-gradient(145deg, rgba(0, 0, 0, 0.85), rgba(20, 20, 20, 0.8)),
          radial-gradient(circle at 25% 25%, rgba(75, 0, 130, 0.08) 0%, transparent 45%),
          radial-gradient(circle at 75% 75%, rgba(139, 0, 139, 0.05) 0%, transparent 35%);
        border: 1.5px solid;
        border-image: linear-gradient(135deg, 
          rgba(75, 0, 130, 0.3), 
          rgba(139, 0, 139, 0.2), 
          rgba(147, 112, 219, 0.25), 
          rgba(75, 0, 130, 0.3)) 1;
        border-radius: 12px;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        overflow: hidden;
        box-shadow: 
          0 6px 16px rgba(0, 0, 0, 0.25),
          0 0 12px rgba(75, 0, 130, 0.06),
          0 0 24px rgba(139, 0, 139, 0.03),
          inset 0 1px 0 rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(15px);
        animation: tradeEntryGlow 14s ease-in-out infinite;
      }

      @keyframes tradeEntryGlow {
        0%, 100% { 
          box-shadow: 
            0 6px 16px rgba(0, 0, 0, 0.25),
            0 0 12px rgba(75, 0, 130, 0.06),
            0 0 24px rgba(139, 0, 139, 0.03),
            inset 0 1px 0 rgba(255, 255, 255, 0.05);
        }
        50% { 
          box-shadow: 
            0 8px 20px rgba(0, 0, 0, 0.3),
            0 0 16px rgba(75, 0, 130, 0.12),
            0 0 32px rgba(139, 0, 139, 0.06),
            inset 0 1px 0 rgba(255, 255, 255, 0.07);
        }
      }
      
      .trade-entry:hover {
        transform: translateY(-2px) scale(1.01);
        border-image: linear-gradient(135deg, 
          rgba(75, 0, 130, 0.5), 
          rgba(139, 0, 139, 0.35), 
          rgba(147, 112, 219, 0.4), 
          rgba(75, 0, 130, 0.5)) 1;
        box-shadow: 
          0 12px 24px rgba(0, 0, 0, 0.35),
          0 0 20px rgba(75, 0, 130, 0.15),
          0 0 40px rgba(139, 0, 139, 0.08),
          inset 0 1px 0 rgba(255, 255, 255, 0.08);
      }
      
      .trade-pair {
        font-weight: 700;
        color: #e0e0e0;
        text-shadow: 
          0 0 8px rgba(75, 0, 130, 0.3),
          0 1px 2px rgba(0, 0, 0, 0.4);
        background: linear-gradient(135deg, #e0e0e0, #c8c8c8);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }
      
      .trade-amount {
        color: #b8b8b8;
        font-weight: 600;
        text-shadow: 
          0 0 6px rgba(75, 0, 130, 0.2),
          0 1px 2px rgba(0, 0, 0, 0.3);
      }
      
      .trade-time {
        color: #a0a0a0;
        font-size: 0.9rem;
        font-weight: 500;
        text-shadow: 0 1px 1px rgba(0, 0, 0, 0.3);
      }
      
      .portfolio-stats {
        display: flex;
        flex-direction: column;
        gap: 20px;
      }
      
      /* Enhanced Mobile Responsive Design */
      @media (max-width: 1200px) {
        .main-content {
          grid-template-columns: 1fr 280px;
          gap: 25px;
        }
        
        .header h1 {
          font-size: 2.8rem;
        }
      }

      @media (max-width: 992px) {
        .main-content {
          grid-template-columns: 1fr 250px;
          gap: 20px;
        }
        
        .swap-container {
          padding: 30px;
        }
        
        .header h1 {
          font-size: 2.5rem;
        }
      }

      @media (max-width: 768px) {
        .main-content {
          grid-template-columns: 1fr;
          gap: 20px;
        }
        
        .sidebar {
          order: -1;
        }
        
        .header h1 {
          font-size: 2.2rem;
        }
        
        .header h1::before,
        .header h1::after {
          display: none; /* Hide moon symbols on mobile */
        }
        
        .navigation {
          flex-direction: row;
          flex-wrap: wrap;
          justify-content: center;
          gap: 10px;
        }
        
        .nav-button {
          min-width: 120px;
          padding: 12px 20px;
          font-size: 0.9rem;
        }
        
        .token-input-row {
          flex-direction: column;
          align-items: stretch;
          gap: 15px;
        }
        
        .token-input-row input {
          text-align: center;
          padding: 15px;
          background: rgba(255, 255, 255, 0.1);
          border: 2px solid rgba(75, 0, 130, 0.3);
          border-radius: 12px;
          color: #fff;
          font-size: 1.2rem;
        }
        
        .token-select {
          width: 100%;
          justify-content: center;
          padding: 15px 20px;
        }
        
        /* Enhanced Cult Wars Mobile Optimization */
        .cult-wars-interface {
          padding: 25px 20px;
          margin-bottom: 20px;
          border-radius: 20px;
        }
        
        .cult-wars-interface h3 {
          font-size: 1.6rem !important;
          margin-bottom: 20px !important;
          line-height: 1.2;
        }
        
        .battle-arena {
          grid-template-columns: 1fr;
          gap: 20px;
          padding: 20px 15px;
        }
        
        .cult-faction {
          padding: 25px 20px;
          margin-bottom: 15px;
        }
        
        .faction-icon {
          font-size: 2.8rem;
          margin-bottom: 12px;
        }
        
        .faction-name {
          font-size: 1.3rem;
          margin-bottom: 12px;
        }
        
        .faction-power,
        .faction-members {
          font-size: 1.05rem;
          margin-bottom: 12px;
        }
        
        .faction-join-btn {
          padding: 14px 28px;
          font-size: 0.95rem;
          min-height: 48px;
          width: 100%;
          max-width: 200px;
        }
        
        .battle-vs {
          order: 2;
          font-size: 2.2rem;
          margin: 15px 0;
        }
        
        .battle-progress {
          padding: 20px 15px;
          margin-bottom: 20px;
        }
        
        .progress-header {
          flex-direction: column;
          gap: 10px;
          text-align: center;
        }
        
        .battle-timer {
          font-size: 1.1rem;
        }
        
        .battle-reward {
          font-size: 0.95rem;
        }
        
        .war-stats {
          grid-template-columns: repeat(2, 1fr);
          gap: 12px;
        }
        
        .war-stat {
          padding: 18px 15px;
        }
        
        .war-stat-value {
          font-size: 1.6rem;
          margin-bottom: 8px;
        }
        
        .war-stat-label {
          font-size: 0.85rem;
        }
        
        .your-contribution {
          padding: 20px 15px;
          margin-top: 20px;
          background: rgba(0, 0, 0, 0.7);
          border-radius: 15px;
          border: 1px solid rgba(255, 20, 147, 0.3);
        }
        
        .your-contribution h5 {
          font-size: 1.2rem;
          margin-bottom: 15px;
          text-align: center;
          color: #ff69b4;
          text-shadow: 0 0 15px rgba(255, 20, 147, 0.6);
        }
        
        .contribution-stats {
          display: grid;
          gap: 12px;
          margin-bottom: 20px;
        }
        
        .contrib-stat {
          display: flex;
          justify-content: space-between;
          padding: 12px 15px;
          background: rgba(255, 255, 255, 0.05);
          border-radius: 8px;
          font-size: 0.95rem;
          border: 1px solid rgba(255, 20, 147, 0.2);
        }
        
        .contrib-label {
          color: #ccc;
          font-weight: 500;
        }
        
        .contrib-value {
          color: #ff69b4;
          font-weight: 700;
          text-shadow: 0 0 10px rgba(255, 20, 147, 0.5);
        }
        
        .rewards-grid {
          display: grid;
          grid-template-columns: 1fr;
          gap: 12px;
          margin-top: 15px;
        }
        
        .reward-item {
          display: flex;
          align-items: center;
          gap: 12px;
          padding: 15px;
          background: rgba(255, 255, 255, 0.08);
          border-radius: 10px;
          border: 1px solid rgba(255, 20, 147, 0.2);
          transition: all 0.3s ease;
        }
        
        .reward-item:hover {
          background: rgba(255, 255, 255, 0.12);
          border-color: rgba(255, 20, 147, 0.4);
          transform: translateY(-2px);
        }
        
        .reward-icon {
          font-size: 1.5rem;
          text-shadow: 0 0 10px rgba(255, 20, 147, 0.6);
        }
        
        .reward-text {
          font-size: 0.9rem;
          color: #fff;
          font-weight: 500;
        }
      }
      
      @media (max-width: 480px) {
        .app-container {
          padding: 15px;
        }
        
        .header h1 {
          font-size: 1.8rem;
        }
        
        .header p {
          font-size: 1rem;
        }
        
        .navigation {
          gap: 8px;
        }
        
        .nav-button {
          min-width: 100px;
          padding: 10px 16px;
          font-size: 0.8rem;
        }
        
        .swap-container {
          padding: 20px;
          border-radius: 15px;
        }
        
        .sidebar-card {
          padding: 20px;
          border-radius: 15px;
        }
        
        /* Enhanced Small Screen Cult Wars Optimization */
        .cult-wars-interface {
          padding: 20px 15px;
          border-radius: 15px;
        }
        
        .cult-wars-interface h3 {
          font-size: 1.4rem !important;
          margin-bottom: 18px !important;
        }
        
        .battle-arena {
          padding: 15px 10px;
          gap: 15px;
        }
        
        .cult-faction {
          padding: 20px 15px;
        }
        
        .faction-icon {
          font-size: 2.5rem;
        }
        
        .faction-name {
          font-size: 1.2rem;
        }
        
        .faction-power,
        .faction-members {
          font-size: 1rem;
        }
        
        .faction-join-btn {
          padding: 12px 20px;
          font-size: 0.9rem;
          min-height: 44px;
        }
        
        .battle-vs {
          font-size: 2rem;
        }
        
        .progress-header {
          gap: 8px;
        }
        
        .battle-timer {
          font-size: 1rem;
        }
        
        .battle-reward {
          font-size: 0.9rem;
        }
        
        .war-stats {
          grid-template-columns: 1fr;
          gap: 10px;
        }
        
        .war-stat {
          padding: 15px 12px;
        }
        
        .war-stat-value {
          font-size: 1.4rem;
        }
        
        .war-stat-label {
          font-size: 0.8rem;
        }
        
        .your-contribution {
          padding: 18px 12px;
          margin-top: 18px;
        }
        
        .your-contribution h5 {
          font-size: 1.1rem;
          margin-bottom: 12px;
        }
        
        .contribution-stats {
          gap: 10px;
          margin-bottom: 15px;
        }
        
        .contrib-stat {
          padding: 10px 12px;
          font-size: 0.9rem;
        }
        
        .rewards-grid {
          gap: 10px;
        }
        
        .reward-item {
          padding: 12px;
          gap: 10px;
        }
        
        .reward-icon {
          font-size: 1.3rem;
        }
        
        /* Ensure minimum readable font sizes on mobile */
        .reward-text {
          font-size: 0.85rem;
          min-font-size: 14px;
        }
        
        .contrib-stat {
          font-size: 0.9rem;
          min-font-size: 14px;
        }
        
        .your-contribution h5 {
          font-size: 1.1rem;
          min-font-size: 16px;
        }
        
        /* Improve touch targets for very small screens */
        .faction-join-btn {
          min-height: 48px;
          padding: 14px 20px;
          font-size: 0.9rem;
          font-weight: 700;
          letter-spacing: 0.5px;
        }
        
        /* Better spacing for readability */
        .cult-wars-interface h3 {
          line-height: 1.3;
          word-spacing: 2px;
        }
        
        .battle-timer,
        .battle-reward {
          line-height: 1.4;
        }
        
        /* Stack header elements on very small screens */
        .header-top {
          flex-direction: column;
          gap: 15px;
        }
        
        .xp-rank-bar {
          min-width: 100%;
        }
      }

      /* Landscape Mobile Optimization for Cult Wars */
      @media (max-width: 768px) and (orientation: landscape) {
        .cult-wars-interface {
          padding: 20px;
        }
        
        .cult-wars-interface h3 {
          font-size: 1.5rem !important;
          margin-bottom: 15px !important;
        }
        
        .battle-arena {
          grid-template-columns: 1fr 60px 1fr;
          gap: 15px;
          padding: 15px;
        }
        
        .battle-vs {
          order: 0;
          font-size: 1.8rem;
        }
        
        .war-stats {
          grid-template-columns: repeat(4, 1fr);
          gap: 10px;
        }
        
        .war-stat {
          padding: 12px 8px;
        }
        
        .war-stat-value {
          font-size: 1.3rem;
        }
        
        .war-stat-label {
          font-size: 0.75rem;
        }
        
        .your-contribution {
          padding: 15px;
        }
        
        .contrib-stat {
          padding: 8px 12px;
          font-size: 0.9rem;
        }
        
        .rewards-grid {
          grid-template-columns: repeat(3, 1fr);
          gap: 8px;
        }
        
        .reward-item {
          padding: 10px 8px;
          gap: 6px;
        }
      }

      /* Extra Small Mobile Devices - Enhanced Touch Optimization */
      @media (max-width: 360px) {
        .cult-wars-interface {
          padding: 15px 10px;
          margin-bottom: 15px;
        }
        
        .cult-wars-interface h3 {
          font-size: 1.2rem !important;
          margin-bottom: 15px !important;
        }
        
        .battle-arena {
          padding: 12px 8px;
          gap: 12px;
        }
        
        .cult-faction {
          padding: 18px 12px;
        }
        
        .faction-icon {
          font-size: 2.2rem;
        }
        
        .faction-name {
          font-size: 1.1rem;
        }
        
        .faction-power,
        .faction-members {
          font-size: 0.95rem;
          margin-bottom: 10px;
        }
        
        .faction-join-btn {
          padding: 10px 16px;
          font-size: 0.85rem;
          min-height: 42px;
        }
        
        .battle-vs {
          font-size: 1.8rem;
          margin: 10px 0;
        }
        
        .battle-progress {
          padding: 15px 10px;
        }
        
        .battle-timer,
        .battle-reward {
          font-size: 0.85rem;
        }
        
        .war-stat {
          padding: 12px 8px;
        }
        
        .war-stat-value {
          font-size: 1.2rem;
        }
        
        .war-stat-label {
          font-size: 0.75rem;
        }
        
        .your-contribution {
          padding: 15px 10px;
        }
        
        .your-contribution h5 {
          font-size: 1rem;
        }
        
        .contrib-stat {
          padding: 8px 10px;
          font-size: 0.85rem;
        }
        
        .reward-item {
          padding: 10px;
          gap: 8px;
          flex-direction: column;
          text-align: center;
        }
        
        .reward-icon {
          font-size: 1.2rem;
        }
        
        .reward-text {
          font-size: 0.8rem;
        }
      }

      /* Mobile Chrome Desktop Mode Optimization */
      @media (max-width: 768px) and (min-height: 600px) {
        .main-content {
          grid-template-columns: 1fr;
          max-width: 600px;
          margin: 0 auto;
        }
        
        .swap-container {
          max-width: 100%;
        }
      }

      /* Landscape mobile optimization */
      @media (max-height: 500px) and (orientation: landscape) {
        .header {
          margin-bottom: 20px;
          padding: 10px 0;
        }
        
        .header h1 {
          font-size: 1.8rem;
          margin-bottom: 5px;
        }
        
        .navigation {
          margin-bottom: 20px;
        }
        
        .floating-buttons {
          bottom: 15px;
          right: 15px;
        }
        
        .app-container {
          padding: 15px;
        }
        
        .sidebar-card {
          padding: 15px;
        }
      }
      
      /* --- Gaming-Tier Visual Effects --- */
      :root {
        --theme-cult-bg: #18122b;
        --theme-cult-primary: #ff1493;
        --theme-cult-accent: #8e44ad;
        --theme-cult-fog: #fff0fa44;
        --theme-cyber-bg: #0a0f1a;
        --theme-cyber-primary: #00fff7;
        --theme-cyber-accent: #00ff85;
        --theme-cyber-fog: #00fff744;
        --theme-ember-bg: #1a0a0a;
        --theme-ember-primary: #ff6f00;
        --theme-ember-accent: #ff1744;
        --theme-ember-fog: #ffb30044;
      }
      body.theme-cult {
        background: linear-gradient(120deg, var(--theme-cult-bg) 80%, #2d1436 100%);
        color: var(--theme-cult-primary);
      }
      body.theme-cyber {
        background: linear-gradient(120deg, var(--theme-cyber-bg) 80%, #001f2d 100%);
        color: var(--theme-cyber-primary);
      }
      body.theme-ember {
        background: linear-gradient(120deg, var(--theme-ember-bg) 80%, #2d1a14 100%);
        color: var(--theme-ember-primary);
      }
      /* Runic Borders */
      .rune-corners {
        position: relative;
      }
      .rune-corners::before, .rune-corners::after {
        content: '';
        position: absolute;
        width: 32px; height: 32px;
        border: 2px solid var(--theme-primary, #ff1493);
        border-radius: 8px;
        pointer-events: none;
        opacity: 0.7;
      }
      .rune-corners::before { top: -8px; left: -8px; border-right: none; border-bottom: none; }
      .rune-corners::after { bottom: -8px; right: -8px; border-left: none; border-top: none; }
      /* Fog Layer */
      .fog-layer {
        pointer-events: none;
        position: fixed;
        left: 0; top: 0; width: 100vw; height: 100vh;
        z-index: 1;
        background: radial-gradient(ellipse at 50% 60%, var(--theme-cult-fog, #fff0fa44) 0%, transparent 80%);
        opacity: 0.5;
        transition: background 0.5s;
      }
      body.theme-cyber .fog-layer { background: radial-gradient(ellipse at 50% 60%, var(--theme-cyber-fog, #00fff744) 0%, transparent 80%); }
      body.theme-ember .fog-layer { background: radial-gradient(ellipse at 50% 60%, var(--theme-ember-fog, #ffb30044) 0%, transparent 80%); }
      /* Embers/Particles */
      .ember {
        position: fixed;
        pointer-events: none;
        z-index: 2;
        width: 8px; height: 8px;
        border-radius: 50%;
        background: radial-gradient(circle, #ffb300 0%, #ff1744 100%);
        opacity: 0.7;
        animation: ember-float 6s linear infinite;
      }
      @keyframes ember-float {
        0% { transform: translateY(0) scale(1); opacity: 0.7; }
        80% { opacity: 1; }
        100% { transform: translateY(-120vh) scale(0.5); opacity: 0; }
      }
      /* Enhanced Buttons */
      .theme-btn, .floating-btn, .glow-btn {
        border: 2px solid var(--theme-primary, #ff1493);
        background: rgba(20,20,20,0.7);
        color: var(--theme-primary, #ff1493);
        border-radius: 8px;
        box-shadow: 0 0 8px var(--theme-primary, #ff1493), 0 0 2px #000;
        transition: background 0.2s, color 0.2s, box-shadow 0.2s;
      }
      .theme-btn.active, .floating-btn.active, .glow-btn.active {
        background: var(--theme-primary, #ff1493);
        color: #fff;
        box-shadow: 0 0 16px var(--theme-primary, #ff1493);
      }
      /* XP Bar Animation */
      .xp-bar-fill {
        background: linear-gradient(90deg, var(--theme-primary, #ff1493), var(--theme-accent, #8e44ad));
      }
      
      .theme-dropdown {
        position: absolute;
        top: 100%;
        right: 0;
        background: rgba(0, 0, 0, 0.95);
        border: 1px solid var(--neon-pink, #ff1493);
        border-radius: 8px;
        padding: 8px;
        display: none;
        min-width: 120px;
        backdrop-filter: blur(15px);
        z-index: 1000;
      }
      
      .theme-dropdown.show {
        display: block;
      }
      
      .theme-option {
        display: block;
        width: 100%;
        background: transparent;
        border: none;
        color: white;
        padding: 8px 12px;
        border-radius: 4px;
        cursor: pointer;
        transition: all 0.3s ease;
        text-align: left;
      }
      
      .theme-option:hover {
        background: rgba(255, 20, 147, 0.2);
        color: var(--neon-pink, #ff1493);
      }
      
      /* Floating Action Buttons */
      .floating-buttons {
        position: fixed;
        bottom: 30px;
        right: 30px;
        z-index: 1000;
      }
      
      .floating-toggle {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        background: linear-gradient(135deg, var(--neon-pink, #ff1493), #ff69b4);
        border: none;
        color: white;
        font-size: 24px;
        cursor: pointer;
        box-shadow: 
          0 4px 20px rgba(255, 20, 147, 0.4),
          0 0 20px rgba(255, 20, 147, 0.6);
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      
      .floating-toggle:hover {
        transform: scale(1.1);
        box-shadow: 
          0 6px 25px rgba(255, 20, 147, 0.6),
          0 0 30px rgba(255, 20, 147, 0.8);
      }
      
      .floating-menu {
        position: absolute;
        bottom: 70px;
        right: 0;
        display: flex;
        flex-direction: column;
        gap: 10px;
        opacity: 0;
        transform: translateY(20px);
        transition: all 0.3s ease;
        pointer-events: none;
      }
      
      .floating-menu.show {
        opacity: 1;
        transform: translateY(0);
        pointer-events: all;
      }
      
      .floating-btn {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        background: rgba(0, 0, 0, 0.8);
        border: 1px solid var(--neon-pink, #ff1493);
        color: white;
        font-size: 20px;
        cursor: pointer;
        transition: all 0.3s ease;
        backdrop-filter: blur(10px);
        display: flex;
        align-items: center;
        justify-content: center;
      }
      
      .floating-btn:hover {
        background: rgba(255, 20, 147, 0.2);
        transform: scale(1.1);
        box-shadow: 0 0 15px var(--neon-pink, #ff1493);
      }
      
      /* Theme Classes */
      .theme-cult {
        --theme-primary: #ff1493;
        --theme-secondary: #ff69b4;
        --theme-glow: #ff1493;
        --theme-bg: #0a0a0a;
      }
      
      .theme-cyber {
        --theme-primary: #00ffff;
        --theme-secondary: #0080ff;
        --theme-glow: #00ffff;
        --theme-bg: #001122;
      }
      
      .theme-ember {
        --theme-primary: #ff6600;
        --theme-secondary: #ff9900;
        --theme-glow: #ff6600;
        --theme-bg: #2a1a0a;
      }
      
      /* Responsive Design */
      @media (max-width: 768px) {
        .header-top {
          flex-direction: column;
          align-items: stretch;
        }
        
        .xp-rank-bar {
          min-width: auto;
        }
        
        .floating-buttons {
          bottom: 20px;
          right: 20px;
        }
        
        .floating-toggle {
          width: 50px;
          height: 50px;
          font-size: 20px;
        }
        
        .floating-btn {
          width: 40px;
          height: 40px;
          font-size: 16px;
        }
      }
      
      /* Level Up Animation */
      @keyframes levelUpPulse {
        0% { transform: translate(-50%, -50%) scale(0.5); opacity: 0; }
        50% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; }
        100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
      }
      
      /* Achievements Modal */
      .achievements-modal .modal-content {
        background: rgba(0, 0, 0, 0.95);
        border: 2px solid var(--theme-primary, #ff1493);
        border-radius: 15px;
        padding: 0;
        max-width: 500px;
        width: 90%;
        max-height: 80vh;
        overflow-y: auto;
        backdrop-filter: blur(20px);
      }
      
      .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px;
        border-bottom: 1px solid var(--theme-primary, #ff1493);
      }
      
      .modal-header h2 {
        color: var(--theme-primary, #ff1493);
        margin: 0;
        text-shadow: 0 0 10px var(--theme-primary, #ff1493);
      }
      
      .modal-close {
        background: none;
        border: none;
        color: #fff;
        font-size: 24px;
        cursor: pointer;
        width: 30px;
        height: 30px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
      }
      
      .modal-close:hover {
        background: rgba(255, 20, 147, 0.2);
        color: var(--theme-primary, #ff1493);
      }
      
      .modal-body {
        padding: 20px;
      }
      
      .achievement-grid {
        display: grid;
        gap: 15px;
      }
      
      .achievement-item {
        display: flex;
        align-items: center;
        gap: 15px;
        padding: 15px;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 10px;
        border: 1px solid rgba(255, 255, 255, 0.1);
        transition: all 0.3s ease;
      }
      
      .achievement-item.completed {
        border-color: var(--theme-primary, #ff1493);
        box-shadow: 0 0 10px rgba(255, 20, 147, 0.3);
      }
      
      .achievement-item:hover {
        background: rgba(255, 255, 255, 0.1);
        transform: translateY(-2px);
      }
      
      .achievement-icon {
        font-size: 24px;
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: rgba(255, 20, 147, 0.2);
        border-radius: 50%;
        border: 1px solid var(--theme-primary, #ff1493);
      }
      
      .achievement-info h3 {
        margin: 0 0 5px 0;
        color: var(--theme-primary, #ff1493);
        font-size: 16px;
      }
      
      .achievement-info p {
        margin: 0;
        color: #ccc;
        font-size: 14px;
      }
      
      /* Achievement Modal Styles */
      .achievement-modal .modal-content {
        background: linear-gradient(135deg, #1a1a2e, #16213e);
        border: 2px solid var(--neon-pink, #ff1493);
        border-radius: 15px;
        padding: 30px;
        max-width: 500px;
        width: 90%;
        max-height: 80vh;
        overflow-y: auto;
        position: relative;
      }
      
      .achievement-modal .close {
        position: absolute;
        top: 15px;
        right: 20px;
        font-size: 30px;
        color: #fff;
        cursor: pointer;
        line-height: 1;
      }
      
      .achievement-grid {
        display: grid;
        gap: 15px;
        margin-top: 20px;
      }
      
      .achievement-item {
        display: flex;
        align-items: center;
        gap: 15px;
        padding: 15px;
        border: 1px solid #333;
        border-radius: 10px;
        transition: all 0.3s ease;
        opacity: 0.5;
      }
      
      .achievement-item.unlocked {
        opacity: 1;
        border-color: var(--neon-pink, #ff1493);
        background: rgba(255, 20, 147, 0.1);
        box-shadow: 0 0 15px rgba(255, 20, 147, 0.3);
      }
      
      .achievement-icon {
        font-size: 30px;
        width: 50px;
        height: 50px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.1);
      }
      
      .achievement-text h4 {
        margin: 0 0 5px 0;
        color: var(--neon-pink, #ff1493);
      }
      
      .achievement-text p {
        margin: 0;
        color: #ccc;
        font-size: 14px;
      }
      
      /* Rank Up Animation */
      @keyframes rankUpPulse {
        0% { transform: translate(-50%, -50%) scale(0.5); opacity: 0; }
        50% { transform: translate(-50%, -50%) scale(1.1); }
        100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
      }
      
      /* Enhanced Social Features Styles with Premium Polish */
      .profile-info {
        display: flex;
        gap: 18px;
        margin-bottom: 20px;
        padding: 20px;
        background: 
          linear-gradient(145deg, rgba(0, 0, 0, 0.6), rgba(15, 15, 15, 0.5)),
          radial-gradient(circle at 30% 30%, rgba(75, 0, 130, 0.08) 0%, transparent 45%);
        border: 1.5px solid;
        border-image: linear-gradient(135deg, 
          rgba(75, 0, 130, 0.25), 
          rgba(139, 0, 139, 0.18), 
          rgba(147, 112, 219, 0.22), 
          rgba(75, 0, 130, 0.25)) 1;
        border-radius: 16px;
        backdrop-filter: blur(15px);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: 
          0 8px 20px rgba(0, 0, 0, 0.25),
          0 0 15px rgba(75, 0, 130, 0.08),
          inset 0 1px 0 rgba(255, 255, 255, 0.05);
      }

      .profile-info:hover {
        transform: translateY(-2px);
        box-shadow: 
          0 12px 25px rgba(0, 0, 0, 0.3),
          0 0 20px rgba(75, 0, 130, 0.12),
          inset 0 1px 0 rgba(255, 255, 255, 0.07);
      }
      
      .profile-avatar {
        position: relative;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .profile-avatar:hover {
        transform: scale(1.05);
      }
      
      .avatar-circle {
        width: 70px;
        height: 70px;
        border-radius: 50%;
        background: 
          linear-gradient(135deg, 
            rgba(75, 0, 130, 0.9), 
            rgba(139, 0, 139, 0.8), 
            rgba(147, 112, 219, 0.9)),
          radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.1) 0%, transparent 50%);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 28px;
        color: white;
        text-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
        box-shadow: 
          0 8px 20px rgba(0, 0, 0, 0.4),
          0 0 20px rgba(75, 0, 130, 0.3),
          inset 0 2px 0 rgba(255, 255, 255, 0.1);
        border: 2px solid rgba(255, 255, 255, 0.1);
        position: relative;
        overflow: hidden;
        animation: avatarGlow 8s ease-in-out infinite;
      }

      @keyframes avatarGlow {
        0%, 100% { 
          box-shadow: 
            0 8px 20px rgba(0, 0, 0, 0.4),
            0 0 20px rgba(75, 0, 130, 0.3),
            inset 0 2px 0 rgba(255, 255, 255, 0.1);
        }
        50% { 
          box-shadow: 
            0 12px 25px rgba(0, 0, 0, 0.5),
            0 0 30px rgba(75, 0, 130, 0.5),
            inset 0 2px 0 rgba(255, 255, 255, 0.15);
        }
      }

      .avatar-circle::before {
        content: '';
        position: absolute;
        top: -2px;
        left: -2px;
        right: -2px;
        bottom: -2px;
        background: linear-gradient(45deg, 
          rgba(75, 0, 130, 0.5), 
          rgba(139, 0, 139, 0.4), 
          rgba(147, 112, 219, 0.5), 
          rgba(75, 0, 130, 0.5));
        border-radius: 50%;
        z-index: -1;
        animation: avatarBorder 6s linear infinite;
      }

      @keyframes avatarBorder {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
      
      .rank-badge {
        position: absolute;
        bottom: -8px;
        right: -8px;
        background: 
          linear-gradient(135deg, 
            rgba(75, 0, 130, 0.95), 
            rgba(139, 0, 139, 0.9));
        color: white;
        padding: 4px 8px;
        border-radius: 12px;
        font-size: 11px;
        font-weight: 700;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
        box-shadow: 
          0 4px 12px rgba(0, 0, 0, 0.3),
          0 0 10px rgba(75, 0, 130, 0.4);
        border: 1px solid rgba(255, 255, 255, 0.2);
      }
      
      .profile-stats {
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: 8px;
      }
      
      .stat-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 8px 12px;
        margin-bottom: 6px;
        background: 
          linear-gradient(135deg, rgba(0, 0, 0, 0.3), rgba(15, 15, 15, 0.2)),
          radial-gradient(circle at 80% 20%, rgba(75, 0, 130, 0.06) 0%, transparent 40%);
        border-radius: 10px;
        border: 1px solid rgba(75, 0, 130, 0.2);
        transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        backdrop-filter: blur(10px);
      }

      .stat-item:hover {
        transform: translateX(3px);
        background: 
          linear-gradient(135deg, rgba(0, 0, 0, 0.4), rgba(15, 15, 15, 0.3)),
          radial-gradient(circle at 80% 20%, rgba(75, 0, 130, 0.12) 0%, transparent 40%);
        border-color: rgba(75, 0, 130, 0.35);
      }
      
      .stat-label {
        color: #c8c8c8;
        font-weight: 500;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.4);
      }
      
      .stat-value {
        color: #e0e0e0;
        font-weight: 700;
        text-shadow: 
          0 0 8px rgba(75, 0, 130, 0.4),
          0 1px 2px rgba(0, 0, 0, 0.3);
        background: linear-gradient(135deg, #e0e0e0, #c0c0c0);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }
      
      /* Enhanced Referral System with Premium Polish */
      .referral-section {
        margin-top: 15px;
        padding: 18px;
        background: 
          linear-gradient(145deg, rgba(0, 0, 0, 0.5), rgba(15, 15, 15, 0.4)),
          radial-gradient(circle at 25% 75%, rgba(75, 0, 130, 0.08) 0%, transparent 45%);
        border: 1.5px solid;
        border-image: linear-gradient(135deg, 
          rgba(75, 0, 130, 0.25), 
          rgba(139, 0, 139, 0.18), 
          rgba(147, 112, 219, 0.22), 
          rgba(75, 0, 130, 0.25)) 1;
        border-radius: 14px;
        backdrop-filter: blur(12px);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: 
          0 6px 16px rgba(0, 0, 0, 0.2),
          0 0 12px rgba(75, 0, 130, 0.06),
          inset 0 1px 0 rgba(255, 255, 255, 0.04);
      }

      .referral-section:hover {
        transform: translateY(-1px);
        box-shadow: 
          0 8px 20px rgba(0, 0, 0, 0.25),
          0 0 16px rgba(75, 0, 130, 0.1),
          inset 0 1px 0 rgba(255, 255, 255, 0.06);
      }
      
      .referral-stats {
        margin-bottom: 18px;
      }
      
      .stat-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 8px;
        padding: 6px 10px;
        background: rgba(0, 0, 0, 0.2);
        border-radius: 8px;
        border: 1px solid rgba(75, 0, 130, 0.15);
        color: #c8c8c8;
        font-weight: 500;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.4);
        transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .stat-row:hover {
        background: rgba(0, 0, 0, 0.3);
        border-color: rgba(75, 0, 130, 0.25);
        transform: translateX(2px);
      }
      
      .referral-link {
        display: flex;
        gap: 12px;
      }
      
      .referral-link input {
        flex: 1;
        padding: 10px 12px;
        background: 
          linear-gradient(135deg, rgba(0, 0, 0, 0.4), rgba(15, 15, 15, 0.3)),
          radial-gradient(circle at 80% 20%, rgba(75, 0, 130, 0.08) 0%, transparent 40%);
        border: 1.5px solid rgba(75, 0, 130, 0.3);
        border-radius: 10px;
        color: #e0e0e0;
        font-size: 13px;
        font-weight: 500;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        backdrop-filter: blur(10px);
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
      }

      .referral-link input:focus {
        outline: none;
        border-color: rgba(75, 0, 130, 0.6);
        box-shadow: 
          0 0 15px rgba(75, 0, 130, 0.2),
          inset 0 1px 0 rgba(255, 255, 255, 0.05);
        background: 
          linear-gradient(135deg, rgba(0, 0, 0, 0.5), rgba(15, 15, 15, 0.4)),
          radial-gradient(circle at 80% 20%, rgba(75, 0, 130, 0.12) 0%, transparent 40%);
      }
      
      /* Enhanced Leaderboard with Premium Polish */
      .leaderboard {
        margin-top: 15px;
      }
      
      .leaderboard-entry {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 12px 14px;
        margin-bottom: 8px;
        border-radius: 12px;
        background: 
          linear-gradient(135deg, rgba(0, 0, 0, 0.4), rgba(15, 15, 15, 0.3)),
          radial-gradient(circle at 20% 80%, rgba(75, 0, 130, 0.06) 0%, transparent 40%);
        border: 1px solid rgba(75, 0, 130, 0.2);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        backdrop-filter: blur(10px);
        box-shadow: 
          0 4px 12px rgba(0, 0, 0, 0.15),
          inset 0 1px 0 rgba(255, 255, 255, 0.03);
      }

      .leaderboard-entry:hover {
        transform: translateY(-1px) scale(1.01);
        background: 
          linear-gradient(135deg, rgba(0, 0, 0, 0.5), rgba(15, 15, 15, 0.4)),
          radial-gradient(circle at 20% 80%, rgba(75, 0, 130, 0.1) 0%, transparent 40%);
        border-color: rgba(75, 0, 130, 0.35);
        box-shadow: 
          0 6px 16px rgba(0, 0, 0, 0.2),
          inset 0 1px 0 rgba(255, 255, 255, 0.05);
      }
      
      .leaderboard-entry.top-rank {
        background: 
          linear-gradient(135deg, 
            rgba(255, 215, 0, 0.15), 
            rgba(255, 20, 147, 0.12), 
            rgba(75, 0, 130, 0.1)),
          radial-gradient(circle at 30% 70%, rgba(255, 215, 0, 0.08) 0%, transparent 50%);
        border: 1.5px solid;
        border-image: linear-gradient(135deg, 
          rgba(255, 215, 0, 0.6), 
          rgba(255, 20, 147, 0.4), 
          rgba(75, 0, 130, 0.5)) 1;
        box-shadow: 
          0 8px 20px rgba(0, 0, 0, 0.25),
          0 0 20px rgba(255, 215, 0, 0.15),
          0 0 40px rgba(255, 20, 147, 0.08),
          inset 0 1px 0 rgba(255, 255, 255, 0.1);
        animation: topRankGlow 6s ease-in-out infinite;
      }

      @keyframes topRankGlow {
        0%, 100% { 
          box-shadow: 
            0 8px 20px rgba(0, 0, 0, 0.25),
            0 0 20px rgba(255, 215, 0, 0.15),
            0 0 40px rgba(255, 20, 147, 0.08),
            inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }
        50% { 
          box-shadow: 
            0 12px 25px rgba(0, 0, 0, 0.3),
            0 0 30px rgba(255, 215, 0, 0.25),
            0 0 60px rgba(255, 20, 147, 0.15),
            inset 0 1px 0 rgba(255, 255, 255, 0.15);
        }
      }
      
      .leaderboard-entry.current-user {
        background: 
          linear-gradient(135deg, 
            rgba(255, 20, 147, 0.18), 
            rgba(75, 0, 130, 0.15), 
            rgba(139, 0, 139, 0.12)),
          radial-gradient(circle at 70% 30%, rgba(255, 20, 147, 0.1) 0%, transparent 50%);
        border: 1.5px solid;
        border-image: linear-gradient(135deg, 
          rgba(255, 20, 147, 0.6), 
          rgba(75, 0, 130, 0.4), 
          rgba(139, 0, 139, 0.5)) 1;
        box-shadow: 
          0 6px 16px rgba(0, 0, 0, 0.2),
          0 0 15px rgba(255, 20, 147, 0.12),
          0 0 30px rgba(75, 0, 130, 0.08),
          inset 0 1px 0 rgba(255, 255, 255, 0.08);
      }
      
      .leaderboard-entry .rank {
        font-size: 15px;
        font-weight: 700;
        min-width: 35px;
        text-align: center;
        color: #e0e0e0;
        text-shadow: 
          0 0 8px rgba(75, 0, 130, 0.4),
          0 1px 2px rgba(0, 0, 0, 0.4);
        background: linear-gradient(135deg, #e0e0e0, #c0c0c0);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }
      
      .leaderboard-entry .username {
        flex: 1;
        color: #d0d0d0;
        font-weight: 600;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.4);
      }
      
      .leaderboard-entry .score {
        color: var(--neon-pink, #ff1493);
        font-weight: bold;
        font-size: 12px;
      }
      
      /* Social Feed */
      .social-feed {
        margin-top: 10px;
        max-height: 200px;
        overflow-y: auto;
      }
      
      .feed-item {
        display: flex;
        gap: 10px;
        padding: 8px;
        margin-bottom: 10px;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 4px;
      }
      
      .feed-avatar {
        width: 30px;
        height: 30px;
        border-radius: 50%;
        background: var(--neon-pink, #ff1493);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 14px;
      }
      
      .feed-content {
        flex: 1;
      }
      
      .feed-user {
        font-weight: bold;
        color: var(--neon-pink, #ff1493);
        font-size: 12px;
      }
      
      .feed-text {
        color: white;
        font-size: 12px;
        margin: 2px 0;
      }
      
      .feed-time {
        color: #999;
        font-size: 10px;
      }
      
      /* DAO Governance Styles */
      .voting-power {
        display: flex;
        gap: 15px;
        margin-bottom: 15px;
      }
      
      .power-circle {
        width: 80px;
        height: 80px;
        border-radius: 50%;
        background: conic-gradient(var(--neon-pink, #ff1493), var(--neon-purple, #8e44ad), var(--neon-pink, #ff1493));
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        color: white;
      }
      
      .power-value {
        font-size: 20px;
        font-weight: bold;
      }
      
      .power-label {
        font-size: 10px;
        opacity: 0.8;
      }
      
      .power-breakdown {
        flex: 1;
      }
      
      .power-source {
        display: flex;
        justify-content: space-between;
        margin-bottom: 5px;
        font-size: 12px;
        color: #ccc;
      }
      
      /* Proposals */
      .proposals-list {
        margin-top: 10px;
        max-height: 300px;
        overflow-y: auto;
      }
      
      .proposal-item {
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 20, 147, 0.3);
        border-radius: 8px;
        padding: 15px;
        margin-bottom: 15px;
      }
      
      .proposal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
      }
      
      .proposal-title {
        font-weight: bold;
        color: white;
        font-size: 14px;
      }
      
      .proposal-status {
        padding: 2px 8px;
        border-radius: 10px;
        font-size: 10px;
        font-weight: bold;
      }
      
      .proposal-status.active {
        background: var(--neon-pink, #ff1493);
        color: white;
      }
      
      .proposal-description {
        color: #ccc;
        font-size: 12px;
        margin-bottom: 10px;
      }
      
      .vote-progress {
        margin-bottom: 10px;
      }
      
      .vote-bar {
        width: 100%;
        height: 8px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 4px;
        overflow: hidden;
        margin-bottom: 5px;
      }
      
      .vote-fill {
        height: 100%;
        background: var(--neon-pink, #ff1493);
        transition: width 0.3s ease;
      }
      
      .vote-fill.yes {
        background: #4caf50;
      }
      
      .vote-counts {
        display: flex;
        justify-content: space-between;
        font-size: 10px;
      }
      
      .yes-votes {
        color: #4caf50;
      }
      
      .no-votes {
        color: #f44336;
      }
      
      .proposal-time {
        color: #999;
        font-size: 10px;
        margin-bottom: 10px;
      }
      
      .proposal-actions {
        display: flex;
        gap: 10px;
      }
      
      .vote-btn {
        padding: 6px 12px;
        border: none;
        border-radius: 4px;
        font-size: 12px;
        cursor: pointer;
        transition: all 0.3s ease;
      }
      
      .vote-btn.yes {
        background: #4caf50;
        color: white;
      }
      
      .vote-btn.no {
        background: #f44336;
        color: white;
      }
      
      .vote-btn:hover {
        opacity: 0.8;
        transform: translateY(-1px);
      }
      
      /* Proposal Form */
      .proposal-form {
        margin-top: 10px;
      }
      
      .proposal-form input,
      .proposal-form textarea {
        width: 100%;
        padding: 8px;
        margin-bottom: 10px;
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 20, 147, 0.3);
        border-radius: 4px;
        color: white;
        font-size: 12px;
      }
      
      .proposal-form textarea {
        resize: vertical;
        min-height: 60px;
      }
      
      .form-note {
        font-size: 10px;
        color: #999;
        margin-top: 5px;
      }
      
      /* Advanced Trading Features */
      .trading-modes {
        margin: 15px 0;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 8px;
        padding: 15px;
      }
      
      .mode-tabs {
        display: flex;
        gap: 5px;
        margin-bottom: 15px;
      }
      
      .mode-tab {
        flex: 1;
        padding: 8px 12px;
        background: transparent;
        border: 1px solid rgba(255, 20, 147, 0.3);
        color: #ccc;
        border-radius: 4px;
        cursor: pointer;
        font-size: 12px;
        transition: all 0.3s ease;
      }
      
      .mode-tab.active {
        background: var(--neon-pink, #ff1493);
        color: white;
        border-color: var(--neon-pink, #ff1493);
      }
      
      .trading-panel {
        margin-top: 10px;
      }
      
      .limit-controls, .dca-controls {
        display: flex;
        gap: 10px;
        margin-bottom: 10px;
      }
      
      .limit-input-group, .dca-input-group {
        flex: 1;
      }
      
      .limit-label, .dca-label {
        display: block;
        font-size: 10px;
        color: #ccc;
        margin-bottom: 5px;
      }
      
      .limit-input-group input, .dca-input-group select {
        width: 100%;
        padding: 6px;
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 20, 147, 0.3);
        border-radius: 4px;
        color: white;
        font-size: 12px;
      }
      
      .price-unit {
        font-size: 10px;
        color: #ccc;
        margin-left: 5px;
      }
      
      .limit-info, .dca-preview {
        margin-top: 10px;
        padding: 8px;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 4px;
      }
      
      .dca-stat {
        display: flex;
        justify-content: space-between;
        margin-bottom: 5px;
        font-size: 12px;
        color: #ccc;
      }
      
      /* Advanced Portfolio Analytics */
      .portfolio-value-display {
        display: flex;
        align-items: center;
        gap: 10px;
      }
      
      .current-value {
        font-size: 24px;
        font-weight: bold;
        color: var(--neon-pink, #ff1493);
      }
      
      .value-change {
        font-size: 14px;
        padding: 2px 6px;
        border-radius: 4px;
      }
      
      .value-change.positive {
        background: rgba(76, 175, 80, 0.2);
        color: #4caf50;
      }
      
      .value-change.negative {
        background: rgba(244, 67, 54, 0.2);
        color: #f44336;
      }
      
      .performance-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 10px;
        margin-top: 10px;
      }
      
      .performance-item {
        display: flex;
        justify-content: space-between;
        font-size: 12px;
      }
      
      .metric-label {
        color: #ccc;
      }
      
      .metric-value {
        font-weight: bold;
        color: white;
      }
      
      .metric-value.positive {
        color: #4caf50;
      }
      
      .holdings-list {
        margin-top: 10px;
      }
      
      .holding-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px;
        margin-bottom: 8px;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 6px;
      }
      
      .holding-token {
        display: flex;
        align-items: center;
        gap: 10px;
      }
      
      .token-icon {
        width: 30px;
        height: 30px;
        border-radius: 50%;
        background: var(--neon-pink, #ff1493);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 14px;
      }
      
      .token-name {
        font-weight: bold;
        color: white;
      }
      
      .token-amount {
        font-size: 12px;
        color: #ccc;
      }
      
      .holding-value {
        text-align: right;
      }
      
      .value-usd {
        font-weight: bold;
        color: white;
      }
      
      .trade-filters {
        display: flex;
        gap: 10px;
        margin-bottom: 10px;
      }
      
      .trade-filters select {
        padding: 4px 8px;
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 20, 147, 0.3);
        border-radius: 4px;
        color: white;
        font-size: 11px;
      }
      
      .trade-entry.advanced {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px;
        margin-bottom: 8px;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 6px;
      }
      
      .trade-info {
        flex: 1;
      }
      
      .trade-type {
        font-size: 10px;
        color: #ccc;
      }
      
      .trade-amounts {
        flex: 1;
        text-align: center;
      }
      
      .trade-value {
        font-size: 11px;
        color: #ccc;
      }
      
      .trade-meta {
        flex: 1;
        text-align: right;
      }
      
      .trade-pnl {
        font-weight: bold;
        font-size: 12px;
      }
      
      .trade-pnl.positive {
        color: #4caf50;
      }
      
      .trade-pnl.negative {
        color: #f44336;
      }
      
      /* Enhanced Admin Dashboard */
      .analytics-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 10px;
        margin-top: 10px;
      }
      
      .analytics-item {
        text-align: center;
        padding: 10px;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 6px;
      }
      
      .analytics-value {
        font-size: 18px;
        font-weight: bold;
        color: var(--neon-pink, #ff1493);
      }
      
      .analytics-label {
        font-size: 10px;
        color: #ccc;
        margin-top: 5px;
      }
      
      .analytics-change {
        font-size: 9px;
        font-weight: bold;
        margin-top: 2px;
      }
      
      .analytics-change.positive {
        color: #4caf50;
      }
      
      .analytics-change.negative {
        color: #f44336;
      }
      
      /* Seasonal Events */
      .events-management {
        margin-top: 10px;
      }
      
      .current-event {
        padding: 10px;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 6px;
        margin-bottom: 15px;
      }
      
      .event-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
      }
      
      .event-name {
        font-weight: bold;
        color: white;
      }
      
      .event-status.active {
        background: #4caf50;
        color: white;
        padding: 2px 8px;
        border-radius: 10px;
        font-size: 10px;
      }
      
      .event-progress {
        margin-bottom: 10px;
      }
      
      .progress-bar {
        width: 100%;
        height: 6px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 3px;
        overflow: hidden;
        margin-bottom: 5px;
      }
      
      .progress-fill {
        height: 100%;
        background: var(--neon-pink, #ff1493);
        transition: width 0.3s ease;
      }
      
      .progress-text {
        font-size: 10px;
        color: #ccc;
      }
      
      .event-rewards {
        display: flex;
        gap: 10px;
        font-size: 11px;
        color: #ccc;
        margin-bottom: 10px;
      }
      
      .event-actions {
        display: flex;
        gap: 5px;
      }
      
      .admin-btn.small {
        padding: 4px 8px;
        font-size: 10px;
      }
      
      .event-creator {
        padding: 10px;
        background: rgba(255, 255, 255, 0.03);
        border-radius: 6px;
      }
      
      .event-creator h5 {
        margin: 0 0 10px 0;
        color: white;
      }
      
      .event-creator input, .event-creator select {
        width: 100%;
        padding: 6px;
        margin-bottom: 8px;
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 20, 147, 0.3);
        border-radius: 4px;
        color: white;
        font-size: 12px;
      }
      
      /* System Controls */
      .system-controls {
        margin-top: 10px;
      }
      
      .control-group {
        margin-bottom: 15px;
        padding: 10px;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 6px;
      }
      
      .control-group h5 {
        margin: 0 0 10px 0;
        color: white;
        font-size: 12px;
      }
      
      .status-display {
        display: flex;
        align-items: center;
        gap: 8px;
        margin-bottom: 8px;
      }
      
      .status-indicator {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background: #4caf50;
      }
      
      .uptime {
        font-size: 10px;
        color: #ccc;
        margin-left: auto;
      }
      
      .feature-toggles {
        display: flex;
        flex-direction: column;
        gap: 8px;
      }
      
      .toggle-switch {
        display: flex;
        align-items: center;
        gap: 8px;
        cursor: pointer;
      }
      
      .toggle-slider {
        position: relative;
        width: 30px;
        height: 16px;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 16px;
        transition: background 0.3s ease;
      }
      
      .toggle-slider::before {
        content: '';
        position: absolute;
        top: 2px;
        left: 2px;
        width: 12px;
        height: 12px;
        background: white;
        border-radius: 50%;
        transition: transform 0.3s ease;
      }
      
      .toggle-switch input:checked + .toggle-slider {
        background: var(--neon-pink, #ff1493);
      }
      
      .toggle-switch input:checked + .toggle-slider::before {
        transform: translateX(14px);
      }
      
      .toggle-label {
        font-size: 11px;
        color: white;
      }
      
      .data-controls {
        display: flex;
        flex-direction: column;
        gap: 5px;
      }
      
      .danger-zone {
        border: 1px solid rgba(244, 67, 54, 0.3);
        background: rgba(244, 67, 54, 0.1);
      }
      
      /* Cult Wars */
      .cult-wars {
        margin-top: 10px;
      }
      
      .current-battle {
        padding: 15px;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 8px;
        margin-bottom: 15px;
      }
      
      .battle-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
      }
      
      .battle-title {
        font-weight: bold;
        color: white;
        font-size: 14px;
      }
      
      .battle-timer {
        background: var(--neon-pink, #ff1493);
        color: white;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 11px;
        font-weight: bold;
      }
      
      .battle-teams {
        margin-bottom: 15px;
      }
      
      .team {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 6px;
        padding: 10px;
        margin-bottom: 8px;
      }
      
      .team-name {
        font-weight: bold;
        margin-bottom: 8px;
      }
      
      .team.moon-cult .team-name {
        color: #ff1493;
      }
      
      .team.degen-army .team-name {
        color: #00ff85;
      }
      
      .team-progress {
        margin-bottom: 5px;
      }
      
      .team-bar {
        height: 8px;
        margin-bottom: 5px;
      }
      
      .progress-fill.moon {
        background: linear-gradient(90deg, #ff1493, #8e44ad);
      }
      
      .progress-fill.degen {
        background: linear-gradient(90deg, #00ff85, #00fff7);
      }
      
      .team-score {
        font-weight: bold;
        font-size: 12px;
      }
      
      .team-members {
        font-size: 10px;
        color: #ccc;
      }
      
      .vs-divider {
        text-align: center;
        font-weight: bold;
        color: var(--neon-pink, #ff1493);
        margin: 10px 0;
      }
      
      .battle-rewards {
        margin-bottom: 15px;
      }
      
      .battle-rewards h5 {
        margin: 0 0 10px 0;
        color: white;
        font-size: 12px;
      }
      
      .rewards-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 8px;
      }
      
      .reward-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 8px;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 4px;
      }
      
      .reward-icon {
        font-size: 16px;
        margin-bottom: 4px;
      }
      
      .reward-text {
        font-size: 9px;
        text-align: center;
        color: #ccc;
      }
      
      .your-contribution {
        padding: 10px;
        background: rgba(255, 255, 255, 0.03);
        border-radius: 6px;
      }
      
      .your-contribution h5 {
        margin: 0 0 10px 0;
        color: white;
        font-size: 12px;
      }
      
      .contribution-stats {
        margin-bottom: 10px;
      }
      
      .contrib-stat {
        display: flex;
        justify-content: space-between;
        margin-bottom: 5px;
        font-size: 11px;
      }
      
      .contrib-label {
        color: #ccc;
      }
      
      .contrib-value {
        color: white;
        font-weight: bold;
      }
      
      /* Epic Gaming-Tier Cult Wars Interface */
      .cult-wars-interface {
        background: 
          linear-gradient(135deg, rgba(0, 0, 0, 0.98), rgba(10, 0, 15, 0.95)),
          radial-gradient(circle at 30% 70%, rgba(139, 0, 139, 0.3) 0%, transparent 60%),
          radial-gradient(circle at 70% 30%, rgba(75, 0, 130, 0.25) 0%, transparent 50%);
        border: 3px solid;
        border-image: linear-gradient(45deg, 
          rgba(220, 20, 60, 0.8), 
          rgba(255, 20, 147, 0.9), 
          rgba(139, 0, 139, 0.7), 
          rgba(75, 0, 130, 0.8)) 1;
        border-radius: 25px;
        padding: 35px;
        margin-bottom: 30px;
        position: relative;
        overflow: hidden;
        box-shadow: 
          0 0 60px rgba(220, 20, 60, 0.4),
          0 0 120px rgba(255, 20, 147, 0.3),
          0 20px 40px rgba(0, 0, 0, 0.8),
          inset 0 0 50px rgba(139, 0, 139, 0.1);
        animation: cultWarsGlow 6s ease-in-out infinite;
      }

      @keyframes cultWarsGlow {
        0%, 100% { 
          box-shadow: 
            0 0 60px rgba(220, 20, 60, 0.4),
            0 0 120px rgba(255, 20, 147, 0.3),
            0 20px 40px rgba(0, 0, 0, 0.8);
        }
        50% { 
          box-shadow: 
            0 0 80px rgba(220, 20, 60, 0.6),
            0 0 160px rgba(255, 20, 147, 0.4),
            0 0 200px rgba(139, 0, 139, 0.2),
            0 25px 50px rgba(0, 0, 0, 0.9);
        }
      }

      .cult-wars-interface::before {
        content: '⚔️ ☾ ⚔️ ☽ ⚔️';
        position: absolute;
        top: -15px;
        left: 50%;
        transform: translateX(-50%);
        font-size: 1.5rem;
        color: rgba(255, 20, 147, 0.8);
        text-shadow: 0 0 20px rgba(255, 20, 147, 1);
        animation: warRunes 8s ease-in-out infinite;
      }

      @keyframes warRunes {
        0%, 100% { 
          opacity: 0.6; 
          transform: translateX(-50%) scale(1) rotate(0deg); 
        }
        50% { 
          opacity: 1; 
          transform: translateX(-50%) scale(1.1) rotate(5deg); 
        }
      }

      .battle-arena {
        display: grid;
        grid-template-columns: 1fr 80px 1fr;
        gap: 20px;
        align-items: center;
        margin-bottom: 25px;
        padding: 20px;
        background: 
          linear-gradient(90deg, 
            rgba(75, 0, 130, 0.2) 0%, 
            rgba(139, 0, 139, 0.1) 50%, 
            rgba(75, 0, 130, 0.2) 100%);
        border-radius: 15px;
        border: 2px solid rgba(255, 20, 147, 0.3);
        position: relative;
        overflow: hidden;
      }

      .battle-arena::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, 
          transparent, 
          rgba(255, 20, 147, 0.15), 
          transparent);
        animation: battleSweep 4s linear infinite;
      }

      @keyframes battleSweep {
        0% { left: -100%; }
        100% { left: 100%; }
      }

      .cult-faction {
        text-align: center;
        padding: 20px;
        background: 
          linear-gradient(145deg, rgba(0, 0, 0, 0.9), rgba(15, 15, 15, 0.7)),
          radial-gradient(circle, rgba(255, 20, 147, 0.1), transparent 70%);
        border: 2px solid rgba(255, 20, 147, 0.4);
        border-radius: 15px;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        overflow: hidden;
        /* Enhanced Mobile Touch Support */
        -webkit-tap-highlight-color: rgba(255, 20, 147, 0.2);
        cursor: pointer;
      }

      .cult-faction::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 3px;
        background: linear-gradient(90deg, 
          transparent, 
          rgba(255, 20, 147, 0.8), 
          transparent);
        animation: factionPulse 3s ease-in-out infinite;
      }

      @keyframes factionPulse {
        0%, 100% { opacity: 0.4; }
        50% { opacity: 1; }
      }

      .cult-faction:hover {
        transform: translateY(-5px) scale(1.02);
        border-color: rgba(255, 20, 147, 0.8);
        box-shadow: 
          0 20px 40px rgba(0, 0, 0, 0.5),
          0 0 40px rgba(255, 20, 147, 0.4),
          0 0 80px rgba(139, 0, 139, 0.2);
      }

      .faction-icon {
        font-size: 3rem;
        margin-bottom: 10px;
        display: block;
        animation: iconFloat 4s ease-in-out infinite;
        text-shadow: 0 0 20px rgba(255, 20, 147, 0.8);
      }

      @keyframes iconFloat {
        0%, 100% { transform: translateY(0px); }
        50% { transform: translateY(-8px); }
      }

      .faction-name {
        font-size: 1.4rem;
        font-weight: 700;
        color: #fff;
        margin-bottom: 10px;
        text-shadow: 0 0 15px rgba(255, 20, 147, 0.6);
      }

      .faction-power {
        font-size: 1.1rem;
        color: #ff69b4;
        margin-bottom: 15px;
        font-weight: 600;
      }

      .battle-vs {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        font-size: 2.5rem;
        color: rgba(255, 20, 147, 0.9);
        text-shadow: 0 0 25px rgba(255, 20, 147, 1);
        animation: battleVsGlow 3s ease-in-out infinite;
        position: relative;
      }

      @keyframes battleVsGlow {
        0%, 100% { 
          transform: scale(1); 
          text-shadow: 0 0 25px rgba(255, 20, 147, 1);
        }
        50% { 
          transform: scale(1.1); 
          text-shadow: 
            0 0 35px rgba(255, 20, 147, 1.2),
            0 0 50px rgba(139, 0, 139, 0.8);
        }
      }

      .battle-vs::before {
        content: '⚡';
        position: absolute;
        top: -20px;
        animation: lightningStrike 2s ease-in-out infinite;
        font-size: 1.5rem;
      }

      @keyframes lightningStrike {
        0%, 100% { opacity: 0.3; transform: rotate(0deg); }
        50% { opacity: 1; transform: rotate(15deg); }
      }

      .battle-progress {
        margin-bottom: 25px;
        padding: 20px;
        background: rgba(0, 0, 0, 0.6);
        border-radius: 12px;
        border: 1px solid rgba(255, 20, 147, 0.3);
      }

      .progress-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
      }

      .battle-timer {
        font-size: 1.2rem;
        font-weight: 700;
        color: #ff69b4;
        text-shadow: 0 0 10px rgba(255, 20, 147, 0.8);
      }

      .battle-reward {
        font-size: 1rem;
        color: #ffd700;
        text-shadow: 0 0 10px rgba(255, 215, 0, 0.8);
      }

      .war-progress-bar {
        width: 100%;
        height: 12px;
        background: 
          linear-gradient(90deg, 
            rgba(75, 0, 130, 0.3), 
            rgba(139, 0, 139, 0.2), 
            rgba(75, 0, 130, 0.3));
        border-radius: 6px;
        overflow: hidden;
        position: relative;
        box-shadow: 
          inset 0 2px 4px rgba(0, 0, 0, 0.5),
          0 0 15px rgba(255, 20, 147, 0.3);
      }

      .war-progress-fill {
        height: 100%;
        background: 
          linear-gradient(90deg, 
            rgba(255, 20, 147, 0.9), 
            rgba(255, 69, 180, 0.8), 
            rgba(255, 20, 147, 0.9));
        border-radius: 6px;
        width: 0%;
        transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        animation: progressGlow 3s ease-in-out infinite;
      }

      @keyframes progressGlow {
        0%, 100% { 
          box-shadow: 0 0 20px rgba(255, 20, 147, 0.6);
        }
        50% { 
          box-shadow: 
            0 0 30px rgba(255, 20, 147, 0.8),
            0 0 50px rgba(139, 0, 139, 0.4);
        }
      }

      .war-progress-fill::after {
        content: '';
        position: absolute;
        top: 0;
        right: 0;
        width: 30px;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4));
        border-radius: 0 6px 6px 0;
        animation: progressShimmer 2s linear infinite;
      }

      @keyframes progressShimmer {
        0% { opacity: 0; transform: translateX(-10px); }
        50% { opacity: 1; transform: translateX(0); }
        100% { opacity: 0; transform: translateX(10px); }
      }

      .faction-join-btn {
        background: 
          linear-gradient(145deg, rgba(255, 20, 147, 0.9), rgba(139, 0, 139, 0.7)),
          linear-gradient(145deg, rgba(0, 0, 0, 0.95), rgba(20, 20, 20, 0.8));
        color: #ffffff;
        border: 2px solid rgba(255, 20, 147, 0.6);
        border-radius: 12px;
        padding: 12px 24px;
        font-weight: 700;
        cursor: pointer;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        text-shadow: 0 0 15px rgba(0, 0, 0, 0.8);
        box-shadow: 
          0 6px 20px rgba(0, 0, 0, 0.4),
          0 0 25px rgba(255, 20, 147, 0.3);
        position: relative;
        overflow: hidden;
        text-transform: uppercase;
        letter-spacing: 1px;
        /* Enhanced Mobile Touch Targets */
        min-height: 44px;
        min-width: 120px;
        -webkit-tap-highlight-color: rgba(255, 20, 147, 0.3);
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        user-select: none;
      }

      .faction-join-btn::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, 
          transparent, 
          rgba(255, 255, 255, 0.2), 
          transparent);
        transition: left 0.6s ease;
      }

      .faction-join-btn:hover::before {
        left: 100%;
      }

      .faction-join-btn:hover {
        transform: translateY(-3px) scale(1.05);
        border-color: rgba(255, 20, 147, 1);
        box-shadow: 
          0 12px 35px rgba(0, 0, 0, 0.5),
          0 0 40px rgba(255, 20, 147, 0.6),
          0 0 80px rgba(139, 0, 139, 0.3);
        text-shadow: 0 0 20px rgba(255, 255, 255, 0.8);
      }

      .war-stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
        gap: 15px;
        margin-top: 20px;
      }

      .war-stat {
        text-align: center;
        padding: 15px;
        background: 
          linear-gradient(145deg, rgba(0, 0, 0, 0.8), rgba(15, 15, 15, 0.6)),
          radial-gradient(circle, rgba(255, 20, 147, 0.1), transparent 70%);
        border: 1px solid rgba(255, 20, 147, 0.3);
        border-radius: 10px;
        transition: all 0.3s ease;
        /* Enhanced Mobile Touch Support */
        -webkit-tap-highlight-color: rgba(255, 20, 147, 0.2);
        cursor: pointer;
      }

      .war-stat:hover {
        transform: translateY(-3px);
        border-color: rgba(255, 20, 147, 0.6);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.4);
      }

      .war-stat-value {
        font-size: 1.8rem;
        font-weight: 700;
        color: #ff69b4;
        margin-bottom: 5px;
        text-shadow: 0 0 15px rgba(255, 20, 147, 0.8);
      }

      .war-stat-label {
        font-size: 0.9rem;
        color: #ccc;
        text-transform: uppercase;
        letter-spacing: 1px;
      }
    </style>
  </head>
  <body>
    <!-- Enhanced Particle Overlay -->
    <div class="particle-overlay"></div>
    
    <!-- Loading Screen with Matrix Effect -->
    <div class="loading-screen" id="loadingScreen">
      <div class="mystical-loader"></div>
      <div class="loading-text holo-text">🌙 Loading NocturneSwap</div>
      <div class="loading-subtitle matrix-text">Initializing mystical DEX interface...</div>
      <div class="loading-progress">
        <div class="progress-bar">
          <div class="progress-fill" id="progressFill"></div>
        </div>
        <div class="progress-text" id="progressText">Connecting to the void...</div>
      </div>
    </div>

    <!-- Main App -->
    <div class="app-container" id="appContainer">
      <header class="header">
        <div class="header-top">
          <!-- XP & Rank Bar -->
          <div class="xp-rank-bar">
            <div class="cult-rank" id="cultRank">Initiate</div>
            <div class="xp-progress">
              <div class="xp-bar-bg">
                <div class="xp-bar-fill" id="xpBarFill" style="width: 0%"></div>
              </div>
              <span class="xp-text" id="xpText">0 / 100 XP</span>
            </div>
            <div class="level-indicator" id="levelIndicator">Level 1</div>
          </div>
          
          <!-- Theme Switcher -->
          <div class="theme-controls">
            <button class="theme-btn" id="themeBtn" data-theme="cult">🌙 Cult</button>
            <div class="theme-dropdown" id="themeDropdown">
              <button class="theme-option" data-theme="cult">🌙 Cult</button>
              <button class="theme-option" data-theme="cyber">⚡ Cyber</button>
              <button class="theme-option" data-theme="ember">🔥 Ember</button>
            </div>
          </div>
        </div>
        
        <h1>🌙 NocturneSwap</h1>
        <p>Professional Solana DEX - Trade • Pool • Earn</p>
      </header>
      
      <nav class="navigation" role="navigation" aria-label="Main navigation">
        <button class="nav-button active" data-section="swap" aria-pressed="true">💱 Swap</button>
        <button class="nav-button" data-section="pools" aria-pressed="false">🏊 Pools</button>
        <button class="nav-button" data-section="portfolio" aria-pressed="false">📊 Portfolio</button>
        <button class="nav-button" data-section="social" aria-pressed="false">👥 Social</button>
        <button class="nav-button" data-section="dao" aria-pressed="false">🏛️ DAO</button>
        <button class="nav-button" data-section="admin" aria-pressed="false">⚙️ Admin</button>
      </nav>
      
      <!-- Floating Action Buttons -->
      <div class="floating-buttons" id="floatingButtons">
        <button class="floating-toggle" id="floatingToggle">✨</button>
        <div class="floating-menu" id="floatingMenu">
          <button class="floating-btn" id="securityBtn" title="Security Scan">🛡️</button>
          <button class="floating-btn" id="achievementsBtn" title="Achievements">🏆</button>
          <button class="floating-btn" id="settingsBtn" title="Settings">⚙️</button>
          <button class="floating-btn" id="helpBtn" title="Help">❓</button>
        </div>
      </div>
      
      <main class="main-content" role="main">
        <!-- Swap Interface -->
        <div class="swap-container" id="swapInterface">
          <div class="swap-header">
            <h2 class="swap-title">Token Swap</h2>
            <button class="settings-btn" id="settingsBtn">⚙️</button>
          </div>
          
          <div class="token-input" id="fromTokenInput">
            <label class="token-label">From</label>
            <div class="token-input-row">
              <input type="number" placeholder="0.0" id="fromAmount" step="0.000001" />
              <button class="token-select" id="fromTokenSelect">
                <span>SOL</span>
                <span>▼</span>
              </button>
            </div>
            <div class="token-balance" id="fromBalance">Balance: --</div>
          </div>
          
          <div class="swap-arrow">
            <div class="swap-icon" id="swapIcon">⇅</div>
          </div>
          
          <div class="token-input" id="toTokenInput">
            <label class="token-label">To</label>
            <div class="token-input-row">
              <input type="number" placeholder="0.0" id="toAmount" readonly />
              <button class="token-select" id="toTokenSelect">
                <span>USDC</span>
                <span>▼</span>
              </button>
            </div>
            <div class="token-balance" id="toBalance">Balance: --</div>
          </div>
          
          <div class="swap-details" id="swapDetails">
            <div class="detail-row">
              <span class="detail-label">Rate</span>
              <span class="detail-value" id="exchangeRate">--</span>
            </div>
            <div class="detail-row">
              <span class="detail-label">Price Impact</span>
              <span class="detail-value" id="priceImpact">--</span>
            </div>
            <div class="detail-row">
              <span class="detail-label">Minimum Received</span>
              <span class="detail-value" id="minReceived">--</span>
            </div>
            <div class="detail-row">
              <span class="detail-label">Fee</span>
              <span class="detail-value" id="tradingFee">~0.3%</span>
            </div>
          </div>
          
          <!-- Advanced Trading Features -->
          <div class="trading-modes" id="tradingModes">
            <div class="mode-tabs">
              <button class="mode-tab active" data-mode="instant">⚡ Instant</button>
              <button class="mode-tab" data-mode="limit">📊 Limit</button>
              <button class="mode-tab" data-mode="dca">🔄 DCA</button>
            </div>
            
            <!-- Limit Order Panel -->
            <div class="trading-panel" id="limitPanel" style="display: none;">
              <div class="limit-controls">
                <div class="limit-input-group">
                  <label class="limit-label">Target Price</label>
                  <input type="number" id="limitPrice" placeholder="0.0" step="0.000001" />
                  <span class="price-unit">USDC</span>
                </div>
                <div class="limit-input-group">
                  <label class="limit-label">Expires In</label>
                  <select id="limitExpiry">
                    <option value="1h">1 Hour</option>
                    <option value="24h">24 Hours</option>
                    <option value="7d">7 Days</option>
                    <option value="30d">30 Days</option>
                  </select>
                </div>
              </div>
              <div class="limit-info">
                <span class="limit-status" id="limitStatus">Set your target price</span>
              </div>
            </div>
            
            <!-- DCA Panel -->
            <div class="trading-panel" id="dcaPanel" style="display: none;">
              <div class="dca-controls">
                <div class="dca-input-group">
                  <label class="dca-label">Frequency</label>
                  <select id="dcaFrequency">
                    <option value="daily">Daily</option>
                    <option value="weekly">Weekly</option>
                    <option value="monthly">Monthly</option>
                  </select>
                </div>
                <div class="dca-input-group">
                  <label class="dca-label">Duration</label>
                  <select id="dcaDuration">
                    <option value="1w">1 Week</option>
                    <option value="1m">1 Month</option>
                    <option value="3m">3 Months</option>
                    <option value="6m">6 Months</option>
                  </select>
                </div>
              </div>
              <div class="dca-preview">
                <div class="dca-stat">
                  <span>Total Purchases:</span>
                  <span id="dcaTotalPurchases">--</span>
                </div>
                <div class="dca-stat">
                  <span>Amount per Purchase:</span>
                  <span id="dcaAmountPerPurchase">--</span>
                </div>
              </div>
            </div>
          </div>
          
          <button class="swap-button" id="swapButton" disabled>
            Connect Wallet
          </button>
        </div>
        
        <!-- Sidebar -->
        <div class="sidebar">
          <!-- Wallet Card -->
          <div class="sidebar-card">
            <h3>🔗 Wallet</h3>
            <div class="wallet-status" id="walletStatus">
              <button class="wallet-connect-btn" id="connectPhantom">
                👻 Phantom
              </button>
              <button class="wallet-connect-btn" id="connectSolflare">
                🌟 Solflare
              </button>
              
              <div class="wallet-info" id="walletInfo">
                <div><strong>Connected:</strong> <span id="walletName">--</span></div>
                <div class="wallet-address" id="walletAddress">--</div>
                <div class="balance-item">
                  <span>SOL</span>
                  <span id="solBalance">--</span>
                </div>
                <div class="balance-item">
                  <span>USDC</span>
                  <span id="usdcBalance">--</span>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Market Stats -->
          <div class="sidebar-card">
            <h3>📈 Market Stats</h3>
            <div class="stats-grid">
              <div class="stat-item">
                <div class="stat-value" id="totalVolume">$--</div>
                <div class="stat-label">24h Volume</div>
              </div>
              <div class="stat-item">
                <div class="stat-value" id="totalLiquidity">$--</div>
                <div class="stat-label">Total Liquidity</div>
              </div>
              <div class="stat-item">
                <div class="stat-value" id="totalUsers">--</div>
                <div class="stat-label">Active Users</div>
              </div>
              <div class="stat-item">
                <div class="stat-value" id="totalTrades">--</div>
                <div class="stat-label">Total Trades</div>
              </div>
            </div>
          </div>
          
          <!-- Recent Trades -->
          <div class="sidebar-card">
            <h3>🔄 Recent Trades</h3>
            <div id="recentTrades">
              <div class="trade-item">
                <div>
                  <div class="trade-pair">SOL/USDC</div>
                  <div class="trade-amount">12.5 SOL</div>
                </div>
                <div class="trade-time">2m ago</div>
              </div>
              <div class="trade-item">
                <div>
                  <div class="trade-pair">USDC/USDT</div>
                  <div class="trade-amount">1,250 USDC</div>
                </div>
                <div class="trade-time">5m ago</div>
              </div>
              <div class="trade-item">
                <div>
                  <div class="trade-pair">RAY/SOL</div>
                  <div class="trade-amount">85 RAY</div>
                </div>
                <div class="trade-time">8m ago</div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Pool Interface -->
      <div class="pool-interface" id="poolInterface">
        <div class="sidebar-card">
          <h3>🏊 Liquidity Pools</h3>
          <div class="pool-stats">
            <div class="pool-stat">
              <div class="pool-stat-value" id="poolCount">--</div>
              <div class="pool-stat-label">Active Pools</div>
            </div>
            <div class="pool-stat">
              <div class="pool-stat-value" id="poolTVL">$--</div>
              <div class="pool-stat-label">Total TVL</div>
            </div>
            <div class="pool-stat">
              <div class="pool-stat-value" id="poolAPY">--%</div>
              <div class="pool-stat-label">Average APY</div>
            </div>
          </div>
          <p>🚧 Pool creation and management coming soon!</p>
        </div>
      </div>
      
      <!-- Portfolio Interface -->
      <div class="admin-interface" id="portfolioInterface">
        <div class="sidebar-card">
          <h3>📊 Advanced Portfolio Analytics</h3>
          
          <!-- Portfolio Overview -->
          <div class="portfolio-stats">
            <div class="admin-card">
              <h4>💰 Portfolio Value</h4>
              <div class="portfolio-value-display">
                <div class="current-value" id="portfolioValue">$--</div>
                <div class="value-change" id="portfolioChange">--</div>
              </div>
            </div>
            
            <div class="admin-card">
              <h4>📈 Performance Metrics</h4>
              <div class="performance-grid">
                <div class="performance-item">
                  <span class="metric-label">Total Return:</span>
                  <span class="metric-value positive" id="totalReturn">+$--</span>
                </div>
                <div class="performance-item">
                  <span class="metric-label">Win Rate:</span>
                  <span class="metric-value" id="winRate">--%</span>
                </div>
                <div class="performance-item">
                  <span class="metric-label">Avg Trade Size:</span>
                  <span class="metric-value" id="avgTradeSize">$--</span>
                </div>
                <div class="performance-item">
                  <span class="metric-label">Best Trade:</span>
                  <span class="metric-value positive" id="bestTrade">+$--</span>
                </div>
              </div>
            </div>
            
            <!-- Holdings Breakdown -->
            <div class="admin-card">
              <h4>🪙 Token Holdings</h4>
              <div class="holdings-list">
                <div class="holding-item">
                  <div class="holding-token">
                    <div class="token-icon">◎</div>
                    <div class="token-info">
                      <div class="token-name">SOL</div>
                      <div class="token-amount">0.00 SOL</div>
                    </div>
                  </div>
                  <div class="holding-value">
                    <div class="value-usd">$0.00</div>
                    <div class="value-change">+0.00%</div>
                  </div>
                </div>
                <div class="holding-item">
                  <div class="holding-token">
                    <div class="token-icon">$</div>
                    <div class="token-info">
                      <div class="token-name">USDC</div>
                      <div class="token-amount">0.00 USDC</div>
                    </div>
                  </div>
                  <div class="holding-value">
                    <div class="value-usd">$0.00</div>
                    <div class="value-change">+0.00%</div>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Trading History with Advanced Filters -->
            <div class="admin-card">
              <h4>📊 Trading History</h4>
              <div class="trade-filters">
                <select id="timeFilter">
                  <option value="24h">Last 24 Hours</option>
                  <option value="7d">Last 7 Days</option>
                  <option value="30d">Last 30 Days</option>
                  <option value="all">All Time</option>
                </select>
                <select id="typeFilter">
                  <option value="all">All Trades</option>
                  <option value="swaps">Swaps Only</option>
                  <option value="limits">Limit Orders</option>
                  <option value="dca">DCA Orders</option>
                </select>
              </div>
              <div id="tradingHistory">
                <div class="trade-entry advanced">
                  <div class="trade-info">
                    <div class="trade-pair">SOL → USDC</div>
                    <div class="trade-type">Instant Swap</div>
                  </div>
                  <div class="trade-amounts">
                    <div class="trade-amount">1.5 SOL</div>
                    <div class="trade-value">$150.75</div>
                  </div>
                  <div class="trade-meta">
                    <div class="trade-pnl positive">+$2.50</div>
                    <div class="trade-time">2 mins ago</div>
                  </div>
                </div>
                <div class="trade-entry advanced">
                  <div class="trade-info">
                    <div class="trade-pair">USDC → RAY</div>
                    <div class="trade-type">Limit Order</div>
                  </div>
                  <div class="trade-amounts">
                    <div class="trade-amount">50 USDC</div>
                    <div class="trade-value">125 RAY</div>
                  </div>
                  <div class="trade-meta">
                    <div class="trade-pnl negative">-$1.20</div>
                    <div class="trade-time">15 mins ago</div>
                  </div>
                </div>
              </div>
              <button class="admin-btn" id="exportTrades">Export CSV</button>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Social Interface with Epic Cult Wars -->
      <div class="admin-interface" id="socialInterface">
        <!-- Epic Cult Wars Section -->
        <div class="cult-wars-interface">
          <h3 style="text-align: center; font-size: 2rem; color: #ff1493; text-shadow: 0 0 20px rgba(255, 20, 147, 0.8); margin-bottom: 25px;">
            ⚔️ CULT WARS: ETERNAL BATTLE ⚔️
          </h3>
          
          <div class="battle-arena">
            <div class="cult-faction">
              <div class="faction-icon">🌙</div>
              <div class="faction-name">Shadow Cult</div>
              <div class="faction-power">Power: 12,847</div>
              <div class="faction-members">Members: 1,247</div>
              <button class="faction-join-btn">JOIN SHADOWS</button>
            </div>
            
            <div class="battle-vs">
              ⚔️
              <div style="font-size: 0.8rem; margin: 5px 0;">VS</div>
              💀
            </div>
            
            <div class="cult-faction">
              <div class="faction-icon">⚡</div>
              <div class="faction-name">Lightning Cult</div>
              <div class="faction-power">Power: 11,592</div>
              <div class="faction-members">Members: 1,156</div>
              <button class="faction-join-btn">JOIN LIGHTNING</button>
            </div>
          </div>
          
          <div class="battle-progress">
            <div class="progress-header">
              <div class="battle-timer">⏰ Battle ends in: 2d 14h 32m</div>
              <div class="battle-reward">🏆 Reward Pool: 50,000 NOCTURNE</div>
            </div>
            <div class="war-progress-bar">
              <div class="war-progress-fill" style="width: 52.3%"></div>
            </div>
            <div style="display: flex; justify-content: space-between; margin-top: 10px; font-size: 0.9rem; color: #ccc;">
              <span>🌙 Shadow: 52.3%</span>
              <span>⚡ Lightning: 47.7%</span>
            </div>
          </div>
          
          <div class="war-stats">
            <div class="war-stat">
              <div class="war-stat-value">2,403</div>
              <div class="war-stat-label">Total Battles</div>
            </div>
            <div class="war-stat">
              <div class="war-stat-value">847K</div>
              <div class="war-stat-label">Volume Traded</div>
            </div>
            <div class="war-stat">
              <div class="war-stat-value">156</div>
              <div class="war-stat-label">Active Warriors</div>
            </div>
            <div class="war-stat">
              <div class="war-stat-value">75%</div>
              <div class="war-stat-label">Battle Intensity</div>
            </div>
          </div>
          
          <!-- Your War Contribution -->
          <div class="your-contribution">
            <h5>⚔️ Your War Contribution</h5>
            <div class="contribution-stats">
              <div class="contrib-stat">
                <span class="contrib-label">Faction:</span>
                <span class="contrib-value">🌙 Shadow Cult</span>
              </div>
              <div class="contrib-stat">
                <span class="contrib-label">War Rank:</span>
                <span class="contrib-value">Shadow Warrior</span>
              </div>
              <div class="contrib-stat">
                <span class="contrib-label">Battles Won:</span>
                <span class="contrib-value">23/35 (65.7%)</span>
              </div>
              <div class="contrib-stat">
                <span class="contrib-label">Volume Contributed:</span>
                <span class="contrib-value">$12,847</span>
              </div>
              <div class="contrib-stat">
                <span class="contrib-label">War Points:</span>
                <span class="contrib-value">2,456 WP</span>
              </div>
            </div>
            
            <div class="rewards-grid">
              <div class="reward-item">
                <div class="reward-icon">🏆</div>
                <div class="reward-text">Victory Bonus: 500 NOCTURNE</div>
              </div>
              <div class="reward-item">
                <div class="reward-icon">⭐</div>
                <div class="reward-text">Participation: 50 XP</div>
              </div>
              <div class="reward-item">
                <div class="reward-icon">🎖️</div>
                <div class="reward-text">War Badge NFT</div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="sidebar-card">
          <h3>👥 Social Hub</h3>
          
          <!-- User Profile -->
          <div class="admin-card">
            <h4>👤 Your Profile</h4>
            <div class="profile-info">
              <div class="profile-avatar">
                <div class="avatar-circle">
                  <span id="userInitial">A</span>
                </div>
                <div class="rank-badge" id="userRank">L5</div>
              </div>
              <div class="profile-stats">
                <div class="stat-item">
                  <span class="stat-label">Level:</span>
                  <span class="stat-value">5</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">XP:</span>
                  <span class="stat-value">2,456</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Total Trades:</span>
                  <span class="stat-value">89</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Win Rate:</span>
                  <span class="stat-value">72%</span>
                </div>
              </div>
            </div>
            
            <!-- Referral System -->
            <div class="referral-section">
              <h5>🔗 Referral Program</h5>
              <div class="referral-stats">
                <div class="stat-row">
                  <span>Referrals:</span>
                  <span>12 users</span>
                </div>
                <div class="stat-row">
                  <span>Earned:</span>
                  <span>240 NOCTURNE</span>
                </div>
              </div>
              <div class="referral-link">
                <input type="text" value="https://nocturne.swap/ref/ABC123" readonly />
                <button class="admin-btn small">Copy</button>
              </div>
            </div>
          </div>
          
          <!-- Leaderboard -->
          <div class="admin-card">
            <h4>🏆 Leaderboard</h4>
            <div class="leaderboard">
              <div class="leaderboard-entry top-rank">
                <span class="rank">🥇</span>
                <span class="username">ShadowTrader</span>
                <span class="score">15.2K</span>
              </div>
              <div class="leaderboard-entry top-rank">
                <span class="rank">🥈</span>
                <span class="username">LightningQueen</span>
                <span class="score">12.8K</span>
              </div>
              <div class="leaderboard-entry top-rank">
                <span class="rank">🥉</span>
                <span class="username">VoidMaster</span>
                <span class="score">11.1K</span>
              </div>
              <div class="leaderboard-entry">
                <span class="rank">4</span>
                <span class="username">CryptoNinja</span>
                <span class="score">9.5K</span>
              </div>
              <div class="leaderboard-entry current-user">
                <span class="rank">12</span>
                <span class="username">You</span>
                <span class="score">2.5K</span>
              </div>
            </div>
          </div>
          
          <!-- Social Feed -->
          <div class="admin-card">
            <h4>📢 Community Feed</h4>
            <div class="social-feed">
              <div class="feed-item">
                <div class="feed-avatar">S</div>
                <div class="feed-content">
                  <div class="feed-user">ShadowTrader</div>
                  <div class="feed-text">Just hit a massive 500 SOL trade! 🚀</div>
                  <div class="feed-time">2 mins ago</div>
                </div>
              </div>
              <div class="feed-item">
                <div class="feed-avatar">L</div>
                <div class="feed-content">
                  <div class="feed-user">LightningQueen</div>
                  <div class="feed-text">Our faction is crushing it! ⚡</div>
                  <div class="feed-time">5 mins ago</div>
                </div>
              </div>
              <div class="feed-item">
                <div class="feed-avatar">V</div>
                <div class="feed-content">
                  <div class="feed-user">VoidMaster</div>
                  <div class="feed-text">New limit order strategy working perfectly!</div>
                  <div class="feed-time">12 mins ago</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="admin-interface" id="adminInterface">
        <div class="sidebar-card">
          <h3>⚙️ Enhanced Admin Dashboard</h3>
          
          <!-- Real-time Analytics -->
          <div class="admin-controls">
            <div class="admin-card">
              <h4>📊 Live Analytics</h4>
              <div class="analytics-grid">
                <div class="analytics-item">
                  <div class="analytics-value" id="totalUsers">1,247</div>
                  <div class="analytics-label">Total Users</div>
                  <div class="analytics-change positive">+12 today</div>
                </div>
                <div class="analytics-item">
                  <div class="analytics-value" id="totalVolume">$847K</div>
                  <div class="analytics-label">24h Volume</div>
                  <div class="analytics-change positive">+15.3%</div>
                </div>
                <div class="analytics-item">
                  <div class="analytics-value" id="totalTrades">5,239</div>
                  <div class="analytics-label">Total Trades</div>
                  <div class="analytics-change positive">+89 today</div>
                </div>
                <div class="analytics-item">
                  <div class="analytics-value" id="avgTradeSize">$162</div>
                  <div class="analytics-label">Avg Trade</div>
                  <div class="analytics-change negative">-2.1%</div>
                </div>
              </div>
            </div>
            
            <!-- Seasonal Events Management -->
            <div class="admin-card">
              <h4>🎃 Seasonal Events</h4>
              <div class="events-management">
                <div class="current-event">
                  <div class="event-header">
                    <span class="event-name">Halloween Trading Frenzy</span>
                    <span class="event-status active">ACTIVE</span>
                  </div>
                  <div class="event-details">
                    <div class="event-progress">
                      <div class="progress-bar">
                        <div class="progress-fill" style="width: 65%"></div>
                      </div>
                      <span class="progress-text">65% Complete</span>
                    </div>
                    <div class="event-rewards">
                      <span>Bonus XP: 2x</span>
                      <span>Special NFT: 🎃</span>
                    </div>
                  </div>
                  <div class="event-actions">
                    <button class="admin-btn small" id="editEvent">Edit</button>
                    <button class="admin-btn small danger" id="endEvent">End</button>
                  </div>
                </div>
                
                <div class="event-creator">
                  <h5>Create New Event</h5>
                  <input type="text" placeholder="Event Name" id="eventName" />
                  <select id="eventType">
                    <option value="xp_boost">XP Boost</option>
                    <option value="trading_contest">Trading Contest</option>
                    <option value="special_nft">Special NFT Drop</option>
                    <option value="fee_reduction">Fee Reduction</option>
                  </select>
                  <input type="number" placeholder="Duration (hours)" id="eventDuration" />
                  <button class="admin-btn" id="createEvent">Create Event</button>
                </div>
              </div>
            </div>
            
            <!-- Advanced System Controls -->
            <div class="admin-card">
              <h4>🔧 System Controls</h4>
              <div class="system-controls">
                <div class="control-group">
                  <h5>Server Status</h5>
                  <div class="status-display">
                    <span class="status-indicator online" id="serverStatus"></span>
                    <span id="systemStatus">🟢 Online</span>
                    <span class="uptime" id="uptime">99.8% uptime</span>
                  </div>
                  <button class="admin-btn" id="refreshStatus">Refresh Status</button>
                </div>
                
                <div class="control-group">
                  <h5>Feature Toggles</h5>
                  <div class="feature-toggles">
                    <label class="toggle-switch">
                      <input type="checkbox" id="limitOrdersToggle" checked />
                      <span class="toggle-slider"></span>
                      <span class="toggle-label">Limit Orders</span>
                    </label>
                    <label class="toggle-switch">
                      <input type="checkbox" id="dcaToggle" checked />
                      <span class="toggle-slider"></span>
                      <span class="toggle-label">DCA Trading</span>
                    </label>
                    <label class="toggle-switch">
                      <input type="checkbox" id="socialFeedToggle" checked />
                      <span class="toggle-slider"></span>
                      <span class="toggle-label">Social Feed</span>
                    </label>
                  </div>
                </div>
                
                <div class="control-group">
                  <h5>Data Management</h5>
                  <div class="data-controls">
                    <button class="admin-btn" id="exportData">📊 Export Analytics</button>
                    <button class="admin-btn" id="exportUsers">👥 Export Users</button>
                    <button class="admin-btn" id="backupData">💾 Backup Data</button>
                  </div>
                </div>
                
                <div class="control-group danger-zone">
                  <h5>⚠️ Danger Zone</h5>
                  <button class="admin-btn danger" id="maintenanceMode">🚧 Maintenance Mode</button>
                  <button class="admin-btn danger" id="emergencyStop">🛑 Emergency Stop</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Social Features Interface -->
      <div class="social-interface" id="socialInterface" style="display: none;">
        <div class="sidebar-card">
          <h3>👥 Social Hub</h3>
          
          <!-- User Profile -->
          <div class="admin-card">
            <h4>🌙 Cult Profile</h4>
            <div class="profile-info">
              <div class="profile-avatar">
                <div class="avatar-circle" id="userAvatar">🌙</div>
                <div class="rank-badge" id="userRankBadge">Rank 1</div>
              </div>
              <div class="profile-stats">
                <div class="stat-item">
                  <span class="stat-label">XP:</span>
                  <span class="stat-value" id="profileXP">0</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Trades:</span>
                  <span class="stat-value" id="profileTrades">0</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Volume:</span>
                  <span class="stat-value" id="profileVolume">$0</span>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Referral System -->
          <div class="admin-card">
            <h4>🔗 Referral System</h4>
            <div class="referral-section">
              <div class="referral-stats">
                <div class="stat-row">
                  <span>Referred Users:</span>
                  <span id="referralCount">0</span>
                </div>
                <div class="stat-row">
                  <span>Bonus XP Earned:</span>
                  <span id="referralBonus">0</span>
                </div>
              </div>
              <div class="referral-link">
                <input type="text" id="referralLink" readonly value="https://nocturneswap.com?ref=CULT001" />
                <button class="admin-btn" id="copyReferralLink">Copy</button>
              </div>
            </div>
          </div>
          
          <!-- Leaderboard -->
          <div class="admin-card">
            <h4>🏆 Cult Leaderboard</h4>
            <div class="leaderboard">
              <div class="leaderboard-entry top-rank">
                <span class="rank">🥇</span>
                <span class="username">CultMaster</span>
                <span class="score">2,450 XP</span>
              </div>
              <div class="leaderboard-entry">
                <span class="rank">🥈</span>
                <span class="username">MoonTrader</span>
                <span class="score">1,890 XP</span>
              </div>
              <div class="leaderboard-entry">
                <span class="rank">🥉</span>
                <span class="username">DegenKing</span>
                <span class="score">1,650 XP</span>
              </div>
              <div class="leaderboard-entry current-user">
                <span class="rank">#47</span>
                <span class="username">You</span>
                <span class="score" id="leaderboardUserXP">0 XP</span>
              </div>
            </div>
          </div>
          
          <!-- Social Feed -->
          <div class="admin-card">
            <h4>📢 Cult Activity</h4>
            <div class="social-feed">
              <div class="feed-item">
                <div class="feed-avatar">🌙</div>
                <div class="feed-content">
                  <div class="feed-user">CultMaster</div>
                  <div class="feed-text">Just swapped 10 SOL! 🚀</div>
                  <div class="feed-time">2 mins ago</div>
                </div>
              </div>
              <div class="feed-item">
                <div class="feed-avatar">⭐</div>
                <div class="feed-content">
                  <div class="feed-user">MoonTrader</div>
                  <div class="feed-text">Reached Rank 5! 👑</div>
                  <div class="feed-time">5 mins ago</div>
                </div>
              </div>
              <div class="feed-item">
                <div class="feed-avatar">💎</div>
                <div class="feed-content">
                  <div class="feed-user">DegenKing</div>
                  <div class="feed-text">New achievement unlocked!</div>
                  <div class="feed-time">10 mins ago</div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Cult Wars - Competitive Feature -->
          <div class="admin-card">
            <h4>⚔️ Cult Wars</h4>
            <div class="cult-wars">
              <div class="current-battle">
                <div class="battle-header">
                  <span class="battle-title">Weekly Trading Battle</span>
                  <span class="battle-timer" id="battleTimer">2d 14h left</span>
                </div>
                <div class="battle-teams">
                  <div class="team moon-cult">
                    <div class="team-name">🌙 Moon Cult</div>
                    <div class="team-progress">
                      <div class="progress-bar team-bar">
                        <div class="progress-fill moon" style="width: 65%"></div>
                      </div>
                      <span class="team-score">$2.4M Volume</span>
                    </div>
                    <div class="team-members">847 members</div>
                  </div>
                  <div class="vs-divider">VS</div>
                  <div class="team degen-army">
                    <div class="team-name">🦍 Degen Army</div>
                    <div class="team-progress">
                      <div class="progress-bar team-bar">
                        <div class="progress-fill degen" style="width: 58%"></div>
                      </div>
                      <span class="team-score">$2.1M Volume</span>
                    </div>
                    <div class="team-members">723 members</div>
                  </div>
                </div>
                <div class="battle-rewards">
                  <h5>🏆 Battle Rewards</h5>
                  <div class="rewards-grid">
                    <div class="reward-item">
                      <span class="reward-icon">👑</span>
                      <span class="reward-text">Exclusive Badge</span>
                    </div>
                    <div class="reward-item">
                      <span class="reward-icon">💎</span>
                      <span class="reward-text">2x XP Weekend</span>
                    </div>
                    <div class="reward-item">
                      <span class="reward-icon">🎁</span>
                      <span class="reward-text">Mystery NFT</span>
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="your-contribution">
                <h5>Your Contribution</h5>
                <div class="contribution-stats">
                  <div class="contrib-stat">
                    <span class="contrib-label">Team:</span>
                    <span class="contrib-value">🌙 Moon Cult</span>
                  </div>
                  <div class="contrib-stat">
                    <span class="contrib-label">Volume:</span>
                    <span class="contrib-value" id="userBattleVolume">$0</span>
                  </div>
                  <div class="contrib-stat">
                    <span class="contrib-label">Rank:</span>
                    <span class="contrib-value" id="userBattleRank">#--</span>
                  </div>
                </div>
                <button class="admin-btn cult-btn" id="switchTeam">Switch Team</button>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- DAO Governance Interface with Epic Visuals -->
      <div class="admin-interface" id="daoInterface">
        <div class="sidebar-card">
          <h3 style="text-align: center; font-size: 1.8rem; color: #ff1493; text-shadow: 0 0 15px rgba(255, 20, 147, 0.8); margin-bottom: 20px;">
            🏛️ DAO GOVERNANCE CHAMBER 🏛️
          </h3>
          
          <!-- Voting Power with Epic Styling -->
          <div class="admin-card" style="background: linear-gradient(145deg, rgba(0, 0, 0, 0.95), rgba(15, 15, 15, 0.9)); border: 2px solid rgba(255, 20, 147, 0.4); border-radius: 20px; padding: 25px;">
            <h4 style="color: #ff69b4; text-shadow: 0 0 10px rgba(255, 20, 147, 0.6);">⚡ Your Voting Power</h4>
            <div class="voting-power">
              <div class="power-circle" style="background: conic-gradient(rgba(255, 20, 147, 0.8), rgba(139, 0, 139, 0.6), rgba(255, 20, 147, 0.8)); border: 3px solid rgba(255, 20, 147, 0.5); box-shadow: 0 0 30px rgba(255, 20, 147, 0.4);">
                <div class="power-value" id="votingPower" style="font-size: 1.8rem; font-weight: 700; color: #fff; text-shadow: 0 0 10px rgba(255, 20, 147, 0.8);">2,456</div>
                <div class="power-label" style="font-size: 0.8rem; color: #ff69b4;">VOTES</div>
              </div>
              <div class="power-breakdown">
                <div class="power-source" style="color: #e0e0e0; margin-bottom: 8px;">
                  <span>🪙 Token Holdings:</span>
                  <span id="tokenVotes" style="color: #ff69b4; font-weight: 600;">1,847</span>
                </div>
                <div class="power-source" style="color: #e0e0e0; margin-bottom: 8px;">
                  <span>⭐ Cult Rank Bonus:</span>
                  <span id="rankVotes" style="color: #ff69b4; font-weight: 600;">456</span>
                </div>
                <div class="power-source" style="color: #e0e0e0; margin-bottom: 8px;">
                  <span>🔥 Activity Bonus:</span>
                  <span id="activityVotes" style="color: #ff69b4; font-weight: 600;">153</span>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Active Proposals with Gaming-Tier Visuals -->
          <div class="admin-card" style="background: linear-gradient(145deg, rgba(0, 0, 0, 0.95), rgba(15, 15, 15, 0.9)); border: 2px solid rgba(255, 20, 147, 0.4); border-radius: 20px; padding: 25px;">
            <h4 style="color: #ff69b4; text-shadow: 0 0 10px rgba(255, 20, 147, 0.6);">📋 Active Proposals</h4>
            <div class="proposals-list">
              <div class="proposal-item" style="background: rgba(255, 255, 255, 0.03); border: 2px solid rgba(255, 20, 147, 0.3); border-radius: 15px; padding: 20px; margin-bottom: 20px; transition: all 0.3s ease;">
                <div class="proposal-header">
                  <div class="proposal-title" style="color: #fff; font-weight: 700; font-size: 1.1rem;">🎯 Reduce Trading Fees</div>
                  <div class="proposal-status active" style="background: linear-gradient(45deg, #4caf50, #45a049); padding: 4px 12px; border-radius: 12px; font-size: 0.8rem; font-weight: 700;">ACTIVE</div>
                </div>
                <div class="proposal-description" style="color: #ccc; margin: 10px 0; font-size: 0.9rem;">Proposal to reduce trading fees from 0.3% to 0.25% for all swaps</div>
                <div class="proposal-stats">
                  <div class="vote-progress">
                    <div class="vote-bar" style="background: rgba(255, 255, 255, 0.1); border-radius: 6px; overflow: hidden; margin-bottom: 8px;">
                      <div class="vote-fill yes" style="background: linear-gradient(90deg, #4caf50, #66bb6a); height: 12px; width: 65%; border-radius: 6px; box-shadow: 0 0 15px rgba(76, 175, 80, 0.4);"></div>
                    </div>
                    <div class="vote-counts" style="display: flex; justify-content: space-between; font-size: 0.8rem;">
                      <span class="yes-votes" style="color: #4caf50; font-weight: 600;">👍 65% (1,250 votes)</span>
                      <span class="no-votes" style="color: #f44336; font-weight: 600;">👎 35% (675 votes)</span>
                    </div>
                  </div>
                  <div class="proposal-time" style="color: #ff69b4; font-size: 0.8rem; margin: 10px 0;">⏰ 2 days left</div>
                </div>
                <div class="proposal-actions" style="display: flex; gap: 10px;">
                  <button class="vote-btn yes" style="background: linear-gradient(45deg, #4caf50, #45a049); color: white; border: none; padding: 8px 16px; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s ease;">Vote Yes</button>
                  <button class="vote-btn no" style="background: linear-gradient(45deg, #f44336, #d32f2f); color: white; border: none; padding: 8px 16px; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s ease;">Vote No</button>
                </div>
              </div>
              
              <div class="proposal-item" style="background: rgba(255, 255, 255, 0.03); border: 2px solid rgba(255, 20, 147, 0.3); border-radius: 15px; padding: 20px; margin-bottom: 20px; transition: all 0.3s ease;">
                <div class="proposal-header">
                  <div class="proposal-title" style="color: #fff; font-weight: 700; font-size: 1.1rem;">🚀 Add New Token Pairs</div>
                  <div class="proposal-status active" style="background: linear-gradient(45deg, #4caf50, #45a049); padding: 4px 12px; border-radius: 12px; font-size: 0.8rem; font-weight: 700;">ACTIVE</div>
                </div>
                <div class="proposal-description" style="color: #ccc; margin: 10px 0; font-size: 0.9rem;">Add support for BONK, WIF, and PEPE trading pairs</div>
                <div class="proposal-stats">
                  <div class="vote-progress">
                    <div class="vote-bar" style="background: rgba(255, 255, 255, 0.1); border-radius: 6px; overflow: hidden; margin-bottom: 8px;">
                      <div class="vote-fill yes" style="background: linear-gradient(90deg, #4caf50, #66bb6a); height: 12px; width: 78%; border-radius: 6px; box-shadow: 0 0 15px rgba(76, 175, 80, 0.4);"></div>
                    </div>
                    <div class="vote-counts" style="display: flex; justify-content: space-between; font-size: 0.8rem;">
                      <span class="yes-votes" style="color: #4caf50; font-weight: 600;">👍 78% (1,890 votes)</span>
                      <span class="no-votes" style="color: #f44336; font-weight: 600;">👎 22% (532 votes)</span>
                    </div>
                  </div>
                  <div class="proposal-time" style="color: #ff69b4; font-size: 0.8rem; margin: 10px 0;">⏰ 5 days left</div>
                </div>
                <div class="proposal-actions" style="display: flex; gap: 10px;">
                  <button class="vote-btn yes" style="background: linear-gradient(45deg, #4caf50, #45a049); color: white; border: none; padding: 8px 16px; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s ease;">Vote Yes</button>
                  <button class="vote-btn no" style="background: linear-gradient(45deg, #f44336, #d32f2f); color: white; border: none; padding: 8px 16px; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s ease;">Vote No</button>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Create Proposal with Epic Styling -->
          <div class="admin-card" style="background: linear-gradient(145deg, rgba(0, 0, 0, 0.95), rgba(15, 15, 15, 0.9)); border: 2px solid rgba(255, 20, 147, 0.4); border-radius: 20px; padding: 25px;">
            <h4 style="color: #ff69b4; text-shadow: 0 0 10px rgba(255, 20, 147, 0.6);">✍️ Create Proposal</h4>
            <div class="proposal-form">
              <input type="text" placeholder="Proposal Title" id="proposalTitle" style="width: 100%; padding: 12px; margin-bottom: 15px; background: rgba(255, 255, 255, 0.1); border: 2px solid rgba(255, 20, 147, 0.3); border-radius: 10px; color: white; font-size: 1rem; transition: all 0.3s ease;" />
              <textarea placeholder="Proposal Description" id="proposalDescription" rows="4" style="width: 100%; padding: 12px; margin-bottom: 15px; background: rgba(255, 255, 255, 0.1); border: 2px solid rgba(255, 20, 147, 0.3); border-radius: 10px; color: white; font-size: 1rem; resize: vertical; transition: all 0.3s ease;"></textarea>
              <button class="admin-btn" id="createProposal" style="background: linear-gradient(145deg, rgba(255, 20, 147, 0.9), rgba(139, 0, 139, 0.7)); color: white; border: 2px solid rgba(255, 20, 147, 0.6); border-radius: 12px; padding: 12px 24px; font-weight: 700; cursor: pointer; transition: all 0.3s ease; text-transform: uppercase; letter-spacing: 1px;">Submit Proposal</button>
              <div class="form-note" style="font-size: 0.8rem; color: #999; margin-top: 10px;">Requires 100 XP to create proposals</div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Enhanced Admin Interface -->
      <div class="admin-interface" id="adminInterface">
        <div class="sidebar-card">
          <h3 style="text-align: center; font-size: 1.8rem; color: #ff1493; text-shadow: 0 0 15px rgba(255, 20, 147, 0.8); margin-bottom: 20px;">⚙️ ADMIN CONTROL CENTER ⚙️</h3>
    </div>

    <script>
      console.log('🌙 NocturneSwap Professional DEX - Starting...');
      
      // Global State
      let app = {
        wallet: {
          connected: false,
          provider: null,
          publicKey: null,
          balances: {}
        },
        tokens: {},
        pools: {},
        settings: {
          slippage: 1,
          deadline: 20
        },
        currentSection: 'swap',
        connection: null,
        isLoading: false
      };
      
      // Token Configuration
      const TOKENS = {
        SOL: {
          symbol: 'SOL',
          name: 'Solana',
          decimals: 9,
          mint: 'So11111111111111111111111111111111111111112',
          logo: '☀️'
        },
        USDC: {
          symbol: 'USDC',
          name: 'USD Coin',
          decimals: 6,
          mint: 'EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v',
          logo: '💵'
        },
        USDT: {
          symbol: 'USDT',
          name: 'Tether USD',
          decimals: 6,
          mint: 'Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB',
          logo: '💴'
        },
        RAY: {
          symbol: 'RAY',
          name: 'Raydium',
          decimals: 6,
          mint: '4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R',
          logo: '🌊'
        }
      };
      
      // Initialize Solana Connection
      function initializeSolana() {
        try {
          app.connection = new solanaWeb3.Connection(
            'https://api.mainnet-beta.solana.com',
            'confirmed'
          );
          console.log('✅ Solana connection initialized');
        } catch (error) {
          console.error('❌ Failed to initialize Solana connection:', error);
        }
      }
      
      // Wallet Functions
      async function connectWallet(provider) {
        try {
          setLoadingState(true);
          
          let walletProvider;
          if (provider === 'phantom') {
            if (!window.solana?.isPhantom) {
              updateStatus('Phantom wallet not found. Please install Phantom.');
              window.open('https://phantom.app/', '_blank');
              return;
            }
            walletProvider = window.solana;
          } else if (provider === 'solflare') {
            if (!window.solflare?.isSolflare) {
              updateStatus('Solflare wallet not found. Please install Solflare.');
              window.open('https://solflare.com/', '_blank');
              return;
            }
            walletProvider = window.solflare;
          }
          
          const response = await walletProvider.connect();
          
          app.wallet.connected = true;
          app.wallet.provider = walletProvider;
          app.wallet.publicKey = response.publicKey;
          
          updateWalletUI(provider === 'phantom' ? 'Phantom' : 'Solflare');
          await updateBalances();
          
          console.log(`✅ ${provider} wallet connected:`, response.publicKey.toString());
          
        } catch (error) {
          console.error(`❌ Failed to connect ${provider}:`, error);
          updateStatus(`Failed to connect ${provider} wallet`);
        } finally {
          setLoadingState(false);
        }
      }
      
      // Update Wallet UI
      function updateWalletUI(walletName) {
        document.getElementById('walletName').textContent = walletName;
        document.getElementById('walletAddress').textContent = 
          app.wallet.publicKey.toString().slice(0, 4) + '...' + 
          app.wallet.publicKey.toString().slice(-4);
        
        document.getElementById('walletStatus').style.display = 'none';
        document.getElementById('walletInfo').style.display = 'block';
        
        document.getElementById('swapButton').disabled = false;
        document.getElementById('swapButton').textContent = 'Review Swap';
        
        updateStatus('Wallet connected successfully!');
      }
      
      // Update Token Balances
      async function updateBalances() {
        if (!app.connection || !app.wallet.publicKey) return;
        
        try {
          // Get SOL balance
          const solBalance = await app.connection.getBalance(app.wallet.publicKey);
          const solAmount = (solBalance / solanaWeb3.LAMPORTS_PER_SOL).toFixed(4);
          
          app.wallet.balances.SOL = solAmount;
          document.getElementById('solBalance').textContent = `${solAmount} SOL`;
          
          // Mock other token balances (in production, would fetch real token accounts)
          app.wallet.balances.USDC = '1,234.56';
          app.wallet.balances.USDT = '567.89';
          app.wallet.balances.RAY = '12.34';
          
          document.getElementById('usdcBalance').textContent = `${app.wallet.balances.USDC} USDC`;
          
          updateTokenBalances();
          
        } catch (error) {
          console.error('❌ Failed to update balances:', error);
        }
      }
      
      // Update Token Balance Display
      function updateTokenBalances() {
        const fromToken = document.getElementById('fromTokenSelect').querySelector('span').textContent;
        const toToken = document.getElementById('toTokenSelect').querySelector('span').textContent;
        
        const fromBalance = app.wallet.balances[fromToken] || '0';
        const toBalance = app.wallet.balances[toToken] || '0';
        
        document.getElementById('fromBalance').textContent = `Balance: ${fromBalance} ${fromToken}`;
        document.getElementById('toBalance').textContent = `Balance: ${toBalance} ${toToken}`;
      }
      
      // Calculate Swap
      async function calculateSwap() {
        const fromAmount = parseFloat(document.getElementById('fromAmount').value) || 0;
        const fromToken = document.getElementById('fromTokenSelect').querySelector('span').textContent;
        const toToken = document.getElementById('toTokenSelect').querySelector('span').textContent;
        
        if (fromAmount <= 0) {
          document.getElementById('toAmount').value = '';
          updateSwapDetails(0, fromToken, toToken);
          return;
        }
        
        try {
          // Mock price calculation (in production, would use Jupiter API)
          const mockPrices = {
            'SOL/USDC': 142.35,
            'USDC/SOL': 1 / 142.35,
            'SOL/USDT': 142.10,
            'USDT/SOL': 1 / 142.10,
            'USDC/USDT': 0.999,
            'USDT/USDC': 1.001,
            'RAY/SOL': 0.0234,
            'SOL/RAY': 1 / 0.0234
          };
          
          const pair = `${fromToken}/${toToken}`;
          const rate = mockPrices[pair] || 1;
          const priceImpact = Math.min(fromAmount * 0.01, 5); // Mock price impact
          const adjustedRate = rate * (1 - priceImpact / 100);
          const toAmount = (fromAmount * adjustedRate).toFixed(6);
          
          document.getElementById('toAmount').value = toAmount;
          updateSwapDetails(fromAmount, fromToken, toToken, rate, priceImpact, toAmount);
          
        } catch (error) {
          console.error('❌ Failed to calculate swap:', error);
          updateStatus('Error calculating swap rate');
        }
      }
      
      // Update Swap Details
      function updateSwapDetails(fromAmount, fromToken, toToken, rate = 0, priceImpact = 0, toAmount = 0) {
        if (fromAmount <= 0) {
          document.getElementById('exchangeRate').textContent = '--';
          document.getElementById('priceImpact').textContent = '--';
          document.getElementById('minReceived').textContent = '--';
          return;
        }
        
        document.getElementById('exchangeRate').textContent = 
          `1 ${fromToken} = ${rate.toFixed(4)} ${toToken}`;
        
        const impactElement = document.getElementById('priceImpact');
        impactElement.textContent = `${priceImpact.toFixed(2)}%`;
        impactElement.className = 'detail-value ' + (priceImpact > 3 ? 'negative' : priceImpact > 1 ? 'neutral' : 'positive');
        
        const minReceived = (toAmount * (1 - app.settings.slippage / 100)).toFixed(6);
        document.getElementById('minReceived').textContent = `${minReceived} ${toToken}`;
        
        if (app.wallet.connected) {
          updateStatus(`Ready to swap ${fromAmount} ${fromToken} for ~${toAmount} ${toToken}`);
        }
      }
      
      // Perform Swap
      async function performSwap() {
        if (!app.wallet.connected) {
          updateStatus('Please connect your wallet first');
          return;
        }
        
        const fromAmount = parseFloat(document.getElementById('fromAmount').value) || 0;
        const fromToken = document.getElementById('fromTokenSelect').querySelector('span').textContent;
        const toToken = document.getElementById('toTokenSelect').querySelector('span').textContent;
        
        if (fromAmount <= 0) {
          updateStatus('Please enter a valid amount');
          return;
        }
        
        try {
          setLoadingState(true);
          document.getElementById('swapButton').classList.add('loading');
          updateStatus('Preparing swap transaction...');
          
          // Simulate transaction processing
          await new Promise(resolve => setTimeout(resolve, 2000));
          
          // In production, this would:
          // 1. Get Jupiter quote
          // 2. Create swap transaction
          // 3. Sign and send transaction
          // 4. Wait for confirmation
          
          updateStatus('Swap completed successfully! 🎉');
          
          // Reset form
          document.getElementById('fromAmount').value = '';
          document.getElementById('toAmount').value = '';
          updateSwapDetails(0, fromToken, toToken);
          
          // Update balances
          await updateBalances();
          
        } catch (error) {
          console.error('❌ Swap failed:', error);
          updateStatus('Swap failed. Please try again.');
        } finally {
          setLoadingState(false);
          document.getElementById('swapButton').classList.remove('loading');
        }
      }
      
      // Token Selection
      function selectToken(type) {
        const tokenList = Object.keys(TOKENS);
        const currentElement = document.getElementById(type === 'from' ? 'fromTokenSelect' : 'toTokenSelect');
        const currentToken = currentElement.querySelector('span').textContent;
        const currentIndex = tokenList.indexOf(currentToken);
        const nextIndex = (currentIndex + 1) % tokenList.length;
        const nextToken = tokenList[nextIndex];
        
        currentElement.querySelector('span').textContent = nextToken;
        updateTokenBalances();
        calculateSwap();
      }
      
      // Swap Tokens
      function swapTokens() {
        const fromElement = document.getElementById('fromTokenSelect').querySelector('span');
        const toElement = document.getElementById('toTokenSelect').querySelector('span');
        
        const fromToken = fromElement.textContent;
        const toToken = toElement.textContent;
        
        fromElement.textContent = toToken;
        toElement.textContent = fromToken;
        
        const fromAmount = document.getElementById('fromAmount').value;
        const toAmount = document.getElementById('toAmount').value;
        
        document.getElementById('fromAmount').value = toAmount;
        document.getElementById('toAmount').value = fromAmount;
        
        updateTokenBalances();
        calculateSwap();
      }
      
      // Navigation
      function switchSection(section) {
        // Hide all sections
        document.getElementById('swapInterface').style.display = 'none';
        document.getElementById('poolInterface').style.display = 'none';
        document.getElementById('portfolioInterface').style.display = 'none';
        document.getElementById('socialInterface').style.display = 'none';
        document.getElementById('daoInterface').style.display = 'none';
        document.getElementById('adminInterface').style.display = 'none';
        
        // Show selected section
        if (section === 'swap') {
          document.getElementById('swapInterface').style.display = 'block';
        } else if (section === 'pools') {
          document.getElementById('poolInterface').style.display = 'block';
        } else if (section === 'portfolio') {
          document.getElementById('portfolioInterface').style.display = 'block';
          updateTradingHistory();
        } else if (section === 'social') {
          document.getElementById('socialInterface').style.display = 'block';
          updateSocialData();
        } else if (section === 'dao') {
          document.getElementById('daoInterface').style.display = 'block';
          updateDAOData();
        } else if (section === 'admin') {
          document.getElementById('adminInterface').style.display = 'block';
        }
        
        // Update navigation
        document.querySelectorAll('.nav-button').forEach(btn => {
          btn.classList.remove('active');
          btn.setAttribute('aria-pressed', 'false');
        });
        const activeBtn = document.querySelector(`[data-section="${section}"]`);
        activeBtn.classList.add('active');
        activeBtn.setAttribute('aria-pressed', 'true');
        
        app.currentSection = section;
        updateStatus(`Switched to ${section} section`);
      }
      
      // Utility Functions
      function setLoadingState(loading) {
        app.isLoading = loading;
        if (loading) {
          document.getElementById('swapButton').disabled = true;
        } else {
          document.getElementById('swapButton').disabled = !app.wallet.connected;
        }
      }
      
      function updateStatus(message) {
        console.log('Status:', message);
        // In production, would update a status display
      }
      
      // Enhanced Mock Data Updates with Realistic Values
      function updateMarketStats() {
        // Enhanced market stats with realistic varied data
        const marketStats = [
          { id: 'totalVolume', label: "24h Volume", value: "$1.24M", icon: "📊" },
          { id: 'totalLiquidity', label: "Total Liquidity", value: "$8.7M", icon: "💧" },
          { id: 'totalUsers', label: "Active Users", value: "1,032", icon: "👤" },
          { id: 'totalTrades', label: "Total Trades", value: "8,472", icon: "🔁" }
        ];

        // Add some randomness to make it feel live
        const volumeVariation = (Math.random() * 0.2 - 0.1); // ±10%
        const baseVolume = 1240000;
        const newVolume = baseVolume * (1 + volumeVariation);
        
        const stats = {
          totalVolume: '$' + (newVolume / 1000000).toFixed(2) + 'M',
          totalLiquidity: '$' + (8.7 + (Math.random() * 0.6 - 0.3)).toFixed(1) + 'M',
          totalUsers: (1032 + Math.floor(Math.random() * 20 - 10)).toString(),
          totalTrades: (8472 + Math.floor(Math.random() * 100 - 50)).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',')
        };
        
        Object.entries(stats).forEach(([key, value]) => {
          const element = document.getElementById(key);
          if (element) {
            element.textContent = value;
            // Add subtle animation on update
            element.style.transform = 'scale(1.05)';
            setTimeout(() => {
              element.style.transform = 'scale(1)';
            }, 200);
          }
        });
      }
      
      // Enhanced Recent Trades with Diverse Data
      function updateRecentTrades() {
        const mockTrades = [
          { wallet: "0xM0ON...cult", pair: "NCTP/SOL", amount: "420.00 NCTP", time: "just now", type: "buy" },
          { wallet: "0xDEAD...42", pair: "SOL/USDC", amount: "17.3 SOL", time: "1m ago", type: "sell" },
          { wallet: "0xABCD...1234", pair: "FUD/USDC", amount: "8,888 FUD", time: "2m ago", type: "buy" },
          { wallet: "0xXAPE...69", pair: "PEPE/SOL", amount: "1.2B PEPE", time: "10m ago", type: "sell" },
          { wallet: "0xCHAD...XP", pair: "SOL/USDC", amount: "0.88 SOL", time: "15m ago", type: "buy" },
          { wallet: "0xG0AT...420", pair: "NCTP/USDC", amount: "3,300 NCTP", time: "30m ago", type: "sell" }
        ];
        
        // Add some randomness to make it feel live
        const shuffledTrades = [...mockTrades];
        // Randomly update first trade time
        if (Math.random() > 0.7) {
          shuffledTrades[0].time = "just now";
        }
        
        const recentTradesElement = document.getElementById('recentTrades');
        if (recentTradesElement) {
          recentTradesElement.innerHTML = shuffledTrades.slice(0, 6).map(trade => `
            <div class="trade-item" style="transition: all 0.3s ease;">
              <div>
                <div class="trade-pair">${trade.pair} ${trade.type === 'buy' ? '🔺' : '🔻'}</div>
                <div class="trade-amount" style="font-family: monospace;">${trade.amount}</div>
              </div>
              <div class="trade-time" style="color: ${trade.time === 'just now' ? '#4ade80' : '#a0a0a0'};">${trade.time}</div>
            </div>
          `).join('');
        }
      }
      // Enhanced Trading History with Buy/Sell + Profit/Loss
      function updateTradingHistory() {
        const tradeHistory = [
          { type: "Buy", token: "NCTP", amount: "1,000", pnl: "+12.3%", date: "2025-07-11 01:05", profit: true },
          { type: "Sell", token: "SOL", amount: "50", pnl: "-3.4%", date: "2025-07-10 23:44", profit: false },
          { type: "Buy", token: "FUD", amount: "6,900", pnl: "+8.9%", date: "2025-07-10 21:17", profit: true },
          { type: "Sell", token: "PEPE", amount: "2.3M", pnl: "+4.6%", date: "2025-07-10 17:55", profit: true },
          { type: "Buy", token: "USDC", amount: "900", pnl: "0%", date: "2025-07-09 11:20", profit: null },
          { type: "Sell", token: "NCTP", amount: "500", pnl: "-12.5%", date: "2025-07-08 19:02", profit: false }
        ];
        
        const historyElement = document.getElementById('tradingHistory');
        if (historyElement) {
          historyElement.innerHTML = tradeHistory.map(trade => {
            const pnlColor = trade.profit === null ? '#a0a0a0' : (trade.profit ? '#4ade80' : '#f87171');
            const typeIcon = trade.type === 'Buy' ? '🔺' : '🔻';
            const pnlIcon = trade.profit === null ? '' : (trade.profit ? ' 📈' : ' 📉');
            
            return `
              <div class="trade-entry" style="transition: all 0.3s ease;">
                <div style="display: flex; align-items: center; gap: 8px;">
                  <span style="font-weight: 700;">${typeIcon} ${trade.type}</span>
                  <span style="font-family: monospace; color: #e0e0e0;">${trade.token}</span>
                </div>
                <div style="text-align: center;">
                  <div style="font-family: monospace; font-weight: 600;">${trade.amount}</div>
                  <div style="font-size: 0.8rem; color: #a0a0a0;">${trade.date.split(' ')[1]}</div>
                </div>
                <div style="text-align: right;">
                  <div style="color: ${pnlColor}; font-weight: 700;">${trade.pnl}${pnlIcon}</div>
                  <div style="font-size: 0.8rem; color: #a0a0a0;">${trade.date.split(' ')[0]}</div>
                </div>
              </div>
            `;
          }).join('');
        }

        // Update portfolio stats
        const portfolioValue = document.getElementById('portfolioValue');
        const portfolioChange = document.getElementById('portfolioChange');
        if (portfolioValue) portfolioValue.textContent = '$' + (Math.random() * 10000 + 1000).toFixed(2);
        if (portfolioChange) {
          const change = (Math.random() - 0.5) * 20;
          portfolioChange.textContent = (change > 0 ? '+' : '') + change.toFixed(2) + '%';
          portfolioChange.style.color = change > 0 ? '#10b981' : '#ef4444';
        }
      }
      
      // Initialize App with Enhanced Loading
      function initializeApp() {
        try {
          // Enhanced loading sequence
          const loadingSteps = [
            { progress: 10, text: "Connecting to the void..." },
            { progress: 25, text: "Summoning Jupiter integration..." },
            { progress: 40, text: "Awakening Solana spirits..." },
            { progress: 60, text: "Channeling mystical energies..." },
            { progress: 80, text: "Preparing ritual chamber..." },
            { progress: 95, text: "Opening dimensional portal..." },
            { progress: 100, text: "Welcome to NocturneSwap..." }
          ];
          
          let stepIndex = 0;
          const progressFill = document.getElementById('progressFill');
          const progressText = document.getElementById('progressText');
          
          const updateProgress = () => {
            if (stepIndex < loadingSteps.length) {
              const step = loadingSteps[stepIndex];
              progressFill.style.width = step.progress + '%';
              progressText.textContent = step.text;
              stepIndex++;
              setTimeout(updateProgress, 300);
            } else {
              // Complete initialization
              completeInitialization();
            }
          };
          
          updateProgress();
          
        } catch (error) {
          console.error('❌ Failed to initialize app:', error);
        }
      }
      
      function completeInitialization() {
        try {
          initializeSolana();
          
          // Register Service Worker for PWA
          if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('./sw.js')
              .then((registration) => {
                console.log('🌙 Service Worker registered successfully:', registration.scope);
                
                // Check for app updates
                registration.addEventListener('updatefound', () => {
                  const newWorker = registration.installing;
                  newWorker.addEventListener('statechange', () => {
                    if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                      // Show update notification
                      showUpdateNotification();
                    }
                  });
                });
              })
              .catch((error) => {
                console.error('❌ Service Worker registration failed:', error);
              });
          }
          
          // PWA Install Prompt
          let deferredPrompt;
          window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            showInstallButton();
          });
          
          // Event listeners
          document.getElementById('connectPhantom').addEventListener('click', () => connectWallet('phantom'));
          document.getElementById('connectSolflare').addEventListener('click', () => connectWallet('solflare'));
          
          document.getElementById('fromAmount').addEventListener('input', calculateSwap);
          document.getElementById('fromTokenSelect').addEventListener('click', () => selectToken('from'));
          document.getElementById('toTokenSelect').addEventListener('click', () => selectToken('to'));
          document.getElementById('swapIcon').addEventListener('click', swapTokens);
          document.getElementById('swapButton').addEventListener('click', performSwap);
          
          // Navigation
          document.querySelectorAll('.nav-button').forEach(button => {
            button.addEventListener('click', () => {
              const section = button.getAttribute('data-section');
              switchSection(section);
            });
            
            // Add keyboard navigation
            button.addEventListener('keydown', (e) => {
              if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                const section = button.getAttribute('data-section');
                switchSection(section);
              }
            });
          });
          
          // Admin functions
          document.getElementById('refreshStatus').addEventListener('click', () => {
            updateStatus('System status refreshed');
          });
          
          document.getElementById('exportData').addEventListener('click', () => {
            updateStatus('Analytics data exported');
          });
          
          // Gaming-Tier Enhancements Event Listeners
          initializeGamingFeatures();
          
          // Initialize enhanced mock data with diverse, realistic values
          try {
            updateMarketStats();
          } catch (e) { console.warn('Market stats update failed:', e); }
          
          try {
            updateRecentTrades();
          } catch (e) { console.warn('Recent trades update failed:', e); }
          
          try {
            updateTradingHistory();
          } catch (e) { console.warn('Trading history update failed:', e); }
          
          try {
            updateSocialFeed();
          } catch (e) { console.warn('Social feed update failed:', e); }
          
          try {
            updatePoolOverview();
          } catch (e) { console.warn('Pool overview update failed:', e); }
          
          // Update market stats and other data periodically
          setInterval(() => {
            try { updateMarketStats(); } catch (e) { console.warn('Market stats interval failed:', e); }
          }, 30000);
          setInterval(() => {
            try { updateRecentTrades(); } catch (e) { console.warn('Recent trades interval failed:', e); }
          }, 45000);
          setInterval(() => {
            try { updateSocialFeed(); } catch (e) { console.warn('Social feed interval failed:', e); }
          }, 60000);
          setInterval(() => {
            try { updatePoolOverview(); } catch (e) { console.warn('Pool overview interval failed:', e); }
          }, 120000);
          
          // Hide loading screen
          document.getElementById('loadingScreen').style.display = 'none';
          document.getElementById('appContainer').style.display = 'block';
          
          console.log('✅ NocturneSwap Professional DEX initialized');
          
        } catch (error) {
          console.error('❌ Failed to complete initialization:', error);
          // Still hide loading screen even if there are errors
          document.getElementById('loadingScreen').style.display = 'none';
          document.getElementById('appContainer').style.display = 'block';
        }
      }
      
      // Gaming-Tier Enhancement Functions
      function initializeGamingFeatures() {
        // Initialize XP system
        initializeXPSystem();
        
        // Theme system
        initializeThemeSystem();
        
        // Floating buttons
        initializeFloatingButtons();
        
        // Apply initial theme
        applyTheme('cult');
        
        console.log('✅ Gaming-tier features initialized');
      }
      
      function initializeXPSystem() {
        let currentXP = parseInt(localStorage.getItem('nocturne_xp') || '0');
        let currentLevel = Math.floor(currentXP / 100) + 1;
        
        const cultRanks = [
          'Initiate', 'Acolyte', 'Disciple', 'Devotee', 'Mystic',
          'Shadow Walker', 'Void Speaker', 'Dark Oracle', 'Night Lord', 'Eternal Master'
        ];
        
        function updateXPDisplay() {
          const xpForCurrentLevel = (currentLevel - 1) * 100;
          const xpForNextLevel = currentLevel * 100;
          const progressXP = currentXP - xpForCurrentLevel;
          const maxProgressXP = xpForNextLevel - xpForCurrentLevel;
          const progressPercent = (progressXP / maxProgressXP) * 100;
          
          document.getElementById('xpBarFill').style.width = progressPercent + '%';
          document.getElementById('xpText').textContent = `${progressXP} / ${maxProgressXP} XP`;
          document.getElementById('levelIndicator').textContent = `Level ${currentLevel}`;
          document.getElementById('cultRank').textContent = cultRanks[Math.min(currentLevel - 1, cultRanks.length - 1)];
        }
        
        function gainXP(amount) {
          currentXP += amount;
          const newLevel = Math.floor(currentXP / 100) + 1;
          
          if (newLevel > currentLevel) {
            currentLevel = newLevel;
            showLevelUpNotification();
          }
          
          localStorage.setItem('nocturne_xp', currentXP.toString());
          updateXPDisplay();
        }
        
        function showLevelUpNotification() {
          const notification = document.createElement('div');
          notification.className = 'level-up-notification';
          notification.innerHTML = `
            <div class="level-up-content">
              <div class="level-up-title">🌟 LEVEL UP! 🌟</div>
              <div class="level-up-text">You've reached Level ${currentLevel}!</div>
              <div class="level-up-rank">New Rank: ${cultRanks[Math.min(currentLevel - 1, cultRanks.length - 1)]}</div>
            </div>
          `;
          notification.style.cssText = `
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #ff1493, #ff69b4);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            z-index: 10000;
            box-shadow: 0 0 30px rgba(255, 20, 147, 0.8);
            animation: levelUpPulse 2s ease-in-out;
          `;
          
          document.body.appendChild(notification);
          setTimeout(() => notification.remove(), 3000);
        }
        
        // Award XP for various actions
        window.gainXP = gainXP;
        updateXPDisplay();
        
        // Auto-gain XP for activity
        setInterval(() => gainXP(1), 30000); // 1 XP every 30 seconds for engagement
      }
      
      function initializeThemeSystem() {
        const themeBtn = document.getElementById('themeBtn');
        const themeDropdown = document.getElementById('themeDropdown');
        let currentTheme = localStorage.getItem('nocturne_theme') || 'cult';
        
        // Theme dropdown toggle
        themeBtn.addEventListener('click', (e) => {
          e.stopPropagation();
          themeDropdown.classList.toggle('show');
        });
        
        // Close dropdown when clicking outside
        document.addEventListener('click', () => {
          themeDropdown.classList.remove('show');
        });
        
        // Theme selection
        document.querySelectorAll('.theme-option').forEach(option => {
          option.addEventListener('click', (e) => {
            const theme = e.target.dataset.theme;
            applyTheme(theme);
            themeDropdown.classList.remove('show');
          });
        });
        
        // Apply saved theme
        applyTheme(currentTheme);
      }
      
      function applyTheme(themeName) {
        const themes = {
          cult: {
            name: '🌙 Cult',
            primary: '#ff1493',
            secondary: '#ff69b4',
            glow: '#ff1493',
            bg: '#0a0a0a'
          },
          cyber: {
            name: '⚡ Cyber',
            primary: '#00ffff',
            secondary: '#0080ff',
            glow: '#00ffff',
            bg: '#001122'
          },
          ember: {
            name: '🔥 Ember',
            primary: '#ff6600',
            secondary: '#ff9900',
            glow: '#ff6600',
            bg: '#2a1a0a'
          }
        };
        
        const theme = themes[themeName];
        if (!theme) return;
        
        // Remove old theme classes
        document.body.classList.remove('theme-cult', 'theme-cyber', 'theme-ember');
        
        // Add new theme class
        document.body.classList.add(`theme-${themeName}`);
        
        // Update CSS variables
        document.documentElement.style.setProperty('--theme-primary', theme.primary);
        document.documentElement.style.setProperty('--theme-secondary', theme.secondary);
        document.documentElement.style.setProperty('--theme-glow', theme.glow);
        document.documentElement.style.setProperty('--theme-bg', theme.bg);
        document.documentElement.style.setProperty('--neon-pink', theme.primary);
        
        // Update theme button text
        document.getElementById('themeBtn').textContent = theme.name;
        
        // Save theme preference
        localStorage.setItem('nocturne_theme', themeName);
        
        // Award XP for theme change
        if (window.gainXP) window.gainXP(5);
        
        console.log(`✨ Applied ${theme.name} theme`);
      }
      
      function initializeFloatingButtons() {
        const floatingToggle = document.getElementById('floatingToggle');
        const floatingMenu = document.getElementById('floatingMenu');
        
        // Toggle floating menu
        floatingToggle.addEventListener('click', () => {
          floatingMenu.classList.toggle('show');
          floatingToggle.style.transform = floatingMenu.classList.contains('show') 
            ? 'scale(1.1) rotate(45deg)' 
            : 'scale(1) rotate(0deg)';
        });
        
        // Floating button actions
        document.getElementById('securityBtn').addEventListener('click', () => {
          showNotification('🛡️ Security scan initiated...', 'success');
          if (window.gainXP) window.gainXP(10);
          floatingMenu.classList.remove('show');
          floatingToggle.style.transform = 'scale(1) rotate(0deg)';
        });
        
        document.getElementById('achievementsBtn').addEventListener('click', () => {
          showAchievementsModal();
          floatingMenu.classList.remove('show');
          floatingToggle.style.transform = 'scale(1) rotate(0deg)';
        });
        
        document.getElementById('helpBtn').addEventListener('click', () => {
          showNotification('❓ Help documentation opened', 'info');
          floatingMenu.classList.remove('show');
          floatingToggle.style.transform = 'scale(1) rotate(0deg)';
        });
      }
      
      function showAchievementsModal() {
        const modal = document.createElement('div');
        modal.className = 'achievements-modal';
        modal.innerHTML = `
          <div class="modal-content">
            <div class="modal-header">
              <h2>🏆 Achievements</h2>
              <button class="modal-close" onclick="this.parentElement.parentElement.parentElement.remove()">×</button>
            </div>
            <div class="modal-body">
              <div class="achievement-grid">
                <div class="achievement-item completed">
                  <div class="achievement-icon">🌙</div>
                  <div class="achievement-info">
                    <h3>First Steps</h3>
                    <p>Welcome to NocturneSwap</p>
                  </div>
                </div>
                <div class="achievement-item">
                  <div class="achievement-icon">💱</div>
                  <div class="achievement-info">
                    <h3>First Swap</h3>
                    <p>Perform your first token swap</p>
                  </div>
                </div>
                <div class="achievement-item">
                  <div class="achievement-icon">🏊</div>
                  <div class="achievement-info">
                    <h3>Liquidity Provider</h3>
                    <p>Add liquidity to a pool</p>
                  </div>
                </div>
                <div class="achievement-item">
                  <div class="achievement-icon">🎯</div>
                  <div class="achievement-info">
                    <h3>Theme Master</h3>
                    <p>Try all visual themes</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        `;
        
        modal.style.cssText = `
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: rgba(0, 0, 0, 0.8);
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 10000;
          backdrop-filter: blur(10px);
        `;
        
        document.body.appendChild(modal);
        if (window.gainXP) window.gainXP(5);
      }

      // PWA Functions
      function showInstallButton() {
        const installBtn = document.createElement('button');
        installBtn.textContent = '📱 Install App';
        installBtn.className = 'install-btn glow-btn';
        installBtn.style.position = 'fixed';
        installBtn.style.bottom = '20px';
        installBtn.style.right = '20px';
        installBtn.style.zIndex = '9999';
        
        installBtn.addEventListener('click', async () => {
          if (deferredPrompt) {
            deferredPrompt.prompt();
            const { outcome } = await deferredPrompt.userChoice;
            console.log(`PWA install prompt: ${outcome}`);
            deferredPrompt = null;
            installBtn.remove();
          }
        });
        
        document.body.appendChild(installBtn);
        
        // Auto-hide after 10 seconds
        setTimeout(() => {
          if (installBtn.parentNode) {
            installBtn.remove();
          }
        }, 10000);
      }
      
      function showUpdateNotification() {
        const notification = document.createElement('div');
        notification.className = 'update-notification';
        notification.innerHTML = `
          <div class="notification-content">
            <span>🔄 App update available!</span>
            <button onclick="location.reload()" class="update-btn">Update Now</button>
            <button onclick="this.parentNode.parentNode.remove()" class="dismiss-btn">Later</button>
          </div>
        `;
        notification.style.cssText = `
          position: fixed;
          top: 20px;
          right: 20px;
          background: linear-gradient(45deg, #9d4edd, #c77dff);
          color: white;
          padding: 16px;
          border-radius: 12px;
          z-index: 10000;
          box-shadow: 0 8px 32px rgba(157, 78, 221, 0.3);
        `;
        
        document.body.appendChild(notification);
        
        // Auto-hide after 8 seconds
        setTimeout(() => {
          if (notification.parentNode) {
            notification.remove();
          }
        }, 8000);
      }

      // Gaming-Tier Theme System
      function switchTheme(theme) {
        document.body.className = `theme-${theme}`;
        localStorage.setItem('nocturne-theme', theme);
        
        // Update theme button text
        const themeBtn = document.getElementById('themeSwitcher');
        if (themeBtn) {
          const themeNames = { cult: '🌙 Cult', cyber: '🌐 Cyber', ember: '🔥 Ember' };
          themeBtn.textContent = themeNames[theme];
        }
        
        // Restart particle effects
        restartParticleEffects();
      }

      function restartParticleEffects() {
        // Remove existing embers
        document.querySelectorAll('.ember').forEach(ember => ember.remove());
        
        // Create new embers based on theme
        const theme = document.body.className.replace('theme-', '');
        createEmberEffect(theme);
      }

      function createEmberEffect(theme) {
        const colors = {
          cult: ['#ff1493', '#8e44ad', '#fff0fa'],
          cyber: ['#00fff7', '#00ff85', '#0ff'],
          ember: ['#ff6f00', '#ff1744', '#ffb300']
        };
        
        setInterval(() => {
          if (document.querySelectorAll('.ember').length < 8) {
            const ember = document.createElement('div');
            ember.className = 'ember';
            ember.style.left = Math.random() * 100 + 'vw';
            ember.style.animationDelay = Math.random() * 2 + 's';
            ember.style.animationDuration = (4 + Math.random() * 4) + 's';
            
            const themeColors = colors[theme] || colors.cult;
            const color = themeColors[Math.floor(Math.random() * themeColors.length)];
            ember.style.background = `radial-gradient(circle, ${color}, transparent)`;
            
            document.body.appendChild(ember);
            
            // Remove ember after animation
            setTimeout(() => ember.remove(), 8000);
          }
        }, 1000);
      }

      // XP and Rank System
      let currentXP = parseInt(localStorage.getItem('nocturne-xp') || '0');
      let currentRank = parseInt(localStorage.getItem('nocturne-rank') || '1');

      function updateXPDisplay() {
        const xpElement = document.getElementById('currentXP');
        const rankElement = document.getElementById('currentRank');
        const progressElement = document.getElementById('xpProgress');
        
        if (xpElement) xpElement.textContent = currentXP;
        if (rankElement) rankElement.textContent = currentRank;
        
        if (progressElement) {
          const xpForNextRank = currentRank * 1000;
          const progress = (currentXP % 1000) / 10;
          progressElement.style.width = progress + '%';
        }
      }

      function addXP(amount) {
        currentXP += amount;
        localStorage.setItem('nocturne-xp', currentXP.toString());
        
        // Check for rank up
        const newRank = Math.floor(currentXP / 1000) + 1;
        if (newRank > currentRank) {
          currentRank = newRank;
          localStorage.setItem('nocturne-rank', currentRank.toString());
          showRankUpAnimation();
        }
        
        updateXPDisplay();
      }

      function showRankUpAnimation() {
        const notification = document.createElement('div');
        notification.innerHTML = `
          <div style="text-align: center;">
            <h3>🎉 RANK UP! 🎉</h3>
            <p>You've reached Cult Rank ${currentRank}!</p>
          </div>
        `;
        notification.style.cssText = `
          position: fixed;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          background: linear-gradient(45deg, #ff1493, #8e44ad);
          color: white;
          padding: 30px;
          border-radius: 15px;
          z-index: 10000;
          box-shadow: 0 0 30px #ff1493;
          animation: rankUpPulse 2s ease-in-out;
        `;
        
        document.body.appendChild(notification);
        setTimeout(() => notification.remove(), 3000);
      }

      // Floating Buttons System
      function toggleFloatingMenu() {
        const menu = document.getElementById('floatingMenu');
        const isExpanded = menu.classList.contains('expanded');
        
        if (isExpanded) {
          menu.classList.remove('expanded');
        } else {
          menu.classList.add('expanded');
        }
      }

      function showAchievements() {
        const modal = document.createElement('div');
        modal.innerHTML = `
          <div class="modal-content">
            <span class="close" onclick="this.parentElement.parentElement.remove()">&times;</span>
            <h2>🏆 Achievements</h2>
            <div class="achievement-grid">
              <div class="achievement-item ${currentXP >= 100 ? 'unlocked' : ''}">
                <div class="achievement-icon">🌟</div>
                <div class="achievement-text">
                  <h4>First Steps</h4>
                  <p>Earn 100 XP</p>
                </div>
              </div>
              <div class="achievement-item ${currentXP >= 500 ? 'unlocked' : ''}">
                <div class="achievement-icon">💎</div>
                <div class="achievement-text">
                  <h4>Diamond Hands</h4>
                  <p>Earn 500 XP</p>
                </div>
              </div>
              <div class="achievement-item ${currentRank >= 5 ? 'unlocked' : ''}">
                <div class="achievement-icon">👑</div>
                <div class="achievement-text">
                  <h4>Cult Leader</h4>
                  <p>Reach Rank 5</p>
                </div>
              </div>
            </div>
          </div>
        `;
        modal.className = 'achievement-modal';
        modal.style.cssText = `
          position: fixed;
          top: 0; left: 0; width: 100%; height: 100%;
          background: rgba(0,0,0,0.8);
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 10000;
        `;
        
        document.body.appendChild(modal);
      }

      // Social Features Functions
      function updateSocialData() {
        // Update profile data
        const profileXP = document.getElementById('profileXP');
        const profileTrades = document.getElementById('profileTrades');
        const profileVolume = document.getElementById('profileVolume');
        const leaderboardUserXP = document.getElementById('leaderboardUserXP');
        
        if (profileXP) profileXP.textContent = currentXP;
        if (profileTrades) profileTrades.textContent = localStorage.getItem('nocturne-trades') || '0';
        if (profileVolume) profileVolume.textContent = '$' + (localStorage.getItem('nocturne-volume') || '0');
        if (leaderboardUserXP) leaderboardUserXP.textContent = currentXP + ' XP';
        
        // Update referral data
        const referralCount = document.getElementById('referralCount');
        const referralBonus = document.getElementById('referralBonus');
        
        if (referralCount) referralCount.textContent = localStorage.getItem('nocturne-referrals') || '0';
        if (referralBonus) referralBonus.textContent = localStorage.getItem('nocturne-referral-bonus') || '0';
      }

      function copyReferralLink() {
        const referralLink = document.getElementById('referralLink');
        if (referralLink) {
          referralLink.select();
          document.execCommand('copy');
          showNotification('Referral link copied! 🔗');
        }
      }

      // Enhanced Social Hub Feed with XP logs, referrals, DAO actions
      function updateSocialFeed() {
        const logs = [
          { user: "MoonWarden", action: "Earned XP (Trade Volume)", xp: "+75 XP", time: "3m ago", icon: "📈" },
          { user: "Degen42", action: "Referred a cultist", xp: "+100 XP", time: "8m ago", icon: "🔗" },
          { user: "RugSniper", action: "Upvoted DAO Proposal #12", xp: "+40 XP", time: "15m ago", icon: "🗳️" },
          { user: "CultSeeker", action: "Completed Daily Quest", xp: "+200 XP", time: "30m ago", icon: "⭐" },
          { user: "AirdropNomad", action: "Claimed Level 5 Bonus", xp: "+300 XP", time: "1h ago", icon: "🎁" },
          { user: "NCTPMaxi", action: "Swapped 5,000 NCTP", xp: "+55 XP", time: "2h ago", icon: "🔄" }
        ];

        const socialFeeds = document.querySelectorAll('.social-feed');
        socialFeeds.forEach(feedElement => {
          if (feedElement) {
            feedElement.innerHTML = logs.map(log => {
              const isRecent = ['3m ago', '8m ago'].includes(log.time);
              return `
                <div class="feed-item" style="transition: all 0.3s ease; ${isRecent ? 'background: rgba(75, 0, 130, 0.1); border-left: 3px solid rgba(75, 0, 130, 0.5);' : ''}">
                  <div class="feed-avatar" style="background: linear-gradient(135deg, rgba(75, 0, 130, 0.8), rgba(139, 0, 139, 0.6));">
                    ${log.icon}
                  </div>
                  <div class="feed-content">
                    <div class="feed-user" style="font-weight: 700; color: #e0e0e0;">${log.user}</div>
                    <div class="feed-text" style="color: #c0c0c0;">${log.action}</div>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 4px;">
                      <div class="feed-time" style="color: ${isRecent ? '#4ade80' : '#a0a0a0'};">${log.time}</div>
                      <div style="color: #4ade80; font-weight: 600; font-size: 0.9rem;">${log.xp}</div>
                    </div>
                  </div>
                </div>
              `;
            }).join('');
          }
        });
      }

      // Enhanced Pool Overview with Detailed Pool Data
      function updatePoolOverview() {
        const pools = [
          { name: "NCTP/SOL", apr: "92.4%", tvl: "$420,420", staked: "3,000 NCTP", yourShare: "12.4%", hot: true },
          { name: "SOL/USDC", apr: "38.1%", tvl: "$1.2M", staked: "5.1 SOL", yourShare: "5.2%", hot: false },
          { name: "FUD/USDC", apr: "66.6%", tvl: "$880K", staked: "8,888 FUD", yourShare: "1.7%", hot: false },
          { name: "PEPE/NCTP", apr: "105%", tvl: "$1.0M", staked: "1.1M PEPE", yourShare: "9.9%", hot: true }
        ];

        // Update pool stats
        const poolStats = {
          poolCount: pools.length.toString(),
          poolTVL: "$4.5M",
          poolAPY: "75.5%"
        };

        Object.entries(poolStats).forEach(([key, value]) => {
          const element = document.getElementById(key);
          if (element) {
            element.textContent = value;
            // Add subtle animation on update
            element.style.transform = 'scale(1.05)';
            setTimeout(() => {
              element.style.transform = 'scale(1)';
            }, 200);
          }
        });
      }

      // DAO Functions
      function updateDAOData() {
        // Calculate voting power based on XP and rank
        const baseVotes = Math.floor(currentXP / 100);
        const rankBonus = currentRank * 10;
        const activityBonus = Math.floor((localStorage.getItem('nocturne-trades') || 0) / 5);
        const totalVotes = baseVotes + rankBonus + activityBonus;
        
        const votingPower = document.getElementById('votingPower');
        const tokenVotes = document.getElementById('tokenVotes');
        const rankVotes = document.getElementById('rankVotes');
        const activityVotes = document.getElementById('activityVotes');
        
        if (votingPower) votingPower.textContent = totalVotes;
        if (tokenVotes) tokenVotes.textContent = baseVotes;
        if (rankVotes) rankVotes.textContent = rankBonus;
        if (activityVotes) activityVotes.textContent = activityBonus;
      }

      function castVote(proposalId, vote) {
        const votes = JSON.parse(localStorage.getItem('nocturne-votes') || '{}');
        
        if (votes[proposalId]) {
          showNotification('You have already voted on this proposal! 🗳️');
          return;
        }
        
        votes[proposalId] = vote;
        localStorage.setItem('nocturne-votes', JSON.stringify(votes));
        
        // Add XP for voting
        addXP(25);
        
        showNotification(`Vote cast: ${vote === 'yes' ? '👍' : '👎'} (+25 XP)`);
        
        // Disable vote buttons for this proposal
        const proposalElement = document.querySelector(`[onclick*="${proposalId}"]`).closest('.proposal-item');
        const voteButtons = proposalElement.querySelectorAll('.vote-btn');
        voteButtons.forEach(btn => {
          btn.disabled = true;
          btn.style.opacity = '0.5';
        });
      }

      function createProposal() {
        const title = document.getElementById('proposalTitle').value;
        const description = document.getElementById('proposalDescription').value;
        
        if (!title || !description) {
          showNotification('Please fill in all fields! ✍️');
          return;
        }
        
        if (currentXP < 100) {
          showNotification('You need at least 100 XP to create proposals! 📈');
          return;
        }
        
        // Save proposal (in real app, this would go to backend)
        const proposals = JSON.parse(localStorage.getItem('nocturne-proposals') || '[]');
        const newProposal = {
          id: Date.now(),
          title,
          description,
          creator: 'You',
          createdAt: new Date().toISOString(),
          votes: { yes: 0, no: 0 }
        };
        
        proposals.push(newProposal);
        localStorage.setItem('nocturne-proposals', JSON.stringify(proposals));
        
        // Clear form
        document.getElementById('proposalTitle').value = '';
        document.getElementById('proposalDescription').value = '';
        
        // Add XP for creating proposal
        addXP(50);
        
        showNotification('Proposal created successfully! 🏛️ (+50 XP)');
      }

      // Advanced Trading Features
      function switchTradingMode(mode) {
        // Hide all panels
        document.getElementById('limitPanel').style.display = 'none';
        document.getElementById('dcaPanel').style.display = 'none';
        
        // Remove active class from all tabs
        document.querySelectorAll('.mode-tab').forEach(tab => {
          tab.classList.remove('active');
        });
        
        // Show selected panel and activate tab
        if (mode === 'limit') {
          document.getElementById('limitPanel').style.display = 'block';
          updateSwapButtonText('Place Limit Order');
        } else if (mode === 'dca') {
          document.getElementById('dcaPanel').style.display = 'block';
          updateDCAPreview();
          updateSwapButtonText('Start DCA');
        } else {
          updateSwapButtonText('Swap');
        }
        
        // Activate clicked tab
        document.querySelector(`[data-mode="${mode}"]`).classList.add('active');
        
        addXP(5); // XP for exploring features
      }
      
      function updateSwapButtonText(text) {
        const swapButton = document.getElementById('swapButton');
        if (swapButton && !swapButton.disabled) {
          swapButton.textContent = text;
        }
      }
      
      function updateDCAPreview() {
        const frequency = document.getElementById('dcaFrequency').value;
        const duration = document.getElementById('dcaDuration').value;
        const amount = parseFloat(document.getElementById('fromAmount').value) || 0;
        
        let purchases = 0;
        switch(frequency) {
          case 'daily':
            purchases = duration === '1w' ? 7 : duration === '1m' ? 30 : duration === '3m' ? 90 : 180;
            break;
          case 'weekly':
            purchases = duration === '1w' ? 1 : duration === '1m' ? 4 : duration === '3m' ? 12 : 24;
            break;
          case 'monthly':
            purchases = duration === '1w' ? 0.25 : duration === '1m' ? 1 : duration === '3m' ? 3 : 6;
            break;
        }
        
        const amountPerPurchase = purchases > 0 ? (amount / purchases).toFixed(4) : 0;
        
        document.getElementById('dcaTotalPurchases').textContent = Math.floor(purchases);
        document.getElementById('dcaAmountPerPurchase').textContent = `${amountPerPurchase} SOL`;
      }
      
      // Portfolio Analytics Functions
      function exportTradingHistory() {
        const trades = [
          ['Date', 'Pair', 'Type', 'Amount', 'Value', 'PnL'],
          ['2025-07-10 14:30', 'SOL → USDC', 'Instant Swap', '1.5 SOL', '$150.75', '+$2.50'],
          ['2025-07-10 14:15', 'USDC → RAY', 'Limit Order', '50 USDC', '125 RAY', '-$1.20'],
          ['2025-07-10 13:45', 'RAY → SOL', 'DCA', '100 RAY', '0.8 SOL', '+$0.85']
        ];
        
        const csvContent = trades.map(row => row.join(',')).join('\n');
        const blob = new Blob([csvContent], { type: 'text/csv' });
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'nocturne_trading_history.csv';
        a.click();
        window.URL.revokeObjectURL(url);
        
        addXP(20);
        showNotification('Trading history exported! 📊 (+20 XP)');
      }
      
      // Cult Wars Functions
      function switchCultTeam() {
        const currentTeam = localStorage.getItem('nocturne-cult-team') || 'moon-cult';
        const newTeam = currentTeam === 'moon-cult' ? 'degen-army' : 'moon-cult';
        
        localStorage.setItem('nocturne-cult-team', newTeam);
        
        const teamName = newTeam === 'moon-cult' ? '🌙 Moon Cult' : '🦍 Degen Army';
        showNotification(`Switched to ${teamName}! ⚔️ (+30 XP)`);
        
        addXP(30);
        updateCultWarsDisplay();
      }
      
      function updateCultWarsDisplay() {
        const currentTeam = localStorage.getItem('nocturne-cult-team') || 'moon-cult';
        const teamDisplay = document.querySelector('.contrib-value');
        if (teamDisplay) {
          teamDisplay.textContent = currentTeam === 'moon-cult' ? '🌙 Moon Cult' : '🦍 Degen Army';
        }
        
        // Update battle timer
        const timer = document.getElementById('battleTimer');
        if (timer) {
          updateBattleTimer();
        }
      }
      
      function updateBattleTimer() {
        const endDate = new Date();
        endDate.setDate(endDate.getDate() + 2);
        endDate.setHours(endDate.getHours() + 14);
        
        const now = new Date();
        const timeLeft = endDate - now;
        
        const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
        const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        
        const timer = document.getElementById('battleTimer');
        if (timer) {
          timer.textContent = `${days}d ${hours}h left`;
        }
      }
      
      // Seasonal Events Functions
      function createSeasonalEvent() {
        const name = document.getElementById('eventName').value;
        const type = document.getElementById('eventType').value;
        const duration = document.getElementById('eventDuration').value;
        
        if (!name || !duration) {
          showNotification('Please fill in all event details! 📋');
          return;
        }
        
        if (currentXP < 500) {
          showNotification('You need 500 XP to create seasonal events! 📈');
          return;
        }
        
        const event = {
          id: Date.now(),
          name,
          type,
          duration: parseInt(duration),
          created: new Date().toISOString(),
          active: true
        };
        
        const events = JSON.parse(localStorage.getItem('nocturne-seasonal-events') || '[]');
        events.push(event);
        localStorage.setItem('nocturne-seasonal-events', JSON.stringify(events));
        
        // Clear form
        document.getElementById('eventName').value = '';
        document.getElementById('eventDuration').value = '';
        
        addXP(100);
        showNotification(`Seasonal event "${name}" created! 🎉 (+100 XP)`);
      }
      
      // Advanced Analytics Functions
      function updateAdvancedAnalytics() {
        // Update portfolio analytics
        const trades = parseInt(localStorage.getItem('nocturne-trades') || '0');
        const volume = parseFloat(localStorage.getItem('nocturne-volume') || '0');
        
        const totalReturn = Math.floor(Math.random() * 1000) + 500; // Mock data
        const winRate = Math.floor(Math.random() * 40) + 60; // 60-100%
        const avgTradeSize = volume > 0 ? Math.floor(volume / trades) : 0;
        const bestTrade = Math.floor(Math.random() * 200) + 50;
        
        const totalReturnEl = document.getElementById('totalReturn');
        const winRateEl = document.getElementById('winRate');
        const avgTradeSizeEl = document.getElementById('avgTradeSize');
        const bestTradeEl = document.getElementById('bestTrade');
        
        if (totalReturnEl) totalReturnEl.textContent = `+$${totalReturn}`;
        if (winRateEl) winRateEl.textContent = `${winRate}%`;
        if (avgTradeSizeEl) avgTradeSizeEl.textContent = `$${avgTradeSize}`;
        if (bestTradeEl) bestTradeEl.textContent = `+$${bestTrade}`;
        
        // Update cult wars user stats
        const userVolume = Math.floor(Math.random() * 5000);
        const userRank = Math.floor(Math.random() * 100) + 1;
        
        const volumeEl = document.getElementById('userBattleVolume');
        const rankEl = document.getElementById('userBattleRank');
        
        if (volumeEl) volumeEl.textContent = `$${userVolume}`;
        if (rankEl) rankEl.textContent = `#${userRank}`;
      }
      
      // Enhanced initialization
      function initializeAdvancedFeatures() {
        // Initialize trading mode listeners
        const dcaFrequency = document.getElementById('dcaFrequency');
        const dcaDuration = document.getElementById('dcaDuration');
        
        if (dcaFrequency && dcaDuration) {
          dcaFrequency.addEventListener('change', updateDCAPreview);
          dcaDuration.addEventListener('change', updateDCAPreview);
        }
        
        // Initialize cult wars
        updateCultWarsDisplay();
        
        // Update analytics
        updateAdvancedAnalytics();
        
        // Start battle timer updates
        setInterval(updateBattleTimer, 60000); // Update every minute
        
        // Periodic analytics updates
        setInterval(updateAdvancedAnalytics, 30000); // Update every 30 seconds
        
        console.log('✨ Advanced features initialized');
      }

      // Initialize Gaming Features
      function initializeGamingFeatures() {
        // Load saved theme
        const savedTheme = localStorage.getItem('nocturne-theme') || 'cult';
        switchTheme(savedTheme);
        
        // Initialize XP display
        updateXPDisplay();
        
        // Add event listeners
        const themeSwitcher = document.getElementById('themeSwitcher');
        const themeDropdown = document.getElementById('themeDropdown');
        
        if (themeSwitcher && themeDropdown) {
          themeSwitcher.addEventListener('click', (e) => {
            e.stopPropagation();
            themeDropdown.classList.toggle('show');
          });
          
          document.addEventListener('click', () => {
            themeDropdown.classList.remove('show');
          });
        }
        
        // Theme option listeners
        document.querySelectorAll('.theme-option').forEach(option => {
          option.addEventListener('click', (e) => {
            const theme = e.target.dataset.theme;
            switchTheme(theme);
            themeDropdown.classList.remove('show');
          });
        });
        
        // Floating menu listener
        const floatingToggle = document.getElementById('floatingToggle');
        if (floatingToggle) {
          floatingToggle.addEventListener('click', toggleFloatingMenu);
        }
        
        // Achievement button listener
        const achievementBtn = document.getElementById('achievementBtn');
        if (achievementBtn) {
          achievementBtn.addEventListener('click', showAchievements);
        }
        
        // Social features listeners
        const copyReferralBtn = document.getElementById('copyReferralLink');
        if (copyReferralBtn) {
          copyReferralBtn.addEventListener('click', copyReferralLink);
        }
        
        // DAO features listeners
        const createProposalBtn = document.getElementById('createProposal');
        if (createProposalBtn) {
          createProposalBtn.addEventListener('click', createProposal);
        }
        
        // Advanced Trading Features listeners
        document.querySelectorAll('.mode-tab').forEach(tab => {
          tab.addEventListener('click', (e) => {
            switchTradingMode(e.target.dataset.mode);
          });
        });
        
        // Advanced features listeners
        const exportTradesBtn = document.getElementById('exportTrades');
        if (exportTradesBtn) {
          exportTradesBtn.addEventListener('click', exportTradingHistory);
        }
        
        const switchTeamBtn = document.getElementById('switchTeam');
        if (switchTeamBtn) {
          switchTeamBtn.addEventListener('click', switchCultTeam);
        }
        
        // Seasonal events listeners
        const createEventBtn = document.getElementById('createEvent');
        if (createEventBtn) {
          createEventBtn.addEventListener('click', createSeasonalEvent);
        }
        
        // Add XP on interactions
        document.addEventListener('click', (e) => {
          if (e.target.classList.contains('glow-btn') || 
              e.target.classList.contains('primary-btn') ||
              e.target.id === 'swapButton') {
            addXP(Math.floor(Math.random() * 20) + 10);
          }
        });
        
        // Create fog layer
        const fogLayer = document.createElement('div');
        fogLayer.className = 'fog-layer';
        document.body.appendChild(fogLayer);
        
        // Start particle effects
        createEmberEffect(savedTheme);
      }
      
      // Failsafe: Ensure loading screen is hidden after max 10 seconds
      setTimeout(() => {
        const loadingScreen = document.getElementById('loadingScreen');
        const appContainer = document.getElementById('appContainer');
        if (loadingScreen && loadingScreen.style.display !== 'none') {
          console.warn('⚠️ Failsafe: Forcing loading screen to hide after timeout');
          loadingScreen.style.display = 'none';
          if (appContainer) appContainer.style.display = 'block';
        }
      }, 10000); // 10 second failsafe
      
      // Start app when DOM is ready
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', () => {
          setTimeout(() => {
            try {
              initializeApp();
              initializeGamingFeatures();
              initializeAdvancedFeatures();
            } catch (error) {
              console.error('❌ Critical initialization error:', error);
              // Force show app even with errors
              document.getElementById('loadingScreen').style.display = 'none';
              document.getElementById('appContainer').style.display = 'block';
            }
          }, 2000); // Show loading for 2 seconds
        });
      } else {
        setTimeout(() => {
          try {
            initializeApp();
            initializeGamingFeatures();
            initializeAdvancedFeatures();
          } catch (error) {
            console.error('❌ Critical initialization error:', error);
            // Force show app even with errors
            document.getElementById('loadingScreen').style.display = 'none';
            document.getElementById('appContainer').style.display = 'block';
          }
        }, 2000);
      }
      
    </script>
  </body>
</html>
